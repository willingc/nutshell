{"post_stream":{"posts":[{"id":277474,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-17T16:14:10.092Z","cooked":"\u003ch2\u003e\u003ca name=\"p-277474-introduction-1\" class=\"anchor\" href=\"#p-277474-introduction-1\"\u003e\u003c/a\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eWe (\u003ca class=\"mention\" href=\"/u/emmatyping\"\u003e@emmatyping\u003c/a\u003e, \u003ca class=\"mention\" href=\"/u/eclips4\"\u003e@eclips4\u003c/a\u003e) propose introducing the Rust programming language to CPython. Rust will initially only be allowed for writing optional extension modules, \u003cs\u003ebut eventually will become a required dependency of CPython and allowed to be used throughout the CPython code base\u003c/s\u003e (see \u003ca href=\"https://discuss.python.org/t/pre-pep-rust-for-cpython/104906/117\"\u003eupdate here about requiring Rust\u003c/a\u003e).\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277474-motivation-2\" class=\"anchor\" href=\"#p-277474-motivation-2\"\u003e\u003c/a\u003eMotivation\u003c/h2\u003e\n\u003cp\u003eRust has established itself as a popular, memory-safe systems programming language in use by a large number of projects. Memory safety is a property of a programming language which disallows out-of-bounds reads and writes to memory, as well as use-after-free errors. Rust’s safety properties are enforced by an ownership mode for code, which ensures that memory accesses are valid. Rust’s memory safety guarantees have been formally proven by the \u003ca href=\"https://plv.mpi-sws.org/rustbelt/\"\u003eRustBelt project\u003c/a\u003e for code that does not use “unsafe” . By adopting Rust, entire classes of bugs, crashes, and security vulnerabilities can be eliminated from code.\u003c/p\u003e\n\u003cp\u003eDue to Rust’s ownership model, the language also enforces thread safety: data races are prevented at compile time. With free-threaded Python becoming officially supported and more popular, ensuring the standard library is thread safe becomes critical. Rust’s strong thread safety guarantees would ease reasoning around multi-threaded code in the CPython code base.\u003c/p\u003e\n\u003cp\u003eLarge C/C++ based projects such as \u003ca href=\"https://lore.kernel.org/lkml/202210010816.1317F2C@keescook/\"\u003ethe Linux kernel\u003c/a\u003e, \u003ca href=\"https://security.googleblog.com/2021/04/rust-in-android-platform.html\"\u003eAndroid\u003c/a\u003e, \u003ca href=\"https://wiki.mozilla.org/Oxidation\"\u003eFirefox\u003c/a\u003e, and \u003ca href=\"https://www.theregister.com/2025/11/03/debian_apt_to_require_rust/\"\u003emany others\u003c/a\u003e have begun adopting Rust to improve memory safety, and some are already \u003ca href=\"http://security.googleblog.com/2025/11/rust-in-android-move-fast-fix-things.html\"\u003ereporting positive results from this approach\u003c/a\u003e. Furthermore, Rust has become a popular language for writing 3rd-party extension modules for Python. At the 2025 Language Summit, it was mentioned that \u003ca href=\"https://pyfound.blogspot.com/2025/06/python-language-summit-2025-what-do-core-developers-want-from-rust.html\"\u003e25-33% of 3rd-party Python extension modules use Rust, especially new extension modules\u003c/a\u003e. By adopting Rust in CPython itself, we expect to encourage new contributors to extension modules.\u003c/p\u003e\n\u003cp\u003eCPython has historically encountered numerous bugs and crashes due to invalid memory accesses.We believe that introducing Rust into CPython would reduce the number of such issues by disallowing invalid memory accesses by construction. While there will necessarily be some unsafe operations interacting with CPython’s C API to begin with, implementing the core module logic in safe Rust would greatly reduce the amount of code which could potentially be unsafe.\u003c/p\u003e\n\u003cp\u003eRust also provides “zero-cost”, well designed implementations of common data structures such as Vectors, HashMaps, Mutexes, and more. Zero cost in this context means that these data structures allow implementations to use higher-level constructs with the performance of hand-rolled implementations in other languages. The documentation for \u003ca href=\"https://doc.rust-lang.org/std/\"\u003ethe Rust standard library\u003c/a\u003e covers these data structures very thoroughly. By having these zero-cost, high-level abstractions we expect Rust will make it easier to implement performance-sensitive portions of CPython.\u003c/p\u003e\n\u003cp\u003eRust additionally enables principled meta-programming through its macro system. Rust has two types of macros: declarative and procedural. Declarative macros in Rust are hygienic, meaning that they cannot unintentionally capture variables, unlike in C. This means it is much easier to reason about macros in Rust compared to C. Procedural macros are a way to write Rust code which does token transformations on structure definitions, functions, and more. Procedural macros are very powerful, and are used by PyO3 to ergonomically handle things like argument parsing, class definitions, and module definitions.\u003c/p\u003e\n\u003cp\u003eFinally, Rust has an excellent build system. Rust uses \u003ca href=\"https://doc.rust-lang.org/cargo/\"\u003ethe Cargo package manager\u003c/a\u003e, which handles acquiring dependencies and invoking \u003ccode\u003erustc\u003c/code\u003e (the Rust compiler driver). Cargo supports vendoring dependencies out of the box, so that any Rust dependencies do not need to be downloaded (see open questions about dependencies). Furthermore, Rust has easy to set up cross-compilation which only requires installing the desired target and ensuring the proper linker is available.\u003c/p\u003e\n\u003cp\u003eIn summary, Rust provides many extremely useful benefits that would improve CPython development. Increasing memory safety would be a significant improvement in of itself, but it is far from the only benefit Rust provides.\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277474-implementation-3\" class=\"anchor\" href=\"#p-277474-implementation-3\"\u003e\u003c/a\u003eImplementation\u003c/h2\u003e\n\u003cp\u003eThe integration of Rust would begin by adding Rust-based extension modules to the “Modules/” directory, which contains the C extensions for the Python standard library. The Rust modules would be optional at build time, dependent on if the build environment has Rust available.\u003c/p\u003e\n\u003cp\u003eIntegrating Rust with the CPython C API requires foreign function interface (FFI) definitions in Rust to describe the APIs available. A new crate (a library in Rust terminology) \u003ccode\u003ecpython-sys\u003c/code\u003e will be introduced to handle these FFI definitions. To automate the process of generating Rust FFI bindings, we use \u003ca href=\"https://github.com/rust-lang/rust-bindgen\"\u003ebindgen\u003c/a\u003e. Bindgen is not only an official Rust project, but also used ubiquitously throughout the Rust ecosystem to bind to C APIs, including in the Linux and Android projects. Bindgen uses libclang at build time to read C headers and automatically generate Rust FFI bindings for the current target. Unfortunately, due to the use of C macros to define some constants and methods, the \u003ccode\u003ecpython-sys\u003c/code\u003e crate will also need to replicate a few important APIs like \u003ccode\u003ePYOBJECT_HEAD_INIT\u003c/code\u003e manually. However these should all be straightforward to replicate and few in number.\u003c/p\u003e\n\u003cp\u003eWith the C API bindings available in Rust, contributors can call the FFI definitions to interact with CPython. This will necessarily introduce some unsafe Rust code. However extension modules should be written such that there is a minimal amount of unsafe at the edges of FFI boundaries.\u003c/p\u003e\n\u003cp\u003eEventually safe abstractions to simplify and standardize code like module definitions, function argument parsing, and class definitions could be adopted to reduce the amount of raw FFI code written.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/emmatyping/cpython/tree/rust-in-cpython\"\u003eA reference implementation\u003c/a\u003e which includes a proof-of-concept \u003ccode\u003e_base64\u003c/code\u003e module which uses Rust to provide a speedup to \u003ccode\u003ebase64\u003c/code\u003e is available.\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277474-distribution-4\" class=\"anchor\" href=\"#p-277474-distribution-4\"\u003e\u003c/a\u003eDistribution\u003c/h2\u003e\n\u003cp\u003eRust supports \u003ca href=\"https://peps.python.org/pep-0011/\"\u003eall platforms which CPython supports\u003c/a\u003e and \u003ca href=\"https://doc.rust-lang.org/nightly/rustc/platform-support.html\"\u003emany more as well\u003c/a\u003e. Rust’s tiers are slightly different, and include information on whether host tools (such as \u003ccode\u003erustc\u003c/code\u003e and \u003ccode\u003ecargo\u003c/code\u003e) are provided. Here are all of the PEP 11 platforms and their corresponding tiers for Rust:\u003c/p\u003e\n\u003cdiv class=\"md-table\"\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003ePlatform\u003c/th\u003e\n\u003cth\u003ePython Tier\u003c/th\u003e\n\u003cth\u003eRust Tier\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003eaarch64-apple-darwin\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e1 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eaarch64-unknown-linux-gnu (gcc, glibc)\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e1 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ei686-pc-windows-msvc\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e1 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ex86_64-pc-windows-msvc\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e1 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ex86_64-unknown-linux-gnu (gcc, glibc)\u003c/td\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003e1 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eaarch64-unknown-linux-gnu (clang, glibc)\u003c/td\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003e1 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ewasm32-unknown-wasip1\u003c/td\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003e2 without Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ex86_64-apple-darwin\u003c/td\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003e2 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ex86_64-unknown-linux-gnu (clang, glibc)\u003c/td\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003e1 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eaarch64-linux-android\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e2 without Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eaarch64-pc-windows-msvc\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e1 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003earm64-apple-ios\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e2 without Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003earm64-apple-ios-simulator\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e2 without Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003earmv7l-unknown-linux-gnueabihf (Raspberry Pi, gcc)\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e2 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eaarch64-unknown-linux-gnu (Raspberry Pi, gcc)\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e1 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003epowerpc64le-unknown-linux-gnu\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e2 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003es390x-unknown-linux-gnu\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e2 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ewasm32-unknown-emscripten\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e2 without Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ex86_64-linux-android\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e2 without Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003ex86_64-unknown-freebsd\u003c/td\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003e2 with Host Tools\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e\u003cp\u003eIn summary, every platform Python supports is supported Rust at tier 2 or higher, and host tools are provided for every platform other than those where Python is already cross-compiled (e.g. WASI and mobile platforms).\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277474-rejected-ideas-5\" class=\"anchor\" href=\"#p-277474-rejected-ideas-5\"\u003e\u003c/a\u003eRejected Ideas\u003c/h2\u003e\n\u003ch4\u003e\u003ca name=\"p-277474-use-pyo3httpspyo3rs-in-cpython-6\" class=\"anchor\" href=\"#p-277474-use-pyo3httpspyo3rs-in-cpython-6\"\u003e\u003c/a\u003eUse \u003ca href=\"https://pyo3.rs/\"\u003ePyO3\u003c/a\u003e in CPython\u003c/h4\u003e\n\u003cp\u003eWhile CPython could depend on PyO3 for safe abstractions over CPython C APIs, this may not provide the flexibility desired. If a new API is added to the C API, it would need to be added to PyO3, then the version of PyO3 would need to be updated in CPython. This is a lot of overhead and would slow down development. Using bindgen, new APIs are automatically exposed to Rust.\u003c/p\u003e\n\u003ch4\u003e\u003ca name=\"p-277474-keep-rust-always-optional-7\" class=\"anchor\" href=\"#p-277474-keep-rust-always-optional-7\"\u003e\u003c/a\u003eKeep Rust Always-Optional\u003c/h4\u003e\n\u003cp\u003eRust could provide many benefits to the development of CPython such as increased memory safety, increased thread safety, and zero-cost data structures. It would be a shame if these benefits were unavailable to the core interpreter implementation permanently.\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277474-open-questions-8\" class=\"anchor\" href=\"#p-277474-open-questions-8\"\u003e\u003c/a\u003eOpen Questions\u003c/h2\u003e\n\u003ch4\u003e\u003ca name=\"p-277474-how-should-we-manage-dependencies-9\" class=\"anchor\" href=\"#p-277474-how-should-we-manage-dependencies-9\"\u003e\u003c/a\u003eHow should we manage dependencies?\u003c/h4\u003e\n\u003cp\u003eBy default cargo will download dependencies which aren’t already cached locally when \u003ccode\u003ecargo build\u003c/code\u003e is invoked, but perhaps we should vendor these? Cargo has built-in support for vendoring code. We could also \u003ccode\u003ecargo fetch\u003c/code\u003e to download dependencies at any other part of the build process (such as when running configure).\u003c/p\u003e\n\u003ch4\u003e\u003ca name=\"p-277474-how-to-handle-binding-rust-code-to-cpythons-c-api-10\" class=\"anchor\" href=\"#p-277474-how-to-handle-binding-rust-code-to-cpythons-c-api-10\"\u003e\u003c/a\u003eHow to handle binding Rust code to CPython’s C API?\u003c/h4\u003e\n\u003cp\u003eThe MVP currently uses bindgen, which requires libclang at build time and a number of other dependencies. We could pre-generate the bindings for all supported platforms, which would remove the build-time requirement on vendoring bindgen and all of its dependencies (including libclang) for those platforms.\u003c/p\u003e\n\u003ch4\u003e\u003ca name=\"p-277474-when-should-rust-be-allowed-in-non-optional-parts-of-cpython-11\" class=\"anchor\" href=\"#p-277474-when-should-rust-be-allowed-in-non-optional-parts-of-cpython-11\"\u003e\u003c/a\u003eWhen should Rust be allowed in non-optional parts of CPython?\u003c/h4\u003e\n\u003cp\u003eThis section is out of date, please see \u003ca href=\"https://discuss.python.org/t/pre-pep-rust-for-cpython/104906/117\" class=\"inline-onebox\"\u003ePre-PEP: Rust for CPython - #117 by emmatyping\u003c/a\u003e. Leaving the original for the record.\u003c/p\u003e\n\u003cp\u003eGiven the numerous advantages Rust provides, it would be advantageous to eventually introduce Rust into the core part of CPython, such as the Python string hasher, SipHash. However, requiring Rust is a significant new platform requirement. Therefore, we propose a timeline of:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eIn Python 3.15, \u003ccode\u003e./configure\u003c/code\u003e will start emitting warnings if Rust is not available in the environment. Optional extension modules may start using Rust\u003c/li\u003e\n\u003cli\u003eIn Python 3.16, \u003ccode\u003e./configure\u003c/code\u003e will fail if Rust is not available in the environment unless \u003ccode\u003e--with-rust=no\u003c/code\u003e is passed. This will ensure users are aware of the requirement of Rust on their platform in the next release\u003c/li\u003e\n\u003cli\u003eIn Python 3.17, Python may require Rust to build\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eWe choose this timeline as it gives users several years to ensure that their platform has Rust available (most should) or otherwise plan for the migration. It also ensures that users are aware of the upcoming requirement. We hope to balance allowing time to migrate to Rust with ensuring that Rust can be adopted swiftly for its many benefits.\u003c/p\u003e\n\u003ch4\u003e\u003ca name=\"p-277474-how-to-handle-bootstrapping-rust-and-cpython-12\" class=\"anchor\" href=\"#p-277474-how-to-handle-bootstrapping-rust-and-cpython-12\"\u003e\u003c/a\u003eHow to handle bootstrapping Rust and CPython\u003c/h4\u003e\n\u003cp\u003eMaking Rust a dependency of CPython would introduce a bootstrapping problem: \u003ca href=\"https://github.com/rust-lang/rust/blob/main/src/bootstrap/bootstrap.py\"\u003eRust depends on Python to bootstrap its compiler\u003c/a\u003e. There are several workarounds to this:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eRust could always ensure their bootstrap script is compatible with older versions of Python. Then the process is to build an older version of Python, build Rust, then build a newer version of CPython. The bootstrap script is currently compatible with Python 2, so this seems likely to continue to be the case\u003c/li\u003e\n\u003cli\u003eRust could use PyPy to bootstrap\u003c/li\u003e\n\u003cli\u003eRust could drop their usage of Python in the bootstrap process\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eI (\u003ca class=\"mention\" href=\"/u/emmatyping\"\u003e@emmatyping\u003c/a\u003e) plan to reach out to the Rust core team and ask what their thoughts are on this issue.\u003c/p\u003e\n\u003ch4\u003e\u003ca name=\"p-277474-what-about-platforms-that-dont-support-rust-13\" class=\"anchor\" href=\"#p-277474-what-about-platforms-that-dont-support-rust-13\"\u003e\u003c/a\u003eWhat about platforms that don’t support Rust?\u003c/h4\u003e\n\u003cp\u003eRust supports all platforms enumerated in PEP 11, but people run Python on other operating systems and architectures. Reviewing all of the issues labeled \u003ccode\u003eOS-unsupported\u003c/code\u003e in the CPython issue tracker, we found only a few cases where Rust would not be available:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eHPPA/PA-RISC: This is an old architecture from HP with the last released hardware coming out in 2005 and a community of users maintaining a Linux fork. There is no LLVM support for this architecture.\u003c/li\u003e\n\u003cli\u003eRISC OS: This is a community maintained version of an operating system created by Acorn Computers. There’s no support in Rust for this OS.\u003c/li\u003e\n\u003cli\u003ePowerPPC OS X: This older OS/architecture combination has a community of users running on PowerBooks and similar. There is no support in Rust for this OS/architecture combination, but Rust has PowerPC support for Linux.\u003c/li\u003e\n\u003cli\u003eCentOS 6: Rust requires glibc 2.17+, which is only available in Centos 7. However, it is unlikely users on a no-longer-supported Linux distribution will want the latest version of CPython. Even if they do, CPython would have a hard time supporting these platforms anyway.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4\u003e\u003ca name=\"p-277474-how-should-current-cpython-contributors-learnengage-with-rust-portions-of-the-code-base-14\" class=\"anchor\" href=\"#p-277474-how-should-current-cpython-contributors-learnengage-with-rust-portions-of-the-code-base-14\"\u003e\u003c/a\u003eHow should current CPython contributors learn/engage with Rust portions of the code base?\u003c/h4\u003e\n\u003cp\u003eCurrent contributors may need to interact with the Rust bindings if they modify any C APIs, including internal APIs. This process can be well covered in the devguide, and there are many great resources to learn Rust itself. \u003ca href=\"https://doc.rust-lang.org/stable/book/\"\u003eThe Rust book\u003c/a\u003e provides a thorough introduction to the Rust programming language. There are many other resources in addition, such as \u003ca href=\"https://github.com/nrc/r4cppp\"\u003eRust for C++ programmers\u003c/a\u003e and the official learning resources \u003ca href=\"https://rust-lang.org/learn/\" class=\"inline-onebox\"\u003eLearn Rust - Rust Programming Language\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eTo ease this process, we can introduce a Rust experts team on GitHub who can be pinged on issues to answer questions about interacting with the API bindings. Furthermore, we can add a Rust tutorial focused on Rust’s usage in CPython to the devguide.\u003c/p\u003e\n\u003cp\u003eObviously any extension modules written in Rust will require knowledge of Rust to contribute to.\u003c/p\u003e\n\u003ch4\u003e\u003ca name=\"p-277474-what-about-argument-clinic-15\" class=\"anchor\" href=\"#p-277474-what-about-argument-clinic-15\"\u003e\u003c/a\u003eWhat about Argument Clinic?\u003c/h4\u003e\n\u003cp\u003e\u003ca href=\"https://peps.python.org/pep-0436/\"\u003eArgument Clinic\u003c/a\u003e is a great tool that simplifies the work of anyone writing C functions that require argument processing. We see two possible approaches for implementing it in Rust:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eAdapt the existing Argument Clinic to parse Rust comments using the same DSL as in C extensions, and generate Rust function signatures.\u003c/li\u003e\n\u003cli\u003eCreate a Rust procedural macro capable of parsing a similar DSL. This approach might allow it to be used by any third-party package, whereas the C-based Argument Clinic does not guarantee compatibility with third-party extensions.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eUsing a proc macro would allow for better IDE integration and could become useful to 3rd party extension authors.\u003c/p\u003e\n\u003ch4\u003e\u003ca name=\"p-277474-should-the-cpython-rust-crates-be-supported-for-3rd-party-use-should-there-be-a-rust-api-16\" class=\"anchor\" href=\"#p-277474-should-the-cpython-rust-crates-be-supported-for-3rd-party-use-should-there-be-a-rust-api-16\"\u003e\u003c/a\u003eShould the CPython Rust crates be supported for 3rd-party use? Should there be a Rust API?\u003c/h4\u003e\n\u003cp\u003eHaving canonical Rust crates for bindings to CPython’s C API would be advantageous, but the project is ill-prepared to support usage by 3rd-parties at this time. Thus we propose deferring making Rust code supported for 3rd-party use until a later date.\u003c/p\u003e","post_number":1,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T02:30:12.274Z","reply_count":10,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":7379,"reads":587,"readers_count":586,"score":37615.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://plv.mpi-sws.org/rustbelt/","internal":false,"reflection":false,"title":"RustBelt","clicks":216},{"url":"https://github.com/emmatyping/cpython/tree/rust-in-cpython","internal":false,"reflection":false,"title":"GitHub - emmatyping/cpython at rust-in-cpython","clicks":164},{"url":"http://security.googleblog.com/2025/11/rust-in-android-move-fast-fix-things.html","internal":false,"reflection":false,"title":"Google Online Security Blog: Rust in Android: move fast and fix things","clicks":130},{"url":"https://peps.python.org/pep-0436/","internal":false,"reflection":false,"title":"PEP 436 – The Argument Clinic DSL | peps.python.org","clicks":114},{"url":"https://github.com/rust-lang/rust/blob/main/src/bootstrap/bootstrap.py","internal":false,"reflection":false,"title":"rust/src/bootstrap/bootstrap.py at main · rust-lang/rust · GitHub","clicks":100},{"url":"https://pyo3.rs/","internal":false,"reflection":false,"title":"Introduction - PyO3 user guide","clicks":81},{"url":"https://pyfound.blogspot.com/2025/06/python-language-summit-2025-what-do-core-developers-want-from-rust.html","internal":false,"reflection":false,"title":"Python Software Foundation News: The Python Language Summit 2025: What do core developers want from Rust?","clicks":65},{"url":"https://github.com/rust-lang/rust-bindgen","internal":false,"reflection":false,"title":"GitHub - rust-lang/rust-bindgen: Automatically generates Rust FFI bindings to C (and some C++) libraries.","clicks":43},{"url":"https://www.theregister.com/2025/11/03/debian_apt_to_require_rust/","internal":false,"reflection":false,"title":"Debian demands Rust or rust in peace for legacy ports • The Register","clicks":38},{"url":"https://doc.rust-lang.org/std/","internal":false,"reflection":false,"title":"std - Rust","clicks":25},{"url":"https://peps.python.org/pep-0011/","internal":false,"reflection":false,"title":"PEP 11 – CPython platform support | peps.python.org","clicks":22},{"url":"https://lore.kernel.org/lkml/202210010816.1317F2C@keescook/","internal":false,"reflection":false,"title":"Making sure you're not a bot!","clicks":19},{"url":"https://github.com/nrc/r4cppp","internal":false,"reflection":false,"title":"GitHub - nrc/r4cppp: Rust for C++ programmers","clicks":19},{"url":"https://doc.rust-lang.org/stable/book/","internal":false,"reflection":false,"title":"The Rust Programming Language - The Rust Programming Language","clicks":18},{"url":"https://rust-lang.org/learn/","internal":false,"reflection":false,"title":"Learn Rust - Rust Programming Language","clicks":18},{"url":"https://security.googleblog.com/2021/04/rust-in-android-platform.html","internal":false,"reflection":false,"title":"Google Online Security Blog: Rust in the Android platform","clicks":14},{"url":"https://doc.rust-lang.org/nightly/rustc/platform-support.html","internal":false,"reflection":false,"title":"Platform Support - The rustc book","clicks":14},{"url":"https://wiki.mozilla.org/Oxidation","internal":false,"reflection":false,"title":"Oxidation - MozillaWiki","clicks":12},{"url":"https://doc.rust-lang.org/cargo/","internal":false,"reflection":false,"title":"Introduction - The Cargo Book","clicks":4}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":78}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/1","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null,"can_vote":false},{"id":277475,"name":"Cornelius Krupp","username":"MegaIng","avatar_template":"/user_avatar/discuss.python.org/megaing/{size}/16162_2.png","created_at":"2025-11-17T16:25:13.623Z","cooked":"\u003cp\u003eIsn’t the experience in the linux kernel with adding rust support as a core part more a cautionary tale? At least it looks that way from the outside. There is constant friction between the two different “types of programmers”, causing a lot of quite public disagreement. If rust becomes a requirement for core devs, might that scare away some current maintainers who don’t want to deal with it?\u003c/p\u003e","post_number":2,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T16:25:13.623Z","reply_count":4,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":28,"reads":477,"readers_count":476,"score":433.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Cornelius Krupp","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":12}],"moderator":false,"admin":false,"staff":false,"user_id":21030,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/2","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277478,"name":"Kirill Podoprigora","username":"Eclips4","avatar_template":"/user_avatar/discuss.python.org/eclips4/{size}/32292_2.png","created_at":"2025-11-17T16:32:54.743Z","cooked":"\u003cp\u003eHello, and thanks for your question!\u003cbr\u003e\nWe will try to make this transition as smooth as possible. We’re planning to write a “migration guide” for CPython contributors to help make their adoption of Rust as easy as possible.\u003cbr\u003e\nCan this scare current maintainers? Yes.\u003cbr\u003e\nWill we do everything we can to make sure it doesn’t? Absolutely.\u003c/p\u003e","post_number":3,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T16:32:54.743Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":12,"reads":476,"readers_count":475,"score":498.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Kirill Podoprigora","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":21030,"username":"MegaIng","name":"Cornelius Krupp","avatar_template":"/user_avatar/discuss.python.org/megaing/{size}/16162_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":21}],"moderator":false,"admin":false,"staff":false,"user_id":8236,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/3","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277480,"name":"Jacopo Abramo","username":"jacopoabramo","avatar_template":"/user_avatar/discuss.python.org/jacopoabramo/{size}/23840_2.png","created_at":"2025-11-17T16:45:22.507Z","cooked":"\u003cp\u003eI’m not a core dev nor expert in the internals of CPython, but I wanted to chime in to resonate with the question from \u003ca class=\"mention\" href=\"/u/megaing\"\u003e@MegaIng\u003c/a\u003e , pointing out though that it looks to me (as a Python user) that the community in general is more “approachable” in comparison to what happened during the integration of some Rust in the Linux kernel.\u003c/p\u003e\n\u003cp\u003eOut of curiosity, what would this mean for both \u003ccode\u003ePyO3\u003c/code\u003e and \u003ca href=\"https://github.com/RustPython/RustPython\" rel=\"noopener nofollow ugc\"\u003e\u003ccode\u003eRustPython\u003c/code\u003e\u003c/a\u003e? Have you reached out to the mantainers of the latter for feedback on how to approach this possibility? If so, what’s their opinion? It looks to me like this possible PEP might benefit greatly from their experience (I don’t know if you guys are part of their team, I’m just assuming you’re not but I apologize if that’s incorrect).\u003c/p\u003e\n\u003cp\u003eAlso, I’m probably jumping the gun with this question, but since also \u003ccode\u003eRustPython\u003c/code\u003e seems to be implementing the GIL in a similar fashion, would you expect some challenges in applying PEP 703 efficiently for rust-based extensions? I imagine (or rather, hope) that by the time 3.17 is out that CPython will be completely GIL-less by then. Do you expect that this additional feature will be provided smoothly in Rust extensions as well?\u003c/p\u003e\n\u003cp\u003eSame question applies for the new experimental JIT which should be more stable in future releases.\u003c/p\u003e\n\u003cp\u003eFinally, if I recall rust applications tend to be a bit “bloated” in binary size, although there are some tricks that can be done at compile time to reduce this - what do these tricks imply on performance I have no idea.\u003c/p\u003e","post_number":4,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T16:45:22.507Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":30,"reads":477,"readers_count":476,"score":323.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jacopo Abramo","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/RustPython/RustPython","internal":false,"reflection":false,"title":"GitHub - RustPython/RustPython: A Python Interpreter written in Rust","clicks":94}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":43595,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/4","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277482,"name":"Steve Dower","username":"steve.dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","created_at":"2025-11-17T17:04:41.634Z","cooked":"\u003cp\u003eAs a general direction, I’d rather see “optional extension modules”\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277482-1\" id=\"footnote-ref-277482-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e living outside the main repo and brought in later in the build/release process. Presumably such modules have no tight core dependency, or they wouldn’t be able to be optional, and so they should be able to build on pre-release runtimes and work fine with released runtimes (as we expect of 3rd party developers).\u003c/p\u003e\n\u003cp\u003eThe bootstrapping position is discussed in the proposed text and determined to be viable. I think this position applies equally well to bootstrapping the modules we theoretically expect people to write that rely on non-core dependencies.\u003c/p\u003e\n\u003cp\u003eMerging in additional modules as part of our release process is fine. Bundling additional sources and optional build steps into the source tarball is fine (if we think that Linux distros will just ignore us when we say “you should include these modules in your Python runtime”).\u003c/p\u003e\n\u003cp\u003eFor what it’s worth, I believe that the parts of CPython that directly depend on OpenSSL and Tcl/Tk are also fit for this. So don’t see my position as being about Rust itself\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277482-2\" id=\"footnote-ref-277482-2\"\u003e[2]\u003c/a\u003e\u003c/sup\u003e - it’s about the direction we should be taking with adding new modules to the core runtime.\u003c/p\u003e\n\u003cp\u003eIn short, adding new ways to add new, non-essential modules to the core is counter to the approach we’ve been taking over the last few years. So I’m -1 on adding one.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277482-1\" class=\"footnote-item\"\u003e\u003cp\u003eAlso optional regular modules. \u003ca href=\"#footnote-ref-277482-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"footnote-277482-2\" class=\"footnote-item\"\u003e\u003cp\u003eIf you want my position about Rust itself, well… it’s not going to help your PEP at all \u003cimg src=\"https://emoji.discourse-cdn.com/apple/wink.png?v=15\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e \u003ca href=\"#footnote-ref-277482-2\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":5,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T17:04:41.634Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":10,"reads":438,"readers_count":437,"score":426.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steve Dower","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":19}],"moderator":false,"admin":false,"staff":false,"user_id":54,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/5","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277483,"name":"Alex Gaynor","username":"alex_Gaynor","avatar_template":"/user_avatar/discuss.python.org/alex_gaynor/{size}/17_2.png","created_at":"2025-11-17T17:05:59.850Z","cooked":"\u003cp\u003eAs I think many folks know, I’ve been quite involved in these sorts of efforts (starting the effort that became Rust for Linux at the PyCon sprints, migrating pyca/cryptography to Rust, and helping to maintain pyo3). As a result, it will come to no one’s surprise that I’m very supportive of this pre-PEP \u003cimg src=\"https://emoji.discourse-cdn.com/apple/slight_smile.png?v=15\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003cp\u003eI’m happy to answer any questions folks have about those experiences and lessons learned.\u003c/p\u003e","post_number":6,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T17:05:59.850Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":9,"reads":418,"readers_count":417,"score":792.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Alex Gaynor","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":40}],"moderator":false,"admin":false,"staff":false,"user_id":12,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/6","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277485,"name":"James Webber","username":"jamestwebber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","created_at":"2025-11-17T17:17:51.836Z","cooked":"\u003cp\u003eAs a Rust fan I think this is super cool! I do wonder if this is too much to figure out in one PEP, when parts of it seems pretty easily separable. I can see how the overall vision fits together, but it’s a lot.\u003c/p\u003e\n\u003cp\u003eWould it make sense to restrict the initial proposal as just “create the \u003ccode\u003ecpython-sys\u003c/code\u003e crate and allow optional Rust extensions in the stdlib”? That would allow iteration on making a good generic interface\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277485-1\" id=\"footnote-ref-277485-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e without requiring the SC to make a decision on the long-term plan.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277485-1\" class=\"footnote-item\"\u003e\u003cp\u003ethere is plenty of prior art in \u003ccode\u003ePyO3\u003c/code\u003e, and I think the \u003ccode\u003eHPy\u003c/code\u003e project has some relevance there too \u003ca href=\"#footnote-ref-277485-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":7,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T17:17:51.836Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":414,"readers_count":413,"score":191.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Webber","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":12267,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/7","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277487,"name":"Michael H","username":"mikeshardmind","avatar_template":"/user_avatar/discuss.python.org/mikeshardmind/{size}/14381_2.png","created_at":"2025-11-17T17:31:19.898Z","cooked":"\u003cp\u003eI would feel more comfortable with this if it was dependent on custom json targets stabilizing in Rust. Right now, targetting platforms that Rust itself doesn’t support still requires nightly, and python is used to bootstrap a lot of things in a lot of places.\u003c/p\u003e\n\u003cp\u003eI don’t think the impact of this is going to be reasonably predictable, and I’d want there to be a stable upstream escape hatch for those in unusual situations.\u003c/p\u003e","post_number":8,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T17:31:19.898Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":10,"reads":406,"readers_count":405,"score":224.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Michael H","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":15730,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/8","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277489,"name":"Gundarin Roman","username":"NamorNiradnug","avatar_template":"/user_avatar/discuss.python.org/namorniradnug/{size}/32531_2.png","created_at":"2025-11-17T18:17:44.410Z","cooked":"\u003cp\u003eDoesn’t “C“ in the name of “CPython“ means “C programming language”? If so, shouldn’t the project be eventually renamed when a significant part of it is (re)written in Rust?\u003c/p\u003e\n\u003cp\u003e/joke, but who knows\u003c/p\u003e","post_number":9,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T18:17:44.410Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":389,"readers_count":388,"score":291.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Gundarin Roman","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":13}],"moderator":false,"admin":false,"staff":false,"user_id":79974,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/9","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277490,"name":"Da Woods","username":"da-woods","avatar_template":"/user_avatar/discuss.python.org/da-woods/{size}/7507_2.png","created_at":"2025-11-17T18:38:53.354Z","cooked":"\u003cp\u003eI’ll start by saying my opinion doesn’t matter here: the number of lines of C I’ve written that’s in the Python interpreter is of the order of 10, so whatever you decide it’s unlikely to be my personal problem.\u003c/p\u003e\n\u003cp\u003eI’m pretty convinced of Rust as a nice language to write cool new things in (and of the value of exposing cool those cool new things to be used from Python). I’m less convinced of the benefit of rewriting existing working things in Rust.\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277490-1\" id=\"footnote-ref-277490-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e\u003c/p\u003e\n\u003cp\u003eSo from my point of view this PEP doesn’t offer a lot - it’s largely proposing “rewrite some modules in Rust with a view to soften people up to rewrite more in Rust”. I’d be much more convinced by a PEP that wanted to add something useful to the standard library and had found the best way to do that was to use a Rust library.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eMinor comment:\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRust could use PyPy to bootstrap\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI suspect this isn’t viable for a couple for reasons: PyPy isn’t hugely well maintained right now, and (I believe) PyPy needs a Python interpreter to bootstrap itself so may not solve the problem.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277490-1\" class=\"footnote-item\"\u003e\u003cp\u003eAnd I think some of the push-pack Rust gets is from when people do this. It’s hard to argue with the benefit of a new and exciting feature but easy to be unimpressed with “what we already have but in Rust”. \u003ca href=\"#footnote-ref-277490-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":10,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T18:38:53.354Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":25,"reads":388,"readers_count":387,"score":521.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Da Woods","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":21}],"moderator":false,"admin":false,"staff":false,"user_id":7468,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/10","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277491,"name":"Antoine Pitrou","username":"pitrou","avatar_template":"/user_avatar/discuss.python.org/pitrou/{size}/28_2.png","created_at":"2025-11-17T18:48:33.079Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eEventually safe abstractions to simplify and standardize code like module definitions, function argument parsing, and class definitions could be adopted to reduce the amount of raw FFI code written.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/emmatyping/cpython/tree/rust-in-cpython\"\u003eA reference implementation\u003c/a\u003e which includes a proof-of-concept \u003ccode\u003e_base64\u003c/code\u003e module which uses Rust to provide a speedup to \u003ccode\u003ebase64\u003c/code\u003e is available.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis example shows that you really want the safe abstractions for this to be useful. Otherwise you’re doing the same kind of tedious, unsafe, error-prone low-level pointer juggling and manual reference cleanup as in C (hello \u003ccode\u003ePy_DecRef\u003c/code\u003e \u003cimg src=\"https://emoji.discourse-cdn.com/apple/cry.png?v=15\" title=\":cry:\" class=\"emoji\" alt=\":cry:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e).\u003c/p\u003e","post_number":11,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T18:48:33.079Z","reply_count":2,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":33,"reads":396,"readers_count":395,"score":338.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Antoine Pitrou","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":23,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/11","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277493,"name":"Guido van Rossum","username":"guido","avatar_template":"/user_avatar/discuss.python.org/guido/{size}/21_2.png","created_at":"2025-11-17T19:06:36.769Z","cooked":"\u003cp\u003eSnarky note: do we eventually have to rename CPython to CRPython? \u003cimg src=\"https://emoji.discourse-cdn.com/apple/slight_smile.png?v=15\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003cp\u003eSeriously, I think this is a great development. We all know that a full rewrite in Rust won’t work, but starting to introduce Rust initially for less-essential components, and then gradually letting it take over more essential components sounds like a good plan.\u003c/p\u003e\n\u003cp\u003eI trust Emma and others to do a great job of guiding the discussion over the exact shape that the plan and the implementation should take.\u003c/p\u003e","post_number":12,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T19:06:36.769Z","reply_count":3,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":119,"reads":392,"readers_count":391,"score":1562.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Guido van Rossum","primary_group_name":"committers","flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":57}],"moderator":false,"admin":false,"staff":false,"user_id":10,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/12","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277494,"name":"Nathan Goldbaum","username":"ngoldbaum","avatar_template":"/user_avatar/discuss.python.org/ngoldbaum/{size}/12276_2.png","created_at":"2025-11-17T19:13:14.690Z","cooked":"\u003cp\u003eAs a PyO3 maintainer IMO it’d be really nice if we could get rid of the need for the \u003ccode\u003epyo3-ffi\u003c/code\u003e crate and instead rely on bindgen bindings maintained by upstream.\u003c/p\u003e\n\u003cp\u003eMost of the overhead of supporting new Python versions is updating the FFI bindings.\u003c/p\u003e\n\u003cp\u003eI bet \u003ca class=\"mention\" href=\"/u/davidhewitt\"\u003e@davidhewitt\u003c/a\u003e has opinions about this from the PyO3 maintainer perspective and I’ll defer to him if he disagrees with me about \u003ccode\u003epyo3-ffi\u003c/code\u003e.\u003c/p\u003e","post_number":13,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T19:13:14.690Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":9,"reads":384,"readers_count":383,"score":410.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Nathan Goldbaum","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":17}],"moderator":false,"admin":false,"staff":false,"user_id":11747,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/13","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277495,"name":"Ed Page","username":"epage","avatar_template":"/user_avatar/discuss.python.org/epage/{size}/13922_2.png","created_at":"2025-11-17T19:18:19.754Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003ch4\u003eHow to handle bootstrapping Rust and CPython\u003c/h4\u003e\n\u003cp\u003eMaking Rust a dependency of CPython would introduce a bootstrapping problem: \u003ca href=\"https://github.com/rust-lang/rust/blob/main/src/bootstrap/bootstrap.py\" rel=\"noopener nofollow ugc\"\u003eRust depends on Python to bootstrap its compiler\u003c/a\u003e. There are several workarounds to this:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eRust could always ensure their bootstrap script is compatible with older versions of Python. Then the process is to build an older version of Python, build Rust, then build a newer version of CPython. The bootstrap script is currently compatible with Python 2, so this seems likely to continue to be the case\u003c/li\u003e\n\u003cli\u003eRust could use PyPy to bootstrap\u003c/li\u003e\n\u003cli\u003eRust could drop their usage of Python in the bootstrap process\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eI (\u003ca class=\"mention\" href=\"/u/emmatyping\"\u003e@emmatyping\u003c/a\u003e) plan to reach out to the Rust core team and ask what their thoughts are on this issue.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThe specific team involved is \u003ca href=\"https://rust-lang.org/governance/teams/infra/#team-bootstrap\" rel=\"noopener nofollow ugc\"\u003eT-bootstrap\u003c/a\u003e which you can reach out to on zulip at \u003ca href=\"https://rust-lang.zulipchat.com/#narrow/channel/326414-t-infra.2Fbootstrap\" rel=\"noopener nofollow ugc\"\u003e#t-infra/bootstrap\u003c/a\u003e\u003c/p\u003e","post_number":14,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T19:18:19.754Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":34,"reads":382,"readers_count":381,"score":330.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Ed Page","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://rust-lang.org/governance/teams/infra/#team-bootstrap","internal":false,"reflection":false,"title":"Infrastructure team - Rust Programming Language","clicks":39},{"url":"https://rust-lang.zulipchat.com/#narrow/channel/326414-t-infra.2Fbootstrap","internal":false,"reflection":false,"title":"Public view of rust-lang | Zulip team chat","clicks":17}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":14473,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/14","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277496,"name":"Chris Angelico","username":"Rosuav","avatar_template":"/user_avatar/discuss.python.org/rosuav/{size}/3429_2.png","created_at":"2025-11-17T19:18:26.061Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"guido\" data-post=\"12\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/guido/48/21_2.png\" class=\"avatar\"\u003e Guido van Rossum:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSnarky note: do we eventually have to rename CPython to CRPython? \u003cimg src=\"https://emoji.discourse-cdn.com/apple/slight_smile.png?v=15\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI would strongly advise against that, on account of people inserting an “A” into it \u003cimg src=\"https://emoji.discourse-cdn.com/apple/slight_smile.png?v=15\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003cp\u003eMore seriously though: Rust has been a focus for a lot of controversy and risk, with massive open questions such as the impact of a potential \u003ca href=\"https://aeb.win.tue.nl/linux/hh/thompson/trust.html\"\u003eKen Thompson style compiler hack\u003c/a\u003e. Will CPython lose trust by becoming dependent on a single specific compiler that might be subject to such a hack? Currently, CPython can be compiled using multiple different compilers (I believe gcc, clang, and MSVC are all supported - correct me if I’m wrong?), which mitigates the threat by allowing them to check each other. Adding Rust to the mix will mean that, on every platform, the same Rust compiler MUST be used.\u003c/p\u003e","post_number":15,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T19:18:26.061Z","reply_count":3,"reply_to_post_number":12,"quote_count":1,"incoming_link_count":50,"reads":379,"readers_count":378,"score":499.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Chris Angelico","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://aeb.win.tue.nl/linux/hh/thompson/trust.html","internal":false,"reflection":false,"clicks":197}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":11}],"moderator":false,"admin":false,"staff":false,"user_id":3377,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/15","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277497,"name":"Paul Ganssle","username":"pganssle","avatar_template":"/user_avatar/discuss.python.org/pganssle/{size}/245_2.png","created_at":"2025-11-17T19:41:22.635Z","cooked":"\u003cp\u003eI have long liked the idea of doing something like this, and as someone who always introduces memory leaks and segfaults and such any time he writes any kind of C extension code, I welcome the idea of more modern zero-cost abstractions for that\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277497-1\" id=\"footnote-ref-277497-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e.\u003c/p\u003e\n\u003cp\u003eHowever, one cost I think that has not been mentioned here is the effect that this could have on build times. In my experience, compile times for Rust (and C++) are \u003cem\u003emuch\u003c/em\u003e slower than for C. On my 2019 Thinkpad T480, from a fresh clone of CPython, I can build the whole thing in 2m50s (with \u003ccode\u003emake -j\u003c/code\u003e, and admittedly it taxes the machine):\u003c/p\u003e\n\u003cpre data-code-wrap=\"python\"\u003e\u003ccode class=\"lang-python\"\u003ereal\t2m50.573s\nuser\t14m57.260s\nsys\t0m42.975s\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfter the initial build, incremental builds are in seconds. Not sure I know of any projects of comparable size and complexity to compare with, does anyone know if (in the extreme — I know this isn’t the plan) we were to re-write CPython in Rust, how the build times would compare? I really think that the fast iteration time and low overhead from the builds is a great feature of our current build system that I would really hate to give up.\u003c/p\u003e\n\u003cp\u003eI guess the question is a dual one: can we write Rust in a way that it will \u003cem\u003enot\u003c/em\u003e cause build times to explode and if we cannot, is the plan to keep the scope of Rust in CPython to a level where building is still very accessible?\u003c/p\u003e\n\u003cp\u003eMy thinking is that if build times were 2x slower that would be acceptable if it meant a significant reduction in security critical bugs, but I personally wouldn’t love it if it were much slower than that.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277497-1\" class=\"footnote-item\"\u003e\u003cp\u003eOn rereading, I realized that this makes it sound like I want zero-cost abstractions to help me introduce more segfaults. If it’s unclear to anyone, I meant “to avoid that”. I have left the original wording because I like to at least initially convey that I am Chaotic Neutral. \u003ca href=\"#footnote-ref-277497-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":16,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T19:51:30.369Z","reply_count":4,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":15,"reads":374,"readers_count":373,"score":333.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Paul Ganssle","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":11}],"moderator":false,"admin":false,"staff":false,"user_id":195,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/16","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277499,"name":"Barry Warsaw","username":"barry","avatar_template":"/user_avatar/discuss.python.org/barry/{size}/42_2.png","created_at":"2025-11-17T19:51:57.260Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"guido\" data-post=\"12\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/guido/48/21_2.png\" class=\"avatar\"\u003e Guido van Rossum:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSnarky note: do we eventually have to rename CPython to CRPython?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eClearly it should be “CrustyPython” \u003cimg src=\"https://emoji.discourse-cdn.com/apple/smiley.png?v=15\" title=\":smiley:\" class=\"emoji\" alt=\":smiley:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003cp\u003eBut seriously, I’m really excited about this proposal.\u003c/p\u003e","post_number":17,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T19:51:57.260Z","reply_count":0,"reply_to_post_number":12,"quote_count":1,"incoming_link_count":11,"reads":358,"readers_count":357,"score":485.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Barry Warsaw","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":22}],"moderator":false,"admin":false,"staff":false,"user_id":17,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/17","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277500,"name":"James Webber","username":"jamestwebber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","created_at":"2025-11-17T19:55:18.227Z","cooked":"\u003cp\u003eIn my experience incremental Rust builds are also very fast–the initial setup (including downloading and building all the dependencies) can be slow, but it’s able to do fast incremental builds just fine.\u003c/p\u003e\n\u003cp\u003eAlso, there’s a big difference between debug and release mode–building in debug mode is way faster. I would be surprised if this impacted iteration time unless you’re trying to rebuild the world every time.\u003c/p\u003e","post_number":18,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T19:55:38.971Z","reply_count":0,"reply_to_post_number":16,"quote_count":0,"incoming_link_count":12,"reads":360,"readers_count":359,"score":171.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Webber","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":195,"username":"pganssle","name":"Paul Ganssle","avatar_template":"/user_avatar/discuss.python.org/pganssle/{size}/245_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":12267,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/18","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277502,"name":"danny mcClanahan","username":"cosmicexplorer","avatar_template":"/user_avatar/discuss.python.org/cosmicexplorer/{size}/31291_2.png","created_at":"2025-11-17T20:32:02.439Z","cooked":"\u003cp\u003eI recently elected to try learning C++ after an entire professional career of Rust + Python, because I wanted to make a build system that can be bootstrapped in as few jumps as possible (so that it could be invoked from inside other build systems like cargo or pip). Having worked a lot on the pants build tool in python + rust, I have strong feelings about affordances the build system should provide to users—feelings I will try to quell to achieve a productive discussion.\u003c/p\u003e\n\u003cp\u003eThe pants build tool has incorporated rust since Twitter’s “moonshot” rewrite from python-only through 2017-2019—I contributed the current iteration of our python-level interface for cacheable+parallelizable build tasks (\u003ca href=\"https://www.pantsbuild.org/stable/docs/writing-plugins/the-rules-api/concepts\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\"\u003eConcepts | Pantsbuild\u003c/a\u003e), which uses pyo3 to hook up rust async methods as “intrinsics” which can be interchanged with “async def” coroutines (Stu Hood originally proposed and implemented this approach)—we’ve had this interop since before async was stable and before pyo3 existed.\u003c/p\u003e\n\u003cp\u003eWe used rust, so we had to use cargo. Most of a decade later, we haven’t managed to use our own build system (written in rust) to build the rust code at the heart of our system. I claim that one of the major reasons for this failure is that cargo is almost unique among build systems in providing absolutely no structured mechanisms for:\u003cbr\u003e\n(1) communicating with other package build scripts in the same dependency graph\u003cbr\u003e\n(2) communicating with the downstream user who invokes cargo (such as a distro packager, or a github actions pipeline)\u003c/p\u003e\n\u003cp\u003eThis failure is especially notable because of the same powerful guarantees cargo ensures for rust-only dependency graphs, as described in OP:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eFinally, Rust has an excellent build system. Rust uses the Cargo package manager, which handles acquiring dependencies\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003ecargo unfortunately has no standard mechanism for declaring dependencies downloaded within a build script so that they can be audited or overwritten, except the excessively restricted (non-transitive) and poorly documented \u003ccode\u003elinks\u003c/code\u003e key in Cargo.toml, which requires that a build script link a native library into the resulting executable.\u003c/p\u003e\n\u003cp\u003ecargo also has no standard conception of a “toolchain”, or even an ABI outside of rustc output. This can and does mean that build scripts will fail because a dependency was built for a slightly different ABI, because again, not only is there no standard interface for downstream build configuration, but there’s not even a standard interface for communicating structured data \u003cem\u003eacross build scripts\u003c/em\u003e. So rust devs end up doing the natural thing and using somewhere in \u003ccode\u003e~/.cache\u003c/code\u003e or \u003ccode\u003e~/.config\u003c/code\u003e or elsewhere as undocumented mutable state.\u003c/p\u003e\n\u003cp\u003eI am relatively confident this isn’t an oversimplification, because bootstrapping the rust compiler itself ends up invoking multiple distinct reimplementations of LLVM target triple parsing, added at different times and never synced up. This is because rustc uses cargo, and cargo does not support structured communication across build scripts.\u003c/p\u003e\n\u003cp\u003eI proposed some of how I wanted to help improve this situation to NGI Zero at the end of last year. This C++ system I mentioned at the beginning is a competing approach, which would replace cargo instead of attempting incremental reform. I’m still not sure of the “right” answer to this—and I don’t think fixing cargo should be the purview of this PEP anyway.\u003c/p\u003e\n\u003cp\u003eBut I am personally convinced that if CPython were to integrate rust (possibly even just at phase 1, with only external module support), we (CPython and pypa contributors, of which I am only the latter) would necessarily have to figure out a more structured way to thread ABI info through cargo, and potentially even institute a whole structured communication mechanism across the build script dependency graph. \u003cstrong\u003eI think that will be a lot of hard work and we should prepare for it earlier rather than later\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eI am very heartened to read in OP that there are steps being taken to interface with the rustc team to express CPython’s bootstrapping+portability requirements. It sounds like we’re on a good trajectory already to consider the above. I would just urge contributors to consider that pants has not solved cargo’s python packaging difficulties in many years and that it may be worth opening up a greater discussion about cargo affordances in order for \u003cem\u003ecargo\u003c/em\u003e (not just rustc) to support CPython’s (and consequently pypa’s) needs.\u003c/p\u003e","post_number":19,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T20:32:02.439Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":24,"reads":387,"readers_count":386,"score":520.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"danny mcClanahan","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://www.pantsbuild.org/stable/docs/writing-plugins/the-rules-api/concepts","internal":false,"reflection":false,"title":"Concepts | Pantsbuild","clicks":10}],"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":21}],"moderator":false,"admin":false,"staff":false,"user_id":6039,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/19","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277503,"name":"Alex Gaynor","username":"alex_Gaynor","avatar_template":"/user_avatar/discuss.python.org/alex_gaynor/{size}/17_2.png","created_at":"2025-11-17T20:40:32.388Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"pganssle\" data-post=\"16\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/pganssle/48/245_2.png\" class=\"avatar\"\u003e pganssle:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI guess the question is a dual one: can we write Rust in a way that it will \u003cem\u003enot\u003c/em\u003e cause build times to explode and if we cannot, is the plan to keep the scope of Rust in CPython to a level where building is still very accessible?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThe best things we can do to keep Rust build UX good for core devs (and other contributors):\u003c/p\u003e\n\u003cp\u003eKeep a lean dep tree – and be able to rebuild each module individually (lots of parallelism, like we have in C).\u003c/p\u003e\n\u003cp\u003eHave a easy to use flow that uses \u003ccode\u003ecargo check\u003c/code\u003e, which does type checking but doesn’t actually compile, since that gives you a very fast devloop.\u003c/p\u003e","post_number":20,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T20:40:32.388Z","reply_count":0,"reply_to_post_number":16,"quote_count":1,"incoming_link_count":4,"reads":360,"readers_count":359,"score":240.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Alex Gaynor","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":8}],"moderator":false,"admin":false,"staff":false,"user_id":12,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/20","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277504,"name":"David Hewitt","username":"davidhewitt","avatar_template":"/user_avatar/discuss.python.org/davidhewitt/{size}/3502_2.png","created_at":"2025-11-17T20:43:30.183Z","cooked":"\u003cp\u003eThank you \u003ca class=\"mention\" href=\"/u/emmatyping\"\u003e@emmatyping\u003c/a\u003e \u003ca class=\"mention\" href=\"/u/eclips4\"\u003e@eclips4\u003c/a\u003e for proposing this (and \u003ca class=\"mention\" href=\"/u/ngoldbaum\"\u003e@ngoldbaum\u003c/a\u003e for the ping)! Very excited to see this initiative and as a proponent of Python, Rust, and the two together, eager to be involved.\u003c/p\u003e\n\u003cp\u003eAs a longtime PyO3 maintainer I have been thinking about what this might look like for a while. I asked about exactly this kind of possibility at the Language Summit earlier this year to gauge the temperature for anyone wishing to experiment. The response I heard then was that experimentation towards a concrete proposal was welcome (I hadn’t yet found the time to explore myself, so thank you).\u003c/p\u003e\n\u003cp\u003eI have a number of comments so will try to keep each brief for now and we can expand later if needed.\u003c/p\u003e\n\u003caside class=\"quote group-committers quote-modified\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e[rejected] Use \u003ca href=\"https://pyo3.rs/\" rel=\"noopener nofollow ugc\"\u003ePyO3\u003c/a\u003e in CPython\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003caside class=\"quote group-committers\" data-username=\"pitrou\" data-post=\"11\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/pitrou/48/28_2.png\" class=\"avatar\"\u003e pitrou:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThis example shows that you really want the safe abstractions for this to be useful.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI completely agree with both of these points. Depending on PyO3 as currently implemented within CPython will introduce unwanted friction. PyO3 also supports PyPy and GraalPy, as well as older versions of CPython (currently back to 3.7). Rust for CPython will presumably not need to support anything other than current CPython.\u003c/p\u003e\n\u003cp\u003eAt the same time, CPython will need safe higher-level Rust APIs to get the benefit of Rust. PyO3 has a lot of prior art on the high-level APIs (and hard lessons learned); I think the right approach here will be similar to what \u003ccode\u003eattrs\u003c/code\u003e did for \u003ccode\u003edataclasses\u003c/code\u003e - the Rust APIs implemented by CPython can pick the bits that work best.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhat about platforms that don’t support Rust?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/Rust-GCC/gccrs\" rel=\"noopener nofollow ugc\"\u003egccrs\u003c/a\u003e is an alternative implementation of Rust for GCC backend, which is not yet at feature parity but an important target for Rust for Linux. If CPython was using Rust, I would hope that efforts for non-llvm platforms may be helped by this.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhat about Argument Clinic?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003ePyO3’s proc macros function a lot like argument clinic - we could potentially reuse parts of their design (and/or implementation); PyO3 might eventually even depend upon any implementation owned by CPython. I would recommend this choice as the more idiomatic way to do codegen in Rust.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eShould the CPython Rust crates be supported for 3rd-party use? Should there be a Rust API?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003caside class=\"quote no-group\" data-username=\"ngoldbaum\" data-post=\"13\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/ngoldbaum/48/12276_2.png\" class=\"avatar\"\u003e ngoldbaum:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAs a PyO3 maintainer IMO it’d be really nice if we could get rid of the need for the \u003ccode\u003epyo3-ffi\u003c/code\u003e crate and instead rely on bindgen bindings maintained by upstream.\u003c/p\u003e\n\u003cp\u003eMost of the overhead of supporting new Python versions is updating the FFI bindings.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI agree with both of these points; we may want some experience before deciding how CPython would want to commit to supporting these crates. At the same time, having a way to consume in-dev CPython versions immediately in PyO3 would really help with iteration speed for the ecosystem.\u003c/p\u003e\n\u003cp\u003ePyO3 has precedent of “experimental” features for things not yet stable, one middle ground might be to allow PyO3 to have an experimental feature which switches out \u003ccode\u003epyo3-ffi\u003c/code\u003e’s curated FFI bindings for the ones generated by CPython.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"MegaIng\" data-post=\"2\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/megaing/48/16162_2.png\" class=\"avatar\"\u003e MegaIng:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIsn’t the experience in the linux kernel with adding rust support as a core part more a cautionary tale? At least it looks that way from the outside.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThere are a couple of takeaways from Rust for Linux that I think are most interesting here:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSocial questions - inevitably not everyone will want to be using \\\u0026lt;insert language X here\\\u0026gt;  instead of \\\u0026lt;insert language Y here\\\u0026gt;. Some current maintainers might churn from not wanting Rust, and other new maintainers may be attracted by the appeal of using it. The Python community places a lot of emphasis on inclusivity and I’d hope we would welcome everyone’s opinions as valid even if eventually a decision driven by the majority must be taken. (Not implying here whether the majority is for or against exploring Rust support; that is the purpose of having these discussions, after all.)\u003c/li\u003e\n\u003cli\u003eTechnical opening - Rust for Linux has unsurprisingly become a major strategic focus for the language. I would hope that Rust for CPython would have justification for carrying similar weight in the focus of the Rust project should there be friction where Rust (and cargo etc) do not currently meet CPython’s needs.\u003c/li\u003e\n\u003c/ul\u003e","post_number":21,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T20:46:29.160Z","reply_count":2,"reply_to_post_number":null,"quote_count":4,"incoming_link_count":22,"reads":366,"readers_count":365,"score":446.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"David Hewitt","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/Rust-GCC/gccrs","internal":false,"reflection":false,"title":"GitHub - Rust-GCC/gccrs: GCC Front-End for Rust","clicks":7}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":15}],"moderator":false,"admin":false,"staff":false,"user_id":3448,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/21","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277505,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-17T20:50:49.739Z","cooked":"\u003cp\u003e\u003cstrong\u003eNote: I’m working on replying to everyone but wanted to get some initial replies out, I appreciate patience with this.\u003c/strong\u003e\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"MegaIng\" data-post=\"2\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/megaing/48/16162_2.png\" class=\"avatar\"\u003e Cornelius Krupp:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIsn’t the experience in the linux kernel with adding rust support as a core part more a cautionary tale? At least it looks that way from the outside. There is constant friction between the two different “types of programmers”, causing a lot of quite public disagreement.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI agree with \u003ca class=\"mention\" href=\"/u/jacopoabramo\"\u003e@jacopoabramo\u003c/a\u003e on this, I like to think that the Python community will be better about being productive, amicable, and respectful when discussing these issues. So I think the experience will be altogether different.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jacopoabramo\" data-post=\"4\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jacopoabramo/48/23840_2.png\" class=\"avatar\"\u003e Jacopo Abramo:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOut of curiosity, what would this mean for both \u003ccode\u003ePyO3\u003c/code\u003e and \u003ca href=\"https://github.com/RustPython/RustPython\"\u003e\u003ccode\u003eRustPython\u003c/code\u003e\u003c/a\u003e? Have you reached out to the mantainers of the latter for feedback on how to approach this possibility? If so, what’s their opinion? It looks to me like this possible PEP might benefit greatly from their experience (I don’t know if you guys are part of their team, I’m just assuming you’re not but I apologize if that’s incorrect).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI reached out to David Hewitt who has now responded in this thread and will contribute to the effort (thank you, David!) . Kirill has reached out to the RustPython team as well!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jacopoabramo\" data-post=\"4\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jacopoabramo/48/23840_2.png\" class=\"avatar\"\u003e Jacopo Abramo:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ewould you expect some challenges in applying PEP 703 efficiently for rust-based extensions?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eOn the contrary, it should be much less effort as safe Rust is thread-safe due to the borrow checker. There will need to be some support added to handle integrating attached thread states, but it should be relatively easy.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jacopoabramo\" data-post=\"4\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jacopoabramo/48/23840_2.png\" class=\"avatar\"\u003e Jacopo Abramo:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSame question applies for the new experimental JIT which should be more stable in future releases.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSorry, I’m not sure if you are asking if Rust extensions will work with the JIT or if Rust can be used to implement it? For the former they should work without issue. For the latter the JIT currently relies on a custom calling convention which is not yet exposed in Rust (but is being discussed to do so last I checked). I don’t suggest moving this code to Rust until it is reasonable to implement in Rust and the necessary calling convention features are available.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jacopoabramo\" data-post=\"4\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jacopoabramo/48/23840_2.png\" class=\"avatar\"\u003e Jacopo Abramo:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eFinally, if I recall rust applications tend to be a bit “bloated” in binary size, although there are some tricks that can be done at compile time to reduce this - what do these tricks imply on performance I have no idea.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis is definitely something to be cognizant of, thank you for bringing it up! There are several strategies which will not affect performance, such as abort on panic, which we can explore. We will probably want to abort on panic anyway since unwinding over FFI layers is UB.\u003c/p\u003e\n\u003caside class=\"quote group-committers quote-modified\" data-username=\"steve.dower\" data-post=\"5\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAs a general direction, I’d rather see “optional extension modules” living outside the main repo and brought in later in the build/release process. Presumably such modules have no tight core dependency, or they wouldn’t be able to be optional, and so they should be able to build on pre-release runtimes and work fine with released runtimes (as we expect of 3rd party developers).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI think this is an interesting proposal, but orthogonal to the current one. We hope Rust will eventually become required to build CPython so it can be used to improve the CPython core. I would suggest splitting this off into it’s own thread to discuss it further.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"steve.dower\" data-post=\"5\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIn short, adding new ways to add new, non-essential modules to the core is counter to the approach we’ve been taking over the last few years. So I’m -1 on adding one.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAgain I think it is important to highlight that this proposal is more than just \u003ccode\u003e_base64\u003c/code\u003e, and more than just optional modules. We’d eventually like to make Rust a hard dependency so it can be used to improve the implementation of the Python runtime as well.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"alex_Gaynor\" data-post=\"6\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/alex_gaynor/48/17_2.png\" class=\"avatar\"\u003e Alex Gaynor:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI’m happy to answer any questions folks have about those experiences and lessons learned.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThanks Alex! We definitely want to approach this carefully and with thought, your expertise will be invaluable!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jamestwebber\" data-post=\"7\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jamestwebber/48/12799_2.png\" class=\"avatar\"\u003e James Webber:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAs a Rust fan I think this is super cool! I do wonder if this is too much to figure out in one PEP, when parts of it seems pretty easily separable. I can see how the overall vision fits together, but it’s a lot.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI think we necessarily need to make a plan for long term adoption so we can figure out when Rust can be a required dependency and ensure we plan ahead in advance well enough for it. I don’t want to get anyone caught by surprise when suddenly they need Rust to build CPython when they don’t expect it. I will say that the final PEP will probably be what you propose plus a timeline to make Rust a required dependency. Iterating on ergonomic APIs for Rust is definitely something I’d be working on if \u003ccode\u003ecpython-sys\u003c/code\u003e is approved.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"mikeshardmind\" data-post=\"8\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/mikeshardmind/48/14381_2.png\" class=\"avatar\"\u003e Michael H:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI would feel more comfortable with this if it was dependent on custom json targets stabilizing in Rust. Right now, targetting platforms that Rust itself doesn’t support still requires nightly, and python is used to bootstrap a lot of things in a lot of places.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003ePerhaps then we can ensure that releases build with an older nightly Rust to enable such bootstrapping? I expect these cases to be relatively uncommon - Rust supports a large number of platforms.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"da-woods\" data-post=\"10\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/da-woods/48/7507_2.png\" class=\"avatar\"\u003e Da Woods:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSo from my point of view this PEP doesn’t offer a lot - it’s largely proposing “rewrite some modules in Rust with a view to soften people up to rewrite more in Rust”.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI would restate our goal as “slowly introduce Rust to carefully integrate it and make sure we get things right and give people time to adapt to the significant change.” \u003ccode\u003e_base64\u003c/code\u003e is chosen as an example as it is easier to implement, easier to understand, and would only affect performance, so is entirely optional. I think there are several existing modules that could see clear benefits from being written in Rust, \u003cem\u003eeventually\u003c/em\u003e. Especially for those that interact with untrusted input such as json, it would be a significant improvement security-wise if we implemented them in a memory safe language. But I also don’t want to rush in and cause breakage. These kinds of changes should be done carefully and when well-motivated.\u003c/p\u003e\n\u003caside class=\"quote no-group quote-modified\" data-username=\"da-woods\" data-post=\"10\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/da-woods/48/7507_2.png\" class=\"avatar\"\u003e Da Woods:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRust could use PyPy to bootstrap\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI suspect this isn’t viable for a couple for reasons: PyPy isn’t hugely well maintained right now, and (I believe) PyPy needs a Python interpreter to bootstrap itself so may not solve the problem.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eGood point re PyPy requiring some bootstrap Python itself! I hope that the approach of using an older CPython will be workable.\u003c/p\u003e\n\u003caside class=\"quote group-committers quote-modified\" data-username=\"pitrou\" data-post=\"11\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/pitrou/48/28_2.png\" class=\"avatar\"\u003e Antoine Pitrou:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/emmatyping/cpython/tree/rust-in-cpython\"\u003eA reference implementation\u003c/a\u003e which includes a proof-of-concept \u003ccode\u003e_base64\u003c/code\u003e module which uses Rust to provide a speedup to \u003ccode\u003ebase64\u003c/code\u003e is available.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis example shows that you really want the safe abstractions for this to be useful. Otherwise you’re doing the same kind of tedious, unsafe, error-prone low-level pointer juggling and manual reference cleanup as in C (hello \u003ccode\u003ePy_DecRef\u003c/code\u003e ).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI absolutely agree, safe abstractions over things like argument parsing and module creation make PyO3 a joy to use. I hope we can collaborate with the PyO3 maintainers and provide similarly pleasant abstractions in CPython core. It will certainly be a high priority. I do think even in this simple example there are examples of safe abstractions that provide benefits. Kirill wrote up an abstraction over borrowing a \u003ccode\u003ePy_buffer\u003c/code\u003e that automatically releases the buffer on drop, so that it is impossible to forget to do that and cause a bug: \u003ca href=\"https://github.com/emmatyping/cpython/blob/c9deee600d60509c5da6ef538a9b530f7ba12e05/Modules/_base64/src/lib.rs#L81-L111\" class=\"inline-onebox\"\u003ecpython/Modules/_base64/src/lib.rs at c9deee600d60509c5da6ef538a9b530f7ba12e05 · emmatyping/cpython · GitHub\u003c/a\u003e\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"guido\" data-post=\"12\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/guido/48/21_2.png\" class=\"avatar\"\u003e Guido van Rossum:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSeriously, I think this is a great development. We all know that a full rewrite in Rust won’t work, but starting to introduce Rust initially for less-essential components, and then gradually letting it take over more essential components sounds like a good plan.\u003c/p\u003e\n\u003cp\u003eI trust Emma and others to do a great job of guiding the discussion over the exact shape that the plan and the implementation should take.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThank you Guido for your trust and words of support, it really means a lot!\u003c/p\u003e","post_number":22,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T20:50:49.739Z","reply_count":2,"reply_to_post_number":null,"quote_count":10,"incoming_link_count":28,"reads":343,"readers_count":342,"score":452.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/emmatyping/cpython/blob/c9deee600d60509c5da6ef538a9b530f7ba12e05/Modules/_base64/src/lib.rs#L81-L111","internal":false,"reflection":false,"title":"cpython/Modules/_base64/src/lib.rs at c9deee600d60509c5da6ef538a9b530f7ba12e05 · emmatyping/cpython · GitHub","clicks":4}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":16}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/22","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277506,"name":"Jubilee","username":"workingjubilee","avatar_template":"/user_avatar/discuss.python.org/workingjubilee/{size}/32539_2.png","created_at":"2025-11-17T20:51:47.620Z","cooked":"\u003cp\u003eSpeaking in a broad way to answer a broad (“depends on many details”) question:\u003c/p\u003e\n\u003cp\u003eIn C, the primary compilation unit is each individual file. In Rust, the primary compilation unit is each entire crate. Rust offers many conveniences over C (e.g. not needing to “forward declare” things in various files) that depend on the fact it can treat crates as individual units. As a result, if you were to, for instance, compare the two languages based on “files compiled” but one is a crate, the results may be surprising.\u003c/p\u003e\n\u003cp\u003eBut with thoughtful (or just arbitrary) splitting of code, Rust does allow you to keep iterative builds relatively fast, especially if all the code you \u003cem\u003ehaven’t\u003c/em\u003e changed is in crates upstream of the one you changed. Paying attention to this is especially important for the \u003ccode\u003e-sys\u003c/code\u003e crates containing bindings, as bindgen essentially involves running a compiler to generate code and thus is not cheap.\u003c/p\u003e\n\u003cp\u003eIt’s worth noting that C also enjoys faster compilation with careful management of inclusions and include-guards on repeatedly-included headers.\u003c/p\u003e\n\u003cp\u003eThere are \u003cem\u003emany\u003c/em\u003e caveats, exceptions, and and-alsos one can attach to what I just said when things get more specific. Some Rust idioms will \u003cem\u003enot\u003c/em\u003e make it faster to build something, due to e.g. use of generics or \u003ccode\u003e#[inline]\u003c/code\u003e that requires multiple downstream instantiations in multiple downstream crates.\u003c/p\u003e\n\u003cp\u003eAnd of course there’s ongoing work here, such as \u003ca href=\"https://rust-lang.github.io/rust-project-goals/2025h2/relink-dont-rebuild.html#summary\" rel=\"noopener nofollow ugc\"\u003erelink, don’t rebuild\u003c/a\u003e, where some of us are attempting to make it so changes to upstream crates only cause rebuilds of downstream crates if the upstream crate actually changed its public API.\u003c/p\u003e","post_number":23,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T20:51:47.620Z","reply_count":0,"reply_to_post_number":16,"quote_count":0,"incoming_link_count":8,"reads":300,"readers_count":299,"score":159.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jubilee","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://rust-lang.github.io/rust-project-goals/2025h2/relink-dont-rebuild.html#summary","internal":false,"reflection":false,"title":"Relink don't Rebuild - Rust Project Goals","clicks":19}],"read":true,"user_title":null,"reply_to_user":{"id":195,"username":"pganssle","name":"Paul Ganssle","avatar_template":"/user_avatar/discuss.python.org/pganssle/{size}/245_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":79987,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/23","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277507,"name":"James Gerity","username":"SnoopJ","avatar_template":"/user_avatar/discuss.python.org/snoopj/{size}/7944_2.png","created_at":"2025-11-17T20:54:20.059Z","cooked":"\u003cp\u003eThank you for addressing unsupported platforms where CPython can build/run today that would become untenable under this proposal, it’s an important thing to talk about up-front.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCPython has historically encountered numerous bugs and crashes due to invalid memory accesses.We believe that introducing Rust into CPython would reduce the number of such issues by disallowing invalid memory accesses by construction.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI think it’s worth being more explicit about this. I understand the general point, but having references to some recent issues that would have been avoided would strengthen the value proposition of the proposal.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eObviously any extension modules written in Rust will require knowledge of Rust to contribute to.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eSince this proposal is looking towards using Rust in the core as well, I think it may be harmful to frame this point in terms of extension modules specifically. \u003cem\u003e”What will we do about doubling the number of programming languages in the core”\u003c/em\u003e feels important to address up-front.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eSome other questions that occur to me:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIt seems to me that an eventual PEP should address \u003cem\u003e”Why not put that development effort towards \u003ccode\u003eRustPython\u003c/code\u003e?”\u003c/em\u003e in the \u003ccode\u003eRejected Ideas\u003c/code\u003e section\u003c/li\u003e\n\u003cli\u003eDoes the interaction between PEP 11 support tiers and Rust support tiers merit adjustment of \u003ccode\u003eCPython\u003c/code\u003e’s policy? Having 2 additional dimensions to keep track of feels complicated.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThe idea makes me nervous, but I am well outside the core team, so it’s possible I am not familiar enough with problems this would resolve. I do see the merit in general, especially for the part of this proposal targeting extension modules specifically. Doubling the tooling required to build \u003ccode\u003eCPython\u003c/code\u003e seems like a bad trade from where I’m standing, but maybe I am underappreciating the value-add.\u003c/p\u003e\n\u003cp\u003eIt feels a little big for a single PEP, unless the ideas for integration in the core are “over the horizon” and the eventual PEP would be \u003cem\u003ejust\u003c/em\u003e about allowing this for extension modules.\u003c/p\u003e","post_number":24,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T20:56:31.322Z","reply_count":2,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":3,"reads":297,"readers_count":296,"score":219.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Gerity","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":9}],"moderator":false,"admin":false,"staff":false,"user_id":7795,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/24","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277508,"name":"Steve Dower","username":"steve.dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","created_at":"2025-11-17T20:55:04.476Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"22\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWe’d eventually like to make Rust a hard dependency so it can be used to improve the implementation of the Python runtime as well.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThen you force me to factor in my experience in Rust, my experience in mixed-language codebases, and my experience in teams, and come down as a firm -1 on the entire proposal.\u003c/p\u003e","post_number":25,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T20:55:04.476Z","reply_count":2,"reply_to_post_number":22,"quote_count":1,"incoming_link_count":5,"reads":293,"readers_count":292,"score":333.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steve Dower","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":16}],"moderator":false,"admin":false,"staff":false,"user_id":54,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/25","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277509,"name":"David Hewitt","username":"davidhewitt","avatar_template":"/user_avatar/discuss.python.org/davidhewitt/{size}/3502_2.png","created_at":"2025-11-17T20:56:39.913Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"22\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOn the contrary, it should be much less effort as safe Rust is thread-safe due to the borrow checker. There will need to be some support added to handle integrating attached thread states, but it should be relatively easy.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI completely agree with this; my experience of updating Rust code based upon PyO3 to support free-threaded Python has been relatively painless.\u003c/p\u003e\n\u003cp\u003eI would even go further and suggest that Rust for CPython may be able to assist with the implementation of free-threaded Python; if there are current stlib extension modules needing to be updated for PEP 703 which lack maintainers, migrating them to Rust may be a way to bring on new maintainers and get them thread-safe at the same time.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"22\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWe will probably want to abort on panic anyway since unwinding over FFI layers is UB.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eFor what it’s worth, PyO3 has a mechanism for carrying panics as Python exceptions through stack frames, but I would agree that for sake of binary size and simplicity, an abort would be good enough (the Rust panic hook could be configured to call into Python’s existing fatal exit machinery).\u003c/p\u003e","post_number":26,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T20:56:39.913Z","reply_count":1,"reply_to_post_number":22,"quote_count":1,"incoming_link_count":3,"reads":294,"readers_count":293,"score":108.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"David Hewitt","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":3448,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/26","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277512,"name":"Steven Sun","username":"sunmy2019","avatar_template":"/user_avatar/discuss.python.org/sunmy2019/{size}/11935_2.png","created_at":"2025-11-17T21:07:59.873Z","cooked":"\u003cp\u003eIn my previous job, I developed and maintained a large codebase mixing C++, Python, and Rust. I am very familiar with these 3 languages.\u003c/p\u003e\n\u003cp\u003eYou can notify me if new Rust code or docs requires review. I support if we can start with some extensions with C/Python fallback.\u003c/p\u003e\n\u003cp\u003eBased on my experience, I want to highlight that certain common practice do not align with Rust. For example, \u003ccode\u003efork()\u003c/code\u003e is not usable for many Rust libraries (states may be incorrect after fork). \u003ca href=\"https://stackoverflow.com/questions/60686516/why-cant-i-communicate-with-a-forked-child-process-using-tokio-unixstream\" rel=\"noopener nofollow ugc\"\u003ehttps://stackoverflow.com/questions/60686516/why-cant-i-communicate-with-a-forked-child-process-using-tokio-unixstream\u003c/a\u003e\u003c/p\u003e","post_number":27,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T21:13:17.521Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":7,"reads":276,"readers_count":275,"score":214.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steven Sun","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://stackoverflow.com/questions/60686516/why-cant-i-communicate-with-a-forked-child-process-using-tokio-unixstream","internal":false,"reflection":false,"clicks":21}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":8}],"moderator":false,"admin":false,"staff":false,"user_id":11429,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/27","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277513,"name":"Dmitry","username":"monk-time","avatar_template":"/user_avatar/discuss.python.org/monk-time/{size}/516_2.png","created_at":"2025-11-17T21:17:46.637Z","cooked":"\u003cp\u003eIt’s been such an exciting time for Python lately, with this proposal, lazy imports and frozendicts!\u003c/p\u003e\n\u003cp\u003eAnother benefit that you might want to mention in the PEP is how IIUC this would open the door for the possibility of shipping with Python modern Rust-based tooling for dep management, formatting and linting, with all the performance, correctness and community enthusiasm that comes with it.\u003c/p\u003e","post_number":28,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T21:18:23.144Z","reply_count":3,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":5,"reads":277,"readers_count":276,"score":140.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Dmitry","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":310,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/28","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277516,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-17T21:38:45.101Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Rosuav\" data-post=\"15\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/rosuav/48/3429_2.png\" class=\"avatar\"\u003e Chris Angelico:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMore seriously though: Rust has been a focus for a lot of controversy and risk, with massive open questions such as the impact of a potential \u003ca href=\"https://aeb.win.tue.nl/linux/hh/thompson/trust.html\"\u003eKen Thompson style compiler hack\u003c/a\u003e. Will CPython lose trust by becoming dependent on a single specific compiler that might be subject to such a hack?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’m not familiar with the risks you speak of. As David Hewitt points out, there is a work in progress implementation using gcc, so while there is currently one compiler, that will not remain the case.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"pganssle\" data-post=\"16\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/pganssle/48/245_2.png\" class=\"avatar\"\u003e Paul Ganssle:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI guess the question is a dual one: can we write Rust in a way that it will \u003cem\u003enot\u003c/em\u003e cause build times to explode and if we cannot, is the plan to keep the scope of Rust in CPython to a level where building is still very accessible?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI mostly will defer to \u003ca class=\"mention\" href=\"/u/workingjubilee\"\u003e@workingjubilee\u003c/a\u003e’s excellent answer and their expertise. I will add however that build times are dear to my heart, so I think good devguide documentation on setting up a dev environment that is configured for fast incremental builds will go a long way in helping.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"cosmicexplorer\" data-post=\"19\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/cosmicexplorer/48/31291_2.png\" class=\"avatar\"\u003e danny mcClanahan:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eBut I am personally convinced that if CPython were to integrate rust (possibly even just at phase 1, with only external module support), we (CPython and pypa contributors, of which I am only the latter) would necessarily have to figure out a more structured way to thread ABI info through cargo\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis is a really interesting perspective, thanks Danny! I will say getting cargo to fit into CPython’s current build system was a little tricky. That being said I think the ABI question may be less important until Rust code is exposed to users, which will be after we’ve had a lot of experience working with cargo ourselves and can be planned independently of the initial integration, in collaboration with PyPA.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"davidhewitt\" data-post=\"21\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/davidhewitt/48/3502_2.png\" class=\"avatar\"\u003e David Hewitt:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eVery excited to see this initiative and as a proponent of Python, Rust, and the two together, eager to be involved.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eVery excited to have you join us! We greatly value your expertise on Rust and Python interop.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"davidhewitt\" data-post=\"21\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/davidhewitt/48/3502_2.png\" class=\"avatar\"\u003e David Hewitt:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAt the same time, CPython will need safe higher-level Rust APIs to get the benefit of Rust. PyO3 has a lot of prior art on the high-level APIs (and hard lessons learned); I think the right approach here will be similar to what \u003ccode\u003eattrs\u003c/code\u003e did for \u003ccode\u003edataclasses\u003c/code\u003e - the Rust APIs implemented by CPython can pick the bits that work best.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis is right along the lines of what I was thinking, so glad we are on the same page \u003cimg src=\"https://emoji.discourse-cdn.com/apple/grin.png?v=15\" title=\":grin:\" class=\"emoji\" alt=\":grin:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003caside class=\"quote no-group quote-modified\" data-username=\"davidhewitt\" data-post=\"21\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/davidhewitt/48/3502_2.png\" class=\"avatar\"\u003e David Hewitt:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhat about platforms that don’t support Rust?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/Rust-GCC/gccrs\"\u003egccrs\u003c/a\u003e is an alternative implementation of Rust for GCC backend, which is not yet at feature parity but an important target for Rust for Linux. If CPython was using Rust, I would hope that efforts for non-llvm platforms may be helped by this.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eExcellent point! We should make sure to note this in the PEP.\u003c/p\u003e\n\u003caside class=\"quote no-group quote-modified\" data-username=\"davidhewitt\" data-post=\"21\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/davidhewitt/48/3502_2.png\" class=\"avatar\"\u003e David Hewitt:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhat about Argument Clinic?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003ePyO3’s proc macros function a lot like argument clinic - we could potentially reuse parts of their design (and/or implementation); PyO3 might eventually even depend upon any implementation owned by CPython. I would recommend this choice as the more idiomatic way to do codegen in Rust.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAbsolutely, I think this would be a great path forward. I would love if the code could be shared across PyO3 and CPython!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"davidhewitt\" data-post=\"21\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/davidhewitt/48/3502_2.png\" class=\"avatar\"\u003e David Hewitt:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eTechnical opening - Rust for Linux has unsurprisingly become a major strategic focus for the language. I would hope that Rust for CPython would have justification for carrying similar weight in the focus of the Rust project should there be friction where Rust (and cargo etc) do not currently meet CPython’s needs.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYes, there will likely be a few things upstream that may need some work but probably (hopefully!) less than Linux!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"SnoopJ\" data-post=\"24\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/snoopj/48/7944_2.png\" class=\"avatar\"\u003e James Gerity:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI think it’s worth being more explicit about this. I understand the general point, but having references to some recent issues that would have been avoided would strengthen the value proposition of the proposal.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIf you look at issues labeled \u003ccode\u003etype-crash\u003c/code\u003e you will see a number of issues, such as \u003ca href=\"https://github.com/python/cpython/issues/141012\" class=\"inline-onebox\"\u003eUse-after-free due to race between SSLContext.set_alpn_protocols and opening a connection · Issue #141012 · python/cpython · GitHub\u003c/a\u003e or \u003ca href=\"https://github.com/python/cpython/issues/140802\" class=\"inline-onebox\"\u003eheap-buffer-overflow in pycore_interpframe.h _PyFrame_Initialize · Issue #140802 · python/cpython · GitHub\u003c/a\u003e or \u003ca href=\"https://github.com/python/cpython/issues/140750\" class=\"inline-onebox\"\u003eJSON: heap-buffer-overflow in encoder caused by indentation caching · Issue #140750 · python/cpython · GitHub\u003c/a\u003e. There are many more.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"SnoopJ\" data-post=\"24\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/snoopj/48/7944_2.png\" class=\"avatar\"\u003e James Gerity:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cem\u003e”What will we do about doubling the number of programming languages in the core”\u003c/em\u003e feels important to address up-front.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAbsolutely, I hope that thorough devguide coverage and good tooling will go a long way in making this experience pleasant. I also think having a team of experts will be useful.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"SnoopJ\" data-post=\"24\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/snoopj/48/7944_2.png\" class=\"avatar\"\u003e James Gerity:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt seems to me that an eventual PEP should address \u003cem\u003e”Why not put that development effort towards \u003ccode\u003eRustPython\u003c/code\u003e?”\u003c/em\u003e in the \u003ccode\u003eRejected Ideas\u003c/code\u003e section\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThanks, will add this to the list of rejected ideas to add. I also want to cover other language choices, and a few other things.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"SnoopJ\" data-post=\"24\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/snoopj/48/7944_2.png\" class=\"avatar\"\u003e James Gerity:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eDoes the interaction between PEP 11 support tiers and Rust support tiers merit adjustment of \u003ccode\u003eCPython\u003c/code\u003e’s policy? Having 2 additional dimensions to keep track of feels complicated.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eHm, what adjustment did you have in mind?\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"steve.dower\" data-post=\"25\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThen you force me to factor in my experience in Rust, my experience in mixed-language codebases, and my experience in teams, and come down as a firm -1 on the entire proposal.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’m sorry to hear that Steve. I’m happy to chat further about your experiences at some point, there are definitely wrong ways of integrating new languages into existing code bases.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"davidhewitt\" data-post=\"26\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/davidhewitt/48/3502_2.png\" class=\"avatar\"\u003e David Hewitt:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eFor what it’s worth, PyO3 has a mechanism for carrying panics as Python exceptions through stack frames, but I would agree that for sake of binary size and simplicity, an abort would be good enough (the Rust panic hook could be configured to call into Python’s existing fatal exit machinery).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThat’s good to know! I think we will have to evaluate this (as with many things) and decide based on what our experience finds out.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"sunmy2019\" data-post=\"27\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/sunmy2019/48/11935_2.png\" class=\"avatar\"\u003e Steven Sun:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eYou can notify me if new Rust code or docs requires review. I support if we can start with some extensions with C/Python fallback.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThanks Steven! It’s been great to see a number of people excited about contributing to CPython in Rust if it were added.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"sunmy2019\" data-post=\"27\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/sunmy2019/48/11935_2.png\" class=\"avatar\"\u003e Steven Sun:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eBased on my experience, I want to highlight that certain common practice do not align with Rust. For example, \u003ccode\u003efork()\u003c/code\u003e is not usable for many Rust libraries (states may be incorrect after fork). \u003ca href=\"https://stackoverflow.com/questions/60686516/why-cant-i-communicate-with-a-forked-child-process-using-tokio-unixstream\"\u003ehttps://stackoverflow.com/questions/60686516/why-cant-i-communicate-with-a-forked-child-process-using-tokio-unixstream\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003ccode\u003efork()\u003c/code\u003e + threads is sadness pretty universally, it has been an issue for CPython before, so it’s an issue I’m well aware of. Thanks for bringing it up!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"monk-time\" data-post=\"28\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/monk-time/48/516_2.png\" class=\"avatar\"\u003e Dmitry:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAnother benefit that you might want to mention in the PEP is how IIUC this would open the door for the possibility of shipping with Python modern Rust-based tooling for dep management, formatting and linting, with all the performance, correctness and community enthusiasm that comes with it.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003cs\u003eThat’s a good point, I’ll make sure to note that in the PEP.\u003c/s\u003e I misunderstood this post I think, see my comment below.\u003c/p\u003e","post_number":29,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T03:29:09.704Z","reply_count":2,"reply_to_post_number":null,"quote_count":10,"incoming_link_count":17,"reads":298,"readers_count":297,"score":229.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/python/cpython/issues/140802","internal":false,"reflection":false,"title":"heap-buffer-overflow in pycore_interpframe.h _PyFrame_Initialize · Issue #140802 · python/cpython · GitHub","clicks":1},{"url":"https://github.com/python/cpython/issues/141012","internal":false,"reflection":false,"title":"Use-after-free due to race between SSLContext.set_alpn_protocols and opening a connection · Issue #141012 · python/cpython · GitHub","clicks":1},{"url":"https://github.com/python/cpython/issues/140750","internal":false,"reflection":false,"title":"JSON: heap-buffer-overflow in encoder caused by indentation caching · Issue #140750 · python/cpython · GitHub","clicks":0}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/29","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277517,"name":"James Gerity","username":"SnoopJ","avatar_template":"/user_avatar/discuss.python.org/snoopj/{size}/7944_2.png","created_at":"2025-11-17T21:41:18.108Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"29\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eHm, what adjustment did you have in mind?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eNothing in particular. PEP 11’s requirements for each tier’s support are broad enough (language-agnostic enough) that it’s very possible that no changes are required, but I did raise my eyebrows at the intersection with Rust’s own support tiers.\u003c/p\u003e","post_number":30,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T21:41:18.108Z","reply_count":1,"reply_to_post_number":29,"quote_count":1,"incoming_link_count":3,"reads":251,"readers_count":250,"score":84.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Gerity","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":7795,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/30","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277519,"name":"Chris Angelico","username":"Rosuav","avatar_template":"/user_avatar/discuss.python.org/rosuav/{size}/3429_2.png","created_at":"2025-11-17T21:49:50.295Z","cooked":"\u003caside class=\"quote group-committers quote-modified\" data-username=\"emmatyping\" data-post=\"29\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote no-group\" data-username=\"Rosuav\" data-post=\"15\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/rosuav/48/3429_2.png\" class=\"avatar\"\u003e Rosuav:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMore seriously though: Rust has been a focus for a lot of controversy and risk, with massive open questions such as the impact of a potential \u003ca href=\"https://aeb.win.tue.nl/linux/hh/thompson/trust.html\"\u003eKen Thompson style compiler hack\u003c/a\u003e. Will CPython lose trust by becoming dependent on a single specific compiler that might be subject to such a hack?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’m not familiar with the risks you speak of. As David Hewitt points out, there is a work in progress implementation using gcc, so while there is currently one compiler, that will not remain the case.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThe risk, in short, is that rustc could easily include all kinds of code that isn’t obvious to an outside auditor. Ken Thompson demonstrated this using a hack that created a login back door; the same thing could infect a more modern system by secretly downgrading TLS in some way, making it possible for a third party to snoop supposedly-encrypted connections.\u003c/p\u003e\n\u003cp\u003ePerhaps in the future this won’t be as much of a consideration, but that would be then, and this is now. Right now, how can we trust rust? How can we know that a Ken Thompson-style hack hasn’t \u003cem\u003ealready\u003c/em\u003e been done? How do we ensure that one won’t happen in the future? These are not merely academic questions. Python is a well-trusted language used extensively across the internet; if someone with a strong agenda decided to target it, it would be an absolute catastrophe, not least because of how insidious it would be.\u003c/p\u003e","post_number":31,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T21:49:50.295Z","reply_count":2,"reply_to_post_number":29,"quote_count":2,"incoming_link_count":2,"reads":260,"readers_count":259,"score":161.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Chris Angelico","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":3377,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/31","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277520,"name":"Kirill Podoprigora","username":"Eclips4","avatar_template":"/user_avatar/discuss.python.org/eclips4/{size}/32292_2.png","created_at":"2025-11-17T21:52:03.542Z","cooked":"\u003cp\u003e\u003ca class=\"mention\" href=\"/u/davidhewitt\"\u003e@davidhewitt\u003c/a\u003e Hi David, and thank you very much for maintaining pyo3!\u003c/p\u003e\n\u003cp\u003eI have a question that we should probably address in the PEP: Can we integrate \u003ca href=\"https://github.com/rust-lang/miri\"\u003eMIRI\u003c/a\u003e into our workflow? Have you tried using it in pyo3, and what were the results?\u003cbr\u003e\nTL;DR: MIRI is an undefined-behavior detection tool for Rust, so I’m guessing it could be helpful for us \u003cimg src=\"https://emoji.discourse-cdn.com/apple/slightly_smiling_face.png?v=15\" title=\":slightly_smiling_face:\" class=\"emoji\" alt=\":slightly_smiling_face:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e","post_number":32,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T21:52:03.542Z","reply_count":1,"reply_to_post_number":21,"quote_count":0,"incoming_link_count":1,"reads":259,"readers_count":258,"score":90.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Kirill Podoprigora","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/rust-lang/miri","internal":false,"reflection":false,"title":"GitHub - rust-lang/miri: An interpreter for Rust's mid-level intermediate representation","clicks":7}],"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":3448,"username":"davidhewitt","name":"David Hewitt","avatar_template":"/user_avatar/discuss.python.org/davidhewitt/{size}/3502_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":8236,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/32","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277525,"name":"Paul Moore","username":"pf_moore","avatar_template":"/user_avatar/discuss.python.org/pf_moore/{size}/35_2.png","created_at":"2025-11-17T22:00:39.369Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Rosuav\" data-post=\"31\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/rosuav/48/3429_2.png\" class=\"avatar\"\u003e Chris Angelico:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRight now, how can we trust rust? How can we know that a Ken Thompson-style hack hasn’t \u003cem\u003ealready\u003c/em\u003e been done? How do we ensure that one won’t happen in the future? These are not merely academic questions.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIt seems to me that adoption of Rust for various other core system components offers some level of assurance here. While there are still risks, it seems likely that they would be discovered relatively quickly as Rust adoption increases. Particular cases I’m thinking of include:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRust in the Linux kernel\u003c/li\u003e\n\u003cli\u003eThe Rust reimplementation of coreutils being adopted for Ubuntu\u003c/li\u003e\n\u003cli\u003eMicrosoft including Rust in the Windows kernel\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eWhile the risk involved in a single compiler implementation remains, the chance of \u003cem\u003edetecting\u003c/em\u003e any consequent compromise seems like it’s going to rapidly decrease as projects like the above become more widespread.\u003c/p\u003e","post_number":33,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T22:00:39.369Z","reply_count":1,"reply_to_post_number":31,"quote_count":1,"incoming_link_count":2,"reads":263,"readers_count":262,"score":156.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Paul Moore","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":35,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/33","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277527,"name":"Chris Angelico","username":"Rosuav","avatar_template":"/user_avatar/discuss.python.org/rosuav/{size}/3429_2.png","created_at":"2025-11-17T22:05:19.866Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"pf_moore\" data-post=\"33\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/pf_moore/48/35_2.png\" class=\"avatar\"\u003e Paul Moore:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIt seems to me that adoption of Rust for various other core system components offers some level of assurance here. While there are still risks, it seems likely that they would be discovered relatively quickly as Rust adoption increases.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThat means that the potential attack surfaces are many. It doesn’t make the decision right for any other project. To be quite honest, I have these exact same concerns regarding the Rust rewrites elsewhere; but (for example) a Rust-based sudo would require that someone first gain shell access as a non-privileged user, and THEN be able to wield an exploit embedded in sudo. With something that is key to many web sites and other internet-connected services, the attack potential is far more direct.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"pf_moore\" data-post=\"33\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/pf_moore/48/35_2.png\" class=\"avatar\"\u003e Paul Moore:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhile the risk involved in a single compiler implementation remains, the chance of \u003cem\u003edetecting\u003c/em\u003e any consequent compromise seems like it’s going to rapidly decrease as projects like the above become more widespread.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAnd that would be a strong protection, if the only type of attack were one that hits everything all at once. Unfortunately, as Ken Thompson’s hack proved, this sort of attack can be extremely narrowly targeted. And Python is a juicy target.\u003c/p\u003e","post_number":34,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T22:05:19.866Z","reply_count":1,"reply_to_post_number":33,"quote_count":1,"incoming_link_count":6,"reads":261,"readers_count":260,"score":161.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Chris Angelico","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":3377,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/34","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277528,"name":"James Webber","username":"jamestwebber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","created_at":"2025-11-17T22:08:01.407Z","cooked":"\u003cp\u003eIs any language really safe from this? Surely gcc \u003cem\u003ealone\u003c/em\u003e is a hugely valuable target for such an attack–how do we know it hasn’t happened? Heck, how do we know it hasn’t happened \u003cem\u003ein CPython\u003c/em\u003e?\u003c/p\u003e\n\u003cp\u003eIt seems like this is a separate security discussion that goes far beyond Rust.\u003c/p\u003e","post_number":35,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T22:08:01.407Z","reply_count":1,"reply_to_post_number":34,"quote_count":0,"incoming_link_count":0,"reads":253,"readers_count":252,"score":295.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Webber","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":3377,"username":"Rosuav","name":"Chris Angelico","avatar_template":"/user_avatar/discuss.python.org/rosuav/{size}/3429_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":14}],"moderator":false,"admin":false,"staff":false,"user_id":12267,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/35","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277531,"name":"Steven Sun","username":"sunmy2019","avatar_template":"/user_avatar/discuss.python.org/sunmy2019/{size}/11935_2.png","created_at":"2025-11-17T22:10:45.966Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Rosuav\" data-post=\"31\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/rosuav/48/3429_2.png\" class=\"avatar\"\u003e Rosuav:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe risk, in short, is that rustc could easily include all kinds of code that isn’t obvious to an outside auditor.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI want to add that this risk is real.\u003c/p\u003e\n\u003cp\u003eBesides the code in rust compiler, Rust support procedural macro which executes user-written code during compilation. It requires a lot of work to fully audit.\u003c/p\u003e\n\u003cp\u003eThis happened in Rust community before. One previous event is a well-used library shipping pre-built binary to accelerate procedural macro without notice, causing many worries from users.\u003c/p\u003e\n\u003caside class=\"onebox githubissue\" data-onebox-src=\"https://github.com/serde-rs/serde/issues/2538\"\u003e\n  \u003cheader class=\"source\"\u003e\n\n      \u003ca href=\"https://github.com/serde-rs/serde/issues/2538\" target=\"_blank\" rel=\"noopener nofollow ugc\"\u003egithub.com/serde-rs/serde\u003c/a\u003e\n  \u003c/header\u003e\n\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003cdiv class=\"github-row\"\u003e\n  \u003cdiv class=\"github-icon-container\" title=\"Issue\" data-github-private-repo=\"false\"\u003e\n\t  \u003csvg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 14 16\" aria-hidden=\"true\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"\u003e\u003c/path\u003e\u003c/svg\u003e\n  \u003c/div\u003e\n\n  \u003cdiv class=\"github-info-container\"\u003e\n    \u003ch4\u003e\n      \u003ca href=\"https://github.com/serde-rs/serde/issues/2538\" target=\"_blank\" rel=\"noopener nofollow ugc\"\u003eusing serde_derive without precompiled binary\u003c/a\u003e\n    \u003c/h4\u003e\n\n    \u003cdiv class=\"github-info\"\u003e\n      \u003cdiv class=\"date\"\u003e\n        opened \u003cspan class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2023-07-27\" data-time=\"23:39:45\" data-timezone=\"UTC\"\u003e11:39PM - 27 Jul 23 UTC\u003c/span\u003e\n      \u003c/div\u003e\n\n        \u003cdiv class=\"date\"\u003e\n          closed \u003cspan class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2023-08-17\" data-time=\"15:50:25\" data-timezone=\"UTC\"\u003e03:50PM - 17 Aug 23 UTC\u003c/span\u003e\n        \u003c/div\u003e\n\n      \u003cdiv class=\"user\"\u003e\n        \u003ca href=\"https://github.com/decathorpe\" target=\"_blank\" rel=\"noopener nofollow ugc\"\u003e\n          \u003cimg alt=\"\" src=\"https://us1.discourse-cdn.com/flex002/uploads/python1/original/3X/1/7/1758fcf09b8cd04a5f72238fb974f41fde8b14ac.jpeg\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"9D9D9D\"\u003e\n          decathorpe\n        \u003c/a\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n\n    \u003cdiv class=\"labels\"\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\n  \u003cdiv class=\"github-row\"\u003e\n    \u003cp class=\"github-body-container\"\u003eI'm working on packaging serde for Fedora Linux, and I noticed that recent versi\u003cspan class=\"show-more-container\"\u003e\u003ca href=\"\" rel=\"noopener\" class=\"show-more\"\u003e…\u003c/a\u003e\u003c/span\u003e\u003cspan class=\"excerpt hidden\"\u003eons of serde_derive ship a precompiled binary now. This is problematic for us, since we cannot, under *no* circumstances (with only very few exceptions, for firmware or the like), redistribute precompiled binaries.\n\nRight now the fallback I am trying to apply for the short-term is to patch serde_derive/lib.rs to unconditionally include lib_from_source.rs (we don't really care about compilation speed for our non-interactive builds).\n\nI'm wondering, how is the x86_64-unknown-linux-gnu binary actually produced? The workspace layout in this project looks very differently from when I last looked in here ... Would it be possible for us to re-create the binary ourselves so we can actually ship it? Or would it be possible to adapt the serde_derive crate to fall back to the non-precompiled code path if the binary file is missing?\u003c/span\u003e\u003c/p\u003e\n  \u003c/div\u003e\n\n  \u003c/article\u003e\n\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n\n\u003caside class=\"quote no-group\" data-username=\"Rosuav\" data-post=\"31\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/rosuav/48/3429_2.png\" class=\"avatar\"\u003e Rosuav:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ehow can we trust rust?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eHow about a switch to turn off all rust code?\u003c/p\u003e","post_number":36,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T22:15:21.285Z","reply_count":1,"reply_to_post_number":31,"quote_count":1,"incoming_link_count":3,"reads":261,"readers_count":260,"score":86.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steven Sun","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/serde-rs/serde/issues/2538","internal":false,"reflection":false,"title":"using serde_derive without precompiled binary · Issue #2538 · serde-rs/serde · GitHub","clicks":26}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":11429,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/36","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277532,"name":"Chris Angelico","username":"Rosuav","avatar_template":"/user_avatar/discuss.python.org/rosuav/{size}/3429_2.png","created_at":"2025-11-17T22:11:36.188Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"jamestwebber\" data-post=\"35\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jamestwebber/48/12799_2.png\" class=\"avatar\"\u003e James Webber:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIs any language really safe from this? Surely gcc \u003cem\u003ealone\u003c/em\u003e is a hugely valuable target for such an attack–how do we know it hasn’t happened? Heck, how do we know it hasn’t happened \u003cem\u003ein CPython\u003c/em\u003e?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThe biggest protection is having multiple compilers. Do you want to make sure your gcc hasn’t been infected? Download the source code for gcc, and compile it using clang. This could also be affected, but only if someone has infected BOTH compilers. The more diffferent options there are, the less of a threat this is.\u003c/p\u003e\n\u003cp\u003eThe threat is, by definition, only relevant to compiled languages that compile their own compilers. It’s inherent in the bootstrapping. So this can’t happen in CPython as it currently is, unless there’s some way that Python code is being used to generate future versions of the CPython binary, in a way that’s independent of the source code (eg Argument Clinic can’t be that, because the output is right there for everyone to see).\u003c/p\u003e","post_number":37,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T22:11:36.188Z","reply_count":1,"reply_to_post_number":35,"quote_count":1,"incoming_link_count":1,"reads":264,"readers_count":263,"score":92.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Chris Angelico","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":3377,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/37","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277534,"name":"Steve Dower","username":"steve.dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","created_at":"2025-11-17T22:17:33.902Z","cooked":"\u003cp\u003eI’ll briefly put my security team hat on and say that the security side of this is being way overblown. The risk of a supply-chain attack via the compiler is miniscule compared to the multitude of other options - adding Rust doesn’t make \u003cem\u003ethat\u003c/em\u003e part worse.\u003c/p\u003e\n\u003cp\u003eI’d rather see people discussing things like how Rust provides any protection/benefit at all when we have to interop \u003cem\u003eeverything\u003c/em\u003e with “unsafe” C code at a level \u003cem\u003ebelow\u003c/em\u003e anywhere PyO3 could help (which is only safe because it relies on our public C API, which is the safety barrier with guaranteed semantics that can be mapped into Rust’s semantics).\u003c/p\u003e","post_number":38,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T22:17:33.902Z","reply_count":4,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":269,"readers_count":268,"score":573.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steve Dower","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":32}],"moderator":false,"admin":false,"staff":false,"user_id":54,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/38","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277536,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-17T22:30:00.207Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Rosuav\" data-post=\"37\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/rosuav/48/3429_2.png\" class=\"avatar\"\u003e Chris Angelico:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe biggest protection is having multiple compilers. Do you want to make sure your gcc hasn’t been infected? Download the source code for gcc, and compile it using clang. This could also be affected, but only if someone has infected BOTH compilers. The more diffferent options there are, the less of a threat this is.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eGiven that clang had to be bootstrapped by gcc, I think it is impossible to say that this will work for sure.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"steve.dower\" data-post=\"38\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI’ll briefly put my security team hat on and say that the security side of this is being way overblown. The risk of a supply-chain attack via the compiler is miniscule compared to the multitude of other options - adding Rust doesn’t make \u003cem\u003ethat\u003c/em\u003e part worse.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThanks Steve! I appreciate you piping up on this.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"steve.dower\" data-post=\"38\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI’d rather see people discussing things like how Rust provides any protection/benefit at all when we have to interop \u003cem\u003eeverything\u003c/em\u003e with “unsafe” C code at a level \u003cem\u003ebelow\u003c/em\u003e anywhere PyO3 could help\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI have a couple of thoughts on this, and hope \u003ca class=\"mention\" href=\"/u/davidhewitt\"\u003e@davidhewitt\u003c/a\u003e has more since he has thought about this problem probably a \u003cem\u003elot\u003c/em\u003e more than I have \u003cimg src=\"https://emoji.discourse-cdn.com/apple/grin.png?v=15\" title=\":grin:\" class=\"emoji\" alt=\":grin:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003cp\u003eFirst, we can build safe abstractions over unsafe operations which will reduce the amount of unsafe users need to interact with. Furthermore, I expect to start with, a safe core for extension modules can be implemented then exposed to CPython through unsafe FFI procedures. This is an approach that has seen wide success throughout other projects. One of Rust’s strengths is that it allows you to focus on where unsafety occurs. Finally, if more of the interpreter were to become Rust, these portions would presumably have safe Rust interfaces.\u003c/p\u003e","post_number":39,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T22:30:00.207Z","reply_count":0,"reply_to_post_number":37,"quote_count":2,"incoming_link_count":38,"reads":288,"readers_count":287,"score":366.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/39","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277537,"name":"Guido van Rossum","username":"guido","avatar_template":"/user_avatar/discuss.python.org/guido/{size}/21_2.png","created_at":"2025-11-17T22:31:09.753Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"steve.dower\" data-post=\"25\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e steve.dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThen you force me to factor in my experience in Rust, my experience in mixed-language codebases, and my experience in teams, and come down as a firm -1 on the entire proposal.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSteve, without more details your -1 has no weight. You can’t just \u003ca href=\"https://en.wikipedia.org/wiki/Argument_from_authority?utm_source=chatgpt.com\"\u003eargue from authority\u003c/a\u003e.\u003c/p\u003e","post_number":40,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T22:31:09.753Z","reply_count":1,"reply_to_post_number":25,"quote_count":1,"incoming_link_count":16,"reads":281,"readers_count":280,"score":335.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Guido van Rossum","primary_group_name":"committers","flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://en.wikipedia.org/wiki/Argument_from_authority?utm_source=chatgpt.com","internal":false,"reflection":false,"title":"Argument from authority - Wikipedia","clicks":116}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":12}],"moderator":false,"admin":false,"staff":false,"user_id":10,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/40","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277538,"name":"Aria Desires","username":"Gankra","avatar_template":"/user_avatar/discuss.python.org/gankra/{size}/32546_2.png","created_at":"2025-11-17T22:32:52.963Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"steve.dower\" data-post=\"38\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e steve.dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI’d rather see people discussing things like how Rust provides any protection/benefit at all when we have to interop \u003cem\u003eeverything\u003c/em\u003e with “unsafe” C code at a level \u003cem\u003ebelow\u003c/em\u003e anywhere PyO3 could help (which is only safe because it relies on our public C API, which is the safety barrier with guaranteed semantics that can be mapped into Rust’s semantics).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI highly recommend reading \u003ca href=\"http://security.googleblog.com/2025/11/rust-in-android-move-fast-fix-things.html\" rel=\"noopener nofollow ugc\"\u003ethe article from the Android Security team that the original post linked\u003c/a\u003e. In particular, the article focuses on a “near-miss” where they almost shipped one (1) memory safety vulnerability in Rust:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThis near-miss inevitably raises the question: “If Rust can have memory safety vulnerabilities, then what’s the point?”\u003c/p\u003e\n\u003cp\u003eThe point is that the density is drastically lower. So much lower that it represents a major shift in security posture. Based on our near-miss, we can make a conservative estimate. With roughly 5 million lines of Rust in the Android platform and one potential memory safety vulnerability found (and fixed pre-release), our estimated vulnerability density for Rust is 0.2 vuln per 1 million lines (MLOC)\u003c/p\u003e\n\u003cp\u003eOur historical data for C and C++ shows a density of closer to 1,000 memory safety vulnerabilities per MLOC. Our Rust code is currently tracking at a density orders of magnitude lower: \u003cstrong\u003ea more than 1000x reduction.\u003c/strong\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e…\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe primary security concern regarding Rust generally centers on the approximately 4% of code written within \u003ccode\u003eunsafe{}\u003c/code\u003e blocks. This subset of Rust has fueled significant speculation, misconceptions, and even theories that unsafe Rust might be more buggy than C. Empirical evidence shows this to be quite wrong.\u003c/p\u003e\n\u003cp\u003eOur data indicates that even a more conservative assumption, that a line of unsafe Rust is as likely to have a bug as a line of C or C++, significantly overestimates the risk of unsafe Rust. We don’t know for sure why this is the case, but there are likely several contributing factors:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eunsafe{} doesn’t actually disable all or even most of Rust’s safety checks (a common misconception).\u003c/li\u003e\n\u003cli\u003eThe practice of encapsulation enables local reasoning about safety invariants.\u003c/li\u003e\n\u003cli\u003eThe additional scrutiny that unsafe{} blocks receive.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI totally understand the concern but there’s so many big old C(++) projects that have integrated Rust and “safety of the bindings” is an obvious concern everyone has and it just… doesn’t end up being that big of a deal in practice?\u003c/p\u003e\n\u003cp\u003eIn practical specific terms, it’s often reported that Rust often makes implicit ownership/lifetime constraints in C APIs explicit and easier to work with. The Rust bindings to C functions can include lifetimes that enforce these contracts (and yes a \u003cem\u003elot\u003c/em\u003e of C APIs map onto lifetimes and ownership well).\u003c/p\u003e","post_number":41,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T22:32:52.963Z","reply_count":1,"reply_to_post_number":38,"quote_count":1,"incoming_link_count":4,"reads":280,"readers_count":279,"score":275.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Aria Desires","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"http://security.googleblog.com/2025/11/rust-in-android-move-fast-fix-things.html","internal":false,"reflection":false,"title":"Google Online Security Blog: Rust in Android: move fast and fix things","clicks":7}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":13}],"moderator":false,"admin":false,"staff":false,"user_id":79997,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/41","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277539,"name":"Steve Dower","username":"steve.dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","created_at":"2025-11-17T22:33:10.734Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"guido\" data-post=\"40\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/guido/48/21_2.png\" class=\"avatar\"\u003e Guido van Rossum:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSteve, without more details your -1 has no weight\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’m aware. Happy to chat more with the people interested in driving this forward or evaluating/deciding on it, but there are more than enough opinions here already and I don’t see mine helping drive the discussion forward in any particularly meaningful way (especially given the response to my “keep it contained” concern was “actually, we’re going to make it \u003cem\u003eless\u003c/em\u003e contained”).\u003c/p\u003e","post_number":42,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T22:33:10.734Z","reply_count":0,"reply_to_post_number":40,"quote_count":1,"incoming_link_count":0,"reads":263,"readers_count":262,"score":171.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steve Dower","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":8}],"moderator":false,"admin":false,"staff":false,"user_id":54,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/42","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277540,"name":"William Woodruff","username":"woodruffw","avatar_template":"/user_avatar/discuss.python.org/woodruffw/{size}/7614_2.png","created_at":"2025-11-17T22:34:06.482Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"sunmy2019\" data-post=\"36\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/sunmy2019/48/11935_2.png\" class=\"avatar\"\u003e Steven Sun:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eBesides the code in rust compiler, Rust support procedural macro which executes user-written code during compilation. It requires a lot of work to fully audit.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIt’s worth noting that Rust’s compile-time code execution (via \u003ccode\u003ebuild.rs\u003c/code\u003e) closely mirrors the style and trust model already assumed by Python packaging (via \u003ccode\u003esetup.py\u003c/code\u003e). I’m not extremely familiar with the history of \u003ccode\u003ebuild.rs\u003c/code\u003e, but it wouldn’t especially surprise me if \u003ccode\u003esetup.py\u003c/code\u003e (and \u003ccode\u003eGemfile\u003c/code\u003e, etc.) were used as a reference point.\u003c/p\u003e\n\u003cp\u003e(I also think the risk of compile-time code execution in Rust is narrow compared to what already exists: how often do you read the autoconf that your C and C++ dependencies use to codegen shell scripts at build time? We have empirical evidence in the form of \u003ccode\u003exz-utils\u003c/code\u003e that attackers find that \u003cem\u003every\u003c/em\u003e appealing!)\u003c/p\u003e","post_number":43,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T22:34:06.482Z","reply_count":0,"reply_to_post_number":36,"quote_count":1,"incoming_link_count":4,"reads":266,"readers_count":265,"score":282.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"William Woodruff","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":12}],"moderator":false,"admin":false,"staff":false,"user_id":994,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/43","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277546,"name":"Steven Sun","username":"sunmy2019","avatar_template":"/user_avatar/discuss.python.org/sunmy2019/{size}/11935_2.png","created_at":"2025-11-17T23:03:19.329Z","cooked":"\u003cp\u003eStill a few important questions:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eWho will lead this large-scale refactoring?\u003c/li\u003e\n\u003cli\u003eWho will be responsible for designing the overall code architecture?\u003c/li\u003e\n\u003cli\u003eWho will be making final decisions (for example, how will conflicts with the existing C implementation be resolved)?\u003c/li\u003e\n\u003cli\u003eHow can we ensure a stable core team will be able to contribute continuously to this long-term development effort?\u003c/li\u003e\n\u003cli\u003eIs there a communication plan to ensure that progress, challenges, and design changes are transparently communicated to the entire community?\u003c/li\u003e\n\u003cli\u003eHow are the project’s key milestones planned? At what point in time or under what circumstances should we reassess the feasibility of these milestones or the overall direction of the project?\u003c/li\u003e\n\u003c/ol\u003e","post_number":44,"post_type":1,"posts_count":192,"updated_at":"2025-11-17T23:03:19.329Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":8,"reads":267,"readers_count":266,"score":132.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steven Sun","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":11429,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/44","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277553,"name":"Donghee Na","username":"corona10","avatar_template":"/user_avatar/discuss.python.org/corona10/{size}/9943_2.png","created_at":"2025-11-18T00:01:37.746Z","cooked":"\u003cp\u003eI am basically neutral on adopting Rust, and I think Ruby provides a good reference model. They introduced Rust for \u003ca href=\"https://github.com/ruby/ruby/tree/master/zjit\"\u003etheir JIT implementation\u003c/a\u003e as an optional component, and it is worth studying how they approached. (only using std-lib, except unittest and unittest module are excluded when they release)\u003c/p\u003e\n\u003cp\u003eHowever, I am cautious about the idea of fully rewriting the CPython codebase in Rust. We have a lot of low level and very optimized C code that Rust cannot express safely. A good example is the computed goto dispatch in the interpreter, which would require a large amount of \u003ca href=\"https://pliniker.github.io/post/dispatchers/\"\u003eunsafe code\u003c/a\u003e or inline assembly if we tried to reproduce it in Rust.\u003c/p\u003e\n\u003cp\u003ePlatform support is also still a concern, and that’s why people are waiting for \u003ca href=\"https://github.com/Rust-GCC/gccrs\"\u003egcc-rs\u003c/a\u003e, because once it is shipped, we can cover over where gcc and clang do.\u003c/p\u003e\n\u003cp\u003eMy view is that if we want to move forward, we should begin with an experimental approach. We can start by introducing new, non-essential modules written in Rust and evaluating the results. That feels like a reasonable and safe first step, and it allows us to focus on productivity rather than framing everything around memory safety.\u003c/p\u003e\n\u003cp\u003eI believe the CPython core team already maintains the C codebase as safely as possible, so while language level safety would certainly be beneficial, the current situation is not one where we are struggling or suffering. From what I understand, the Ruby team adopted Rust mainly because implementing their JIT in Rust was more productive than doing it in C. I think that was one of the major factors behind their choice.\u003c/p\u003e","post_number":45,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T00:01:37.746Z","reply_count":3,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":261,"readers_count":260,"score":231.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Donghee Na","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/ruby/ruby/tree/master/zjit","internal":false,"reflection":false,"title":"ruby/zjit at master · ruby/ruby · GitHub","clicks":15},{"url":"https://github.com/Rust-GCC/gccrs","internal":false,"reflection":false,"title":"GitHub - Rust-GCC/gccrs: GCC Front-End for Rust","clicks":11},{"url":"https://pliniker.github.io/post/dispatchers/","internal":false,"reflection":false,"title":"Peter Liniker by pliniker","clicks":9}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":9}],"moderator":false,"admin":false,"staff":false,"user_id":344,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/45","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277554,"name":"Jeong, YunWon","username":"youknowone","avatar_template":"/user_avatar/discuss.python.org/youknowone/{size}/19382_2.png","created_at":"2025-11-18T00:02:42.657Z","cooked":"\u003cp\u003ePeople still remember the huge drama from early 2025, but I think we should pay more attention to what Torvalds and Greg K-H recently said at the Open Source Summit Korea just two weeks ago.\u003c/p\u003e\n\u003cdiv class=\"youtube-onebox lazy-video-container\" data-video-id=\"tWx769t1JKg\" data-video-title=\"Keynote: Linus Torvalds, Creator of Linux \u0026amp; Git, in Conversation with Dirk Hohndel\" data-video-start-time=\"355s\" data-provider-name=\"youtube\"\u003e\n  \u003ca href=\"https://www.youtube.com/watch?v=tWx769t1JKg\u0026amp;t=355s\" target=\"_blank\" class=\"video-thumbnail\" rel=\"noopener nofollow ugc\"\u003e\n    \u003cimg class=\"youtube-thumbnail\" src=\"https://us1.discourse-cdn.com/flex002/uploads/python1/original/3X/b/6/b66450ebd950ee88dc1cc73ed05f11a8d61f9c40.jpeg\" title=\"Keynote: Linus Torvalds, Creator of Linux \u0026amp; Git, in Conversation with Dirk Hohndel\" data-dominant-color=\"97C6BE\" width=\"690\" height=\"388\"\u003e\n  \u003c/a\u003e\n\u003c/div\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eSo, so that’s that’s one thing that has changed for me is that I actually feel like sometimes I need to encourage some of the other maintainers to be more open to to new ideas.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eIf we want to bring up Rust for Linux as an example, we should not only talk about how introducing a new and unfamiliar idea can create conflict among existing maintainers, but also emphasize that leadership plays a role in encouraging the community to embrace such changes.\u003c/p\u003e","post_number":46,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T00:02:42.657Z","reply_count":0,"reply_to_post_number":2,"quote_count":0,"incoming_link_count":6,"reads":261,"readers_count":260,"score":246.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jeong, YunWon","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://www.youtube.com/watch?v=tWx769t1JKg\u0026t=355s","internal":false,"reflection":false,"clicks":12},{"url":"https://www.youtube.com/watch?v=tWx769t1JKg","internal":false,"reflection":false,"clicks":0}],"read":true,"user_title":null,"reply_to_user":{"id":21030,"username":"MegaIng","name":"Cornelius Krupp","avatar_template":"/user_avatar/discuss.python.org/megaing/{size}/16162_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":11}],"moderator":false,"admin":false,"staff":false,"user_id":29236,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/46","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277557,"name":"Brett Cannon","username":"brettcannon","avatar_template":"/user_avatar/discuss.python.org/brettcannon/{size}/21723_2.png","created_at":"2025-11-18T00:32:57.514Z","cooked":"\u003cp\u003eI will state upfront I support this endeavour. I was thinking of trying this as a retirement project, so I’m glad Emma and Kirill are trying this \u003cstrong\u003emuch\u003c/strong\u003e sooner than that!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"SnoopJ\" data-post=\"30\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/snoopj/48/7944_2.png\" class=\"avatar\"\u003e James Gerity:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePEP 11’s requirements for each tier’s support are broad enough (language-agnostic enough) that it’s very possible that no changes are required, but I did raise my eyebrows at the intersection with Rust’s own support tiers.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAs the current maintainer of PEP 11, it won’t require anything and will naturally be assumed that Rust support is a minimum requirement just like C11 support via PEP 7 is an implicit requirement.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"steve.dower\" data-post=\"38\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI’d rather see people discussing things like how Rust provides any protection/benefit at all when we have to interop \u003cem\u003eeverything\u003c/em\u003e with “unsafe” C code at a level \u003cem\u003ebelow\u003c/em\u003e anywhere PyO3 could help (which is only safe because it relies on our public C API, which is the safety barrier with guaranteed semantics that can be mapped into Rust’s semantics).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSo there’s the C code that calls into CPython’s APIs and the C code that stays on your side of things. You’re right that when we only talk about extension modules we are still crossing into the unsafe C code of CPython’s internals, but there’s plenty of code that’s just plain C that you could mess up that never crosses the C API barrier. And if Rust makes inroads into CPython internals then the safety benefits start to go deeper.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"sunmy2019\" data-post=\"44\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/sunmy2019/48/11935_2.png\" class=\"avatar\"\u003e Steven Sun:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWho will lead this large-scale refactoring?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eEmma and Kirill as the PEP authors along with any other core devs and folks who want to get involved and have appropriate Rust experience.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"sunmy2019\" data-post=\"44\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/sunmy2019/48/11935_2.png\" class=\"avatar\"\u003e Steven Sun:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eWho will be responsible for designing the overall code architecture?\u003c/li\u003e\n\u003cli\u003eWho will be making final decisions (for example, how will conflicts with the existing C implementation be resolved)?\u003c/li\u003e\n\u003cli\u003eHow can we ensure a stable core team will be able to contribute continuously to this long-term development effort?\u003c/li\u003e\n\u003cli\u003eIs there a communication plan to ensure that progress, challenges, and design changes are transparently communicated to the entire community?\u003c/li\u003e\n\u003cli\u003eHow are the project’s key milestones planned? At what point in time or under what circumstances should we reassess the feasibility of these milestones or the overall direction of the project?\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI don’t think these are really pertinent as they are things we deal with everyday already on the core team in general. Even knowing when to assess success will come down to the SC making a call.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"corona10\" data-post=\"45\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/corona10/48/9943_2.png\" class=\"avatar\"\u003e Donghee Na:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI believe the CPython core team already maintains the C codebase as safely as possible, so while language level safety would certainly be beneficial, the current situation is not one where we are struggling or suffering.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI agree, but a “C codebase as safely as possible” is still less safe than a code base in Rust. And now that we have a decade-old systems language that’s safer than C, I think it behooves us to at least try and see if we can make it work.\u003c/p\u003e","post_number":47,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T00:32:57.514Z","reply_count":2,"reply_to_post_number":24,"quote_count":4,"incoming_link_count":4,"reads":268,"readers_count":267,"score":397.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Brett Cannon","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":7795,"username":"SnoopJ","name":"James Gerity","avatar_template":"/user_avatar/discuss.python.org/snoopj/{size}/7944_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":19}],"moderator":true,"admin":true,"staff":true,"user_id":36,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/47","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277558,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-18T00:37:14.443Z","cooked":"\u003caside class=\"quote group-committers quote-modified\" data-username=\"brettcannon\" data-post=\"47\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/brettcannon/48/21723_2.png\" class=\"avatar\"\u003e Brett Cannon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote no-group\" data-username=\"sunmy2019\" data-post=\"44\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/sunmy2019/48/11935_2.png\" class=\"avatar\"\u003e sunmy2019:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWho will lead this large-scale refactoring?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eEmma and Kirill as the PEP authors along with any other core devs and folks who want to get involved and have appropriate Rust experience.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003caside class=\"quote group-committers quote-modified\" data-username=\"brettcannon\" data-post=\"47\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/brettcannon/48/21723_2.png\" class=\"avatar\"\u003e Brett Cannon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote no-group\" data-username=\"sunmy2019\" data-post=\"44\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/sunmy2019/48/11935_2.png\" class=\"avatar\"\u003e sunmy2019:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eWho will be responsible for designing the overall code architecture?\u003c/li\u003e\n\u003cli\u003eWho will be making final decisions (for example, how will conflicts with the existing C implementation be resolved)?\u003c/li\u003e\n\u003cli\u003eHow can we ensure a stable core team will be able to contribute continuously to this long-term development effort?\u003c/li\u003e\n\u003cli\u003eIs there a communication plan to ensure that progress, challenges, and design changes are transparently communicated to the entire community?\u003c/li\u003e\n\u003cli\u003eHow are the project’s key milestones planned? At what point in time or under what circumstances should we reassess the feasibility of these milestones or the overall direction of the project?\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI don’t think these are really pertinent as they are things we deal with everyday already on the core team in general. Even knowing when to assess success will come down to the SC making a call.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI agree with everything Brett says above, but also wanted to add that I am going to spend some time over the next few days on community building around Rust in CPython with a goal of kicking off discussions around a lot of the topics brought up here.\u003c/p\u003e","post_number":48,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T00:37:14.443Z","reply_count":0,"reply_to_post_number":44,"quote_count":2,"incoming_link_count":5,"reads":261,"readers_count":260,"score":166.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/48","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277559,"name":"Barry Warsaw","username":"barry","avatar_template":"/user_avatar/discuss.python.org/barry/{size}/42_2.png","created_at":"2025-11-18T00:45:01.991Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"corona10\" data-post=\"45\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/corona10/48/9943_2.png\" class=\"avatar\"\u003e Donghee Na:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eHowever, I am cautious about the idea of fully rewriting the CPython codebase in Rust.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI would go further and predict that this will never happen, and claim that it shouldn’t be a goal of the Rust-in-Python project.  There are 10**oodles of person-years invested in the CPython core interpreter, and I just don’t see how that will ever be cost effective to rewrite, even as a \u003ca href=\"https://en.wikipedia.org/wiki/Ship_of_Theseus\"\u003eShip of Theseus\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eBut that’s not to say we shouldn’t go forward with this experiment, because we’ll better understand the costs and benefits\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277559-1\" id=\"footnote-ref-277559-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e.\u003c/p\u003e\n\u003cp\u003eOne of the soft consequences I’m especially interested in is whether this attracts more or fewer core developers contributing to the Rust bits than the C bits.  I don’t remember the numbers, but I vaguely recall some discussion about the number of core devs who are comfortable contributing to the C bits vs the Python bits.  The former is surely a smaller number, and my guess is that even fewer are comfortable in Rust \u003cem\u003etoday\u003c/em\u003e\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277559-2\" id=\"footnote-ref-277559-2\"\u003e[2]\u003c/a\u003e\u003c/sup\u003e.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277559-1\" class=\"footnote-item\"\u003e\u003cp\u003eand better know the unknown unknowns \u003ca href=\"#footnote-ref-277559-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"footnote-277559-2\" class=\"footnote-item\"\u003e\u003cp\u003eTo be clear, I consider everyone’s contributions, regardless of where or what language, to be incredibly valuable and valued \u003ca href=\"#footnote-ref-277559-2\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":49,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T00:45:01.991Z","reply_count":4,"reply_to_post_number":45,"quote_count":1,"incoming_link_count":4,"reads":256,"readers_count":255,"score":315.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Barry Warsaw","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://en.wikipedia.org/wiki/Ship_of_Theseus","internal":false,"reflection":false,"title":"Ship of Theseus - Wikipedia","clicks":13}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":15}],"moderator":false,"admin":false,"staff":false,"user_id":17,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/49","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277560,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-18T00:53:59.811Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"corona10\" data-post=\"45\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/corona10/48/9943_2.png\" class=\"avatar\"\u003e Donghee Na:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWe have a lot of low level and very optimized C code that Rust cannot express safely. A good example is the computed goto dispatch in the interpreter, which would require a large amount of \u003ca href=\"https://pliniker.github.io/post/dispatchers/\"\u003eunsafe code\u003c/a\u003e or inline assembly if we tried to reproduce it in Rust.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI think this is actually a great example where Rust \u003cem\u003ecould\u003c/em\u003e be a huge improvement over C. There is  interest in the Rust community to implement a safe state machine loop, e.g. this proposal \u003ca href=\"https://github.com/rust-lang/rfcs/pull/3720\" class=\"inline-onebox\"\u003eRFC: Improved State Machine Codegen by folkertdev · Pull Request #3720 · rust-lang/rfcs · GitHub\u003c/a\u003e. That proposal may not get into Rust, but given the interest I am sure there will be some safe solution implemented eventually. And I would like to re-iterate another point: we absolutely should \u003cem\u003enot\u003c/em\u003e re-write things that don’t make sense to. The core interpreter loop itself may not make sense to for a while, but that doesn’t mean other important runtime things can’t be Rust, like thread state management, the parser, and others.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"barry\" data-post=\"49\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/barry/48/42_2.png\" class=\"avatar\"\u003e Barry Warsaw:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI would go further and predict that this will never happen, and claim that it shouldn’t be a goal of the Rust-in-Python project.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWell then you’ll be really glad with this blurb I was writing in response to Donghee’s post \u003cimg src=\"https://emoji.discourse-cdn.com/apple/laughing.png?v=15\" title=\":laughing:\" class=\"emoji\" alt=\":laughing:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e. Speaking for myself here:\u003c/p\u003e\n\u003cp\u003eThe goal of this project should \u003cem\u003enot\u003c/em\u003e specifically be to re-write CPython in Rust, but rather iteratively move more C code to Rust over time and reap the benefits for those portions of code. This may end up meaning Python becomes entirely Rust! But I don’t think that will necessarily be the end goal.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"barry\" data-post=\"49\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/barry/48/42_2.png\" class=\"avatar\"\u003e Barry Warsaw:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOne of the soft consequences I’m especially interested in is whether this attracts more or fewer core developers contributing to the Rust bits than the C bits.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’m also quite interested in this! Given that we have seen people shifting to Rust for new 3rd-party extension modules I really hope that will translate into more contributors.\u003c/p\u003e","post_number":50,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T00:54:14.514Z","reply_count":2,"reply_to_post_number":45,"quote_count":2,"incoming_link_count":3,"reads":262,"readers_count":261,"score":121.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/rust-lang/rfcs/pull/3720","internal":false,"reflection":false,"clicks":11}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/50","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277561,"name":"Alex Gaynor","username":"alex_Gaynor","avatar_template":"/user_avatar/discuss.python.org/alex_gaynor/{size}/17_2.png","created_at":"2025-11-18T00:59:01.064Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"50\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe goal of this project should \u003cem\u003enot\u003c/em\u003e specifically be to re-write CPython in Rust, but rather iteratively move more C code to Rust over time and reap the benefits for those portions of code.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eOne thing I do think is worth saying: The highest ROI pieces are going to be modules and perhaps builtin types/functions, which can be implemented entirely in safe Rust with ergonomics high level APIs, reaping performance and developer experience/velocity wins.\u003c/p\u003e\n\u003cp\u003eSomething like the GC is at the absolute nadir of the value of Rust: it inevitably requires a decent amount of \u003ccode\u003eunsafe\u003c/code\u003e and won’t benefit from Rust’s other advantages.\u003c/p\u003e\n\u003cp\u003eAnd then many other things (e.g., the parser or interpreter loop) are likely to be in the middle in terms of where I’d estimate the ROI is.\u003c/p\u003e","post_number":51,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T00:59:01.064Z","reply_count":1,"reply_to_post_number":50,"quote_count":1,"incoming_link_count":1,"reads":258,"readers_count":257,"score":255.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Alex Gaynor","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":11}],"moderator":false,"admin":false,"staff":false,"user_id":12,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/51","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277562,"name":"Donghee Na","username":"corona10","avatar_template":"/user_avatar/discuss.python.org/corona10/{size}/9943_2.png","created_at":"2025-11-18T01:15:27.824Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"50\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ebut that doesn’t mean other important runtime things can’t be Rust,\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003caside class=\"quote group-committers\" data-username=\"brettcannon\" data-post=\"47\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/brettcannon/48/21723_2.png\" class=\"avatar\"\u003e brettcannon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI agree, but a “C codebase as safely as possible” is still less safe than a code base in Rust. And now that we have a decade-old systems language that’s safer than C, I think it behooves us to at least try and see if we can make it work.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eJust to clarify: I love using Rust, and I’m one of the people interested in bringing Rust into CPython. I’ve talked about this topic in the context of JIT because of its practical advantages.\u003c/p\u003e\n\u003cp\u003e\u003ca class=\"mention\" href=\"/u/emmatyping\"\u003e@emmatyping\u003c/a\u003e  What I’m curious about is this: in the current PoC, \u003ca href=\"https://github.com/emmatyping/cpython/blob/c9deee600d60509c5da6ef538a9b530f7ba12e05/Modules/_base64/src/lib.rs#L114-L181\"\u003emost of the code uses\u003c/a\u003e \u003ccode\u003eunsafe\u003c/code\u003e blocks. I understand this isn’t Rust’s fault but rather a limitation of the CPython API. Still, how do these modules become memory-safe in the PoC, and how much less do we need to worry about memory safety compared to writing the same code in C? For example, if you could say something like “X% of the code in the \u003ccode\u003ebase64\u003c/code\u003e module becomes memory-safe,” that would be a helpful metric to highlight.\u003c/p\u003e\n\u003cp\u003eAlso, do you have any plans to remove the unsafe blocks in modules like \u003ccode\u003ebase64\u003c/code\u003e? If so, could you include that plan in the PEP?\u003c/p\u003e\n\u003cp\u003eAnother thing: could you compare build times and performance between the C version (with PGO + LTO) and the Rust build? I think that would make the PEP much more balanced and fair for reviewers.\u003c/p\u003e","post_number":52,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T01:15:27.824Z","reply_count":2,"reply_to_post_number":47,"quote_count":2,"incoming_link_count":4,"reads":261,"readers_count":260,"score":111.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Donghee Na","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/emmatyping/cpython/blob/c9deee600d60509c5da6ef538a9b530f7ba12e05/Modules/_base64/src/lib.rs#L114-L181","internal":false,"reflection":false,"title":"cpython/Modules/_base64/src/lib.rs at c9deee600d60509c5da6ef538a9b530f7ba12e05 · emmatyping/cpython · GitHub","clicks":18}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":344,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/52","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277563,"name":"Neil Schemenauer","username":"nas","avatar_template":"/user_avatar/discuss.python.org/nas/{size}/536_2.png","created_at":"2025-11-18T01:19:41.409Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"alex_Gaynor\" data-post=\"51\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/alex_gaynor/48/17_2.png\" class=\"avatar\"\u003e Alex Gaynor:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSomething like the GC is at the absolute nadir of the value of Rust: it inevitably requires a decent amount of \u003ccode\u003eunsafe\u003c/code\u003e and won’t benefit from Rust’s other advantages.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eBased on my recent experience in adding hardware prefetch to the free-threaded GC, I feel like writing in Rust could have provided some good benefit.  For example, implementing the \u003ccode\u003egc_span_stack_t\u003c/code\u003e data structure and associated methods would have been easier to write and to review.  I would expect that it also would have prevented this \u003ca href=\"https://github.com/python/cpython/issues/141212\"\u003ememory leak bug\u003c/a\u003e in that code.\u003c/p\u003e","post_number":53,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T01:19:41.409Z","reply_count":0,"reply_to_post_number":51,"quote_count":1,"incoming_link_count":1,"reads":252,"readers_count":251,"score":204.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Neil Schemenauer","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/python/cpython/issues/141212","internal":false,"reflection":false,"title":"GitHub · Where software is built","clicks":21}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":8}],"moderator":false,"admin":false,"staff":false,"user_id":63,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/53","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277565,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-18T01:47:21.059Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"corona10\" data-post=\"52\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/corona10/48/9943_2.png\" class=\"avatar\"\u003e Donghee Na:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhat I’m curious about is this: in the current PoC, \u003ca href=\"https://github.com/emmatyping/cpython/blob/c9deee600d60509c5da6ef538a9b530f7ba12e05/Modules/_base64/src/lib.rs#L114-L181\"\u003emost of the code uses\u003c/a\u003e \u003ccode\u003eunsafe\u003c/code\u003e blocks. I understand this isn’t Rust’s fault but rather a limitation of the CPython API. Still, how do these modules become memory-safe in the PoC, and how much less do we need to worry about memory safety compared to writing the same code in C?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI think this section covers that:\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eEventually safe abstractions to simplify and standardize code like module definitions, function argument parsing, and class definitions could be adopted to reduce the amount of raw FFI code written.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThe current implementation is really a proof of concept, so there are a lot of places it could improve. It started with myself wishing to see how hard it would be to integrate Rust with cargo into our existing build system. A Rust \u003ccode\u003e_base64\u003c/code\u003e module in CPython will look a bit different from the current proof of concept I hope. I expect extension modules will likely be able to be to be 80% safe hand-written code or more.\u003c/p\u003e\n\u003cp\u003eThat being said, building out the safe abstractions will take time and effort to do properly. So I think I would say, if you want to see something \u003cem\u003elike\u003c/em\u003e where I hope to end up, look at PyO3, where the vast majority of hand written code is safe.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"corona10\" data-post=\"52\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/corona10/48/9943_2.png\" class=\"avatar\"\u003e Donghee Na:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAnother thing: could you compare build times and performance between the C version (with PGO + LTO) and the Rust build? I think that would make the PEP much more balanced and fair for reviewers.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003ca class=\"mention\" href=\"/u/eclips4\"\u003e@Eclips4\u003c/a\u003e found that his hand-rolled implementation that does not use any SIMD is about 1.6x faster than the \u003ccode\u003e_binascii\u003c/code\u003e implementation in use today. It’s hard to make a “fair” compilation speed benchmark because there are many variables that can come into play and knobs that can be tuned. The added Rust code will also necessarily add more compile time because we aren’t removing code by introducing \u003ccode\u003e_base64\u003c/code\u003e.\u003c/p\u003e","post_number":54,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T01:47:21.059Z","reply_count":0,"reply_to_post_number":52,"quote_count":2,"incoming_link_count":5,"reads":257,"readers_count":256,"score":115.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/54","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277566,"name":"Brénainn Woodsend","username":"bwoodsend","avatar_template":"/user_avatar/discuss.python.org/bwoodsend/{size}/4027_2.png","created_at":"2025-11-18T01:51:41.667Z","cooked":"\u003cp\u003eWill the binaries written in rust be able to share a single copy of dependencies and/or the rust runtime? My recollection is that ABI in rust is a forgotten dream and that each library/ or executable ends up with separate copy of all its dependencies plus a big fat core runtime lumped into it, turning a network of little libraries\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277566-1\" id=\"footnote-ref-277566-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e into a network of bloatware. But it’s a long time since my last (unsuccessful) attempt to get into rust so that might no longer be true (assuming that it was ever true).\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277566-1\" class=\"footnote-item\"\u003e\u003cp\u003eor extension modules in CPython’s case \u003ca href=\"#footnote-ref-277566-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":55,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T01:51:41.667Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":245,"readers_count":244,"score":133.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Brénainn Woodsend","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":4032,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/55","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277567,"name":"William Woodruff","username":"woodruffw","avatar_template":"/user_avatar/discuss.python.org/woodruffw/{size}/7614_2.png","created_at":"2025-11-18T02:04:28.924Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"bwoodsend\" data-post=\"55\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/bwoodsend/48/4027_2.png\" class=\"avatar\"\u003e Brénainn Woodsend:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWill the binaries written in rust be able to share a single copy of dependencies and/or the rust runtime? My recollection is that ABI in rust is a forgotten dream\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eRust has no problem using the C ABI; from experience, the norm when integrating Rust into existing C codebases is retain existing ABI boundaries and perform dynamic linking in the same ways that the codebase would normally.\u003c/p\u003e\n\u003cp\u003e(There’s a separate issue, which is that \u003cem\u003efully\u003c/em\u003e separate Rust builds tend to prefer static linkage because there’s no stable Rust ABI. But the integration efforts of Chrome, Firefox, etc. are good examples of integration of Rust components into projects that assume the C/C++ ABIs.)\u003c/p\u003e","post_number":56,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T02:04:28.924Z","reply_count":0,"reply_to_post_number":55,"quote_count":1,"incoming_link_count":1,"reads":250,"readers_count":249,"score":129.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"William Woodruff","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":994,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/56","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277571,"name":"Jeong, YunWon","username":"youknowone","avatar_template":"/user_avatar/discuss.python.org/youknowone/{size}/19382_2.png","created_at":"2025-11-18T02:25:14.462Z","cooked":"\u003cp\u003eHi, I’m one of the RustPython developers, and during work hours I maintain a tightly-coupled C++/Rust project of about 200k lines.\u003c/p\u003e\n\u003cp\u003eI’d like to comment on some of the points raised in the post and the thread. I’m still getting used to Discourse, so please excuse me about missing quotes.\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277571-questions-about-rustpython-1\" class=\"anchor\" href=\"#p-277571-questions-about-rustpython-1\"\u003e\u003c/a\u003eQuestions about RustPython\u003c/h2\u003e\n\u003cp\u003eRustPython isn’t something that can be considered in this PEP in short term. RustPython and CPython are not semantically compatible across many layers of their implementation.\u003cbr\u003e\nWell, RustPython has a bunch of pure Rust library with excellently working Python stdlibs. it could serve as a reference when introducing Rust versions of certain libraries. I don’t believe it is directly related to this PEP.\u003c/p\u003e\n\u003cp\u003eRustPython has its own approach to running without a GIL, but it’s not compatible with CPython’s nogil direction.\u003c/p\u003e\n\u003cp\u003eIf there’s one aspect of RustPython worth highlighting in this PEP, it’s that it has achieved a surprising amount of CPython compatibility with a very small number of contributors. I rarely contribute directly to CPython’s C code, but I’m very familiar with reading it. After implementing equivalent features in RustPython, the resulting Rust code is usually much smaller, with no RC boilerplate, and error handling is much clearer.\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277571-bindgen-2\" class=\"anchor\" href=\"#p-277571-bindgen-2\"\u003e\u003c/a\u003ebindgen\u003c/h2\u003e\n\u003cp\u003eI think there must be a good guidelines on how bindgen should be used. bindgen generates both data structure definitions and function bindings. Function bindings are usually reliable—but data structure definitions often are not. If we rely on bindgen for those, we must run the generated tests to verify compatibility.\u003c/p\u003e\n\u003cp\u003eIn base64, the code currently uses a direct definition of \u003ccode\u003ePyModuleDef\u003c/code\u003e. To be safe, either:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003everify struct size via tests, or\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003elet C create the struct and only access it through FFI.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eAs far as I can tell, \u003ccode\u003ecargo test\u003c/code\u003e for cpython_sys currently doesn’t run the generated tests (I might have missed something).\u003c/p\u003e\n\u003cp\u003eI’m not saying this PEP must adopt following idea, but from experience, defining data structures on the Rust side and generating C headers with cbindgen can be safer than generating Rust code with bindgen. Though while rust-in-cpython focuses on writing stdlib modules, where C doesn’t need to call Rust, there may be limited motivation to use cbindgen.\u003c/p\u003e\n\u003cp\u003eThis perspective comes from my experience with mixed C++/Rust projects. CPython being a C/Rust project may lead to fewer issues.\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277571-clinic-3\" class=\"anchor\" href=\"#p-277571-clinic-3\"\u003e\u003c/a\u003eclinic\u003c/h2\u003e\n\u003cp\u003eAll Python functions will end up exposed as \u003ccode\u003eextern \"C\"\u003c/code\u003e. For now, I’d actually suggested to consider cbindgen for this:\u003cbr\u003e\nEach module could run cbindgen to produce a C header including all FFI functions with their original comments. Then, maybe clinic tooling could operate directly on those headers without major changes? I’m not totally sure since I don’t fully understand clinic, but it seems it could require less modification than the other 2 suggested methods.\u003c/p\u003e\n\u003cp\u003eWhen Rust penetrates deeper than the module boundary and this approach breaks down, we’ll have better insight for future decisions anyway.\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277571-abi-4\" class=\"anchor\" href=\"#p-277571-abi-4\"\u003e\u003c/a\u003eABI\u003c/h2\u003e\n\u003cp\u003eI’m not sure how far Rust implementation will expand, but compared to Pants, CPython’s requirements seem much simpler. If we connect this with the clinic/cbindgen idea, we could enforce a policy that every exported symbol must be declared in a properly generated C header. Since the only stable ABI in Rust is the C ABI, having headers fully specify remains reasonable until Rust APIs are officially exposed to users.\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277571-build-time-5\" class=\"anchor\" href=\"#p-277571-build-time-5\"\u003e\u003c/a\u003eBuild time\u003c/h2\u003e\n\u003cp\u003eIdeally, Rust debug builds shouldn’t be too slow. But many Rust libraries lean heavily on proc-macros, which can significantly impact build times. For example, RustPython has far less code and functionality than CPython, yet it takes ~5× longer to build, and the gap is even bigger for incremental builds.\u003c/p\u003e\n\u003cp\u003eIf build time is a major concern, guidelines limits unnecessary proc-macro usage may help. Also, on the external tooling side, we can hope llvm might support faster Rust debug builds later since Python is a priority project for llvm project.\u003c/p\u003e\n\u003cp\u003eI don’t worry about generics in rust-in-cpython. Unlike RustPython, rust-in-cpython must generate C interface, which discourage to abuse generics.\u003c/p\u003e\n\u003cp\u003eFrom a build-time perspective, keeping one crate per module as _base64 doing now is very appealing.\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277571-using-unsafe-6\" class=\"anchor\" href=\"#p-277571-using-unsafe-6\"\u003e\u003c/a\u003eUsing \u003ccode\u003eunsafe\u003c/code\u003e\u003c/h2\u003e\n\u003cp\u003eIn my opinion, completely eliminating \u003ccode\u003eunsafe\u003c/code\u003e from base64 isn’t the right goal.\u003c/p\u003e\n\u003cp\u003eRust guarantees that code outside an \u003ccode\u003eunsafe {}\u003c/code\u003e block is safe. Anything the compiler cannot verify must be wrapped in \u003ccode\u003eunsafe {}\u003c/code\u003e. Wrapping unsafe internals in a “safe” API means the programmer is manually guaranteeing safety.\u003c/p\u003e\n\u003cp\u003eSome guarantees can be established through review and careful implementation, but FFI safety often cannot be fully guaranteed due to inherent interface limitations. If we hide \u003ccode\u003eunsafe\u003c/code\u003e behind safe APIs even where true safety can’t be guaranteed, then we lose track of which code must be treated with caution.\u003c/p\u003e\n\u003cp\u003eSo instead of trying too hard to remove \u003ccode\u003eunsafe\u003c/code\u003e, it’s better to encourage properly mark actually unsafe code and minimize them when possible.\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277571-rust-benefits-vs-ffi-cost-7\" class=\"anchor\" href=\"#p-277571-rust-benefits-vs-ffi-cost-7\"\u003e\u003c/a\u003eRust benefits vs. FFI cost\u003c/h2\u003e\n\u003cp\u003eRust reduces memory-related bugs, but across FFI boundaries, things can actually become \u003cem\u003eless\u003c/em\u003e safe than using a single C compiler. The more FFI boundaries exist, the more type information is lost, and the more binding risk increases.\u003c/p\u003e\n\u003cp\u003eUsually, early Rust adoption increases FFI surface area and reduce problems in the rust codebase but also creates new problems at the same time. Then over time, as Rust takes over more internals, the boundary shrinks and things feel cleaner again.\u003c/p\u003e\n\u003cp\u003eFrom that perspective, starting with modules is a positive direction: a lot of code, limited boundaries.\u003c/p\u003e\n\u003ch2\u003e\u003ca name=\"p-277571-questions-8\" class=\"anchor\" href=\"#p-277571-questions-8\"\u003e\u003c/a\u003eQuestions\u003c/h2\u003e\n\u003cp\u003eShipping strategy: Will the Rust extension only support nogil build? If so, that might help reduce some FFI complexity.\u003c/p\u003e\n\u003cp\u003eDuplication:\u003c/p\u003e\n\u003cp\u003ePython currently ships duplicate C and Python implementations for some modules. If this PEP considers moving some stdlib pieces to Rust, could Rust implementations also coexist as duplicates? If so, a guideline to have different implementations about same feature will be great. Having separate module paths and build flags would allow experimentation, and then flipping Rust on by default once stable. It will be work like a sort of feature-level incubators. If possible, I’d love to see this code used: \u003ca href=\"https://github.com/RustPython/pymath\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\"\u003eGitHub - RustPython/pymath\u003c/a\u003e (While working on it, I learned how dealing with FMA is way nicer in Rust than in C. Thanks tim-one.)\u003c/p\u003e\n\u003cp\u003eIf this proposal moves forward, I’m ready to dedicate a significant portion of my 2026 open-source time to it. As mentioned, I’m experienced with large-scale Rust FFI using bindgen, and I’m fairly familiar with Python internals as well. Please feel free to poke me if I can help.\u003c/p\u003e\n\u003cp\u003eFinally, I’m genuinely impressed that the CPython community is open to such a bold direction. I’m curious to see how this proposal plays out, and I’ll be following this thread with great interest. Cheers!\u003c/p\u003e","post_number":57,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T02:25:14.462Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":22,"reads":264,"readers_count":263,"score":771.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jeong, YunWon","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/RustPython/pymath","internal":false,"reflection":false,"title":"GitHub - RustPython/pymath","clicks":9}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":38}],"moderator":false,"admin":false,"staff":false,"user_id":29236,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/57","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277572,"name":"Éric Araujo","username":"merwok","avatar_template":"/user_avatar/discuss.python.org/merwok/{size}/29_2.png","created_at":"2025-11-18T02:29:28.275Z","cooked":"\u003cp\u003eHi,\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"monk-time\" data-post=\"28\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/monk-time/48/516_2.png\" class=\"avatar\"\u003e Dmitry:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ethis would open the door for the possibility of shipping with Python modern Rust-based tooling for dep management, formatting and linting\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eCan you expand on this with some specific examples? I can only interpret this as a suggestion that Python releases would include uv and ruff, and it doesn’t make much sense to me.\u003cbr\u003e\nThese projects already exist, their adoption does not depend on CPython using Rust itself.\u003cbr\u003e\nAnd formatters and linters are third-party projects, not developed by python-dev, and chosen by developers.\u003cbr\u003e\nOne thing with special status is pip, included via ensurepip, to solve the packaging boostrapping issue.\u003c/p\u003e","post_number":58,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T02:29:28.275Z","reply_count":2,"reply_to_post_number":28,"quote_count":1,"incoming_link_count":6,"reads":239,"readers_count":238,"score":117.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Éric Araujo","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":11,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/58","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277579,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-18T04:11:33.057Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf there’s one aspect of RustPython worth highlighting in this PEP, it’s that it has achieved a surprising amount of CPython compatibility with a very small number of contributors. I rarely contribute directly to CPython’s C code, but I’m very familiar with reading it. After implementing equivalent features in RustPython, the resulting Rust code is usually much smaller, with no RC boilerplate, and error handling is much clearer.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis is great to hear, and we’ll definitely note this in the PEP!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIn base64, the code currently uses a direct definition of \u003ccode\u003ePyModuleDef\u003c/code\u003e. To be safe, either:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003everify struct size via tests, or\u003c/li\u003e\n\u003cli\u003elet C create the struct and only access it through FFI.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eAs far as I can tell, \u003ccode\u003ecargo test\u003c/code\u003e for cpython_sys currently doesn’t run the generated tests (I might have missed something).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI agree adding tests for the struct size is a good idea. And I’ll add a comment to get the bindgen tests working on the PR. Thanks for the feedback!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI’m not saying this PEP must adopt following idea, but from experience, defining data structures on the Rust side and generating C headers with cbindgen can be safer than generating Rust code with bindgen.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI expect this is a non-starter as the C API is the source of truth and will likely remain so - maybe indefinitely.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAll Python functions will end up exposed as \u003ccode\u003eextern \"C\"\u003c/code\u003e. For now, I’d actually suggested to consider cbindgen for this:\u003cbr\u003e\nEach module could run cbindgen to produce a C header including all FFI functions with their original comments. Then, maybe clinic tooling could operate directly on those headers without major changes? I’m not totally sure since I don’t fully understand clinic, but it seems it could require less modification than the other 2 suggested methods.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis is definitely an interesting approach! I will experiment with it and see how that goes.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ewe could enforce a policy that every exported symbol must be declared in a properly generated C header.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYeah, I expect this will need to be the case, especially since as mentioned about, the C API is considered the source of truth.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eFrom a build-time perspective, keeping one crate per module as _base64 doing now is very appealing.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYes I think this has a few benefits, such as faster compile times and modularization.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf we hide \u003ccode\u003eunsafe\u003c/code\u003e behind safe APIs even where true safety can’t be guaranteed, then we lose track of which code must be treated with caution.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAbsolutely agree here. We probably won’t be able to make everything safe, but being principled about how we interact with unsafe will help significantly.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eShipping strategy: Will the Rust extension only support nogil build? If so, that might help reduce some FFI complexity.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI was discussing this with Kirill and we’re thinking Rust modules should be required to support free-threading and sub-interpreters from the start. I don’t think we will have too much difficulty supporting the regular builds if we already support free-threaded.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePython currently ships duplicate C and Python implementations for some modules. If this PEP considers moving some stdlib pieces to Rust, could Rust implementations also coexist as duplicates?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI probably would say the Rust implementation should replace the C implementation, as having 3 implementations is rather a lot. But I’d be open to considering the path you propose. I think we’d need good motivation that people will use the in incubation Rust versions if we were to consider that plan.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf this proposal moves forward, I’m ready to dedicate a significant portion of my 2026 open-source time to it. As mentioned, I’m experienced with large-scale Rust FFI using bindgen, and I’m fairly familiar with Python internals as well. Please feel free to poke me if I can help.\u003c/p\u003e\n\u003cp\u003eFinally, I’m genuinely impressed that the CPython community is open to such a bold direction. I’m curious to see how this proposal plays out, and I’ll be following this thread with great interest. Cheers!\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThat’s fantastic to hear! I’ll definitely follow up about that.\u003c/p\u003e","post_number":59,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T04:11:33.057Z","reply_count":0,"reply_to_post_number":57,"quote_count":1,"incoming_link_count":6,"reads":251,"readers_count":250,"score":184.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/59","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277580,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-18T04:13:55.112Z","cooked":"\u003caside class=\"quote group-committers quote-modified\" data-username=\"merwok\" data-post=\"58\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/merwok/48/29_2.png\" class=\"avatar\"\u003e Éric Araujo:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote no-group\" data-username=\"monk-time\" data-post=\"28\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/monk-time/48/516_2.png\" class=\"avatar\"\u003e monk-time:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ethis would open the door for the possibility of shipping with Python modern Rust-based tooling for dep management, formatting and linting\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eCan you expand on this with some specific examples? I can only interpret this as a suggestion that Python releases would include uv and ruff, and it doesn’t make much sense to me.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYeah on a re-read I think my earlier comment misinterpreted this message as discussing clippy and rustfmt (Rust tools). So I would say adding Python tooling that is written in Rust to CPython is out of scope for this proposal.\u003c/p\u003e","post_number":60,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T04:13:55.112Z","reply_count":0,"reply_to_post_number":58,"quote_count":2,"incoming_link_count":0,"reads":240,"readers_count":239,"score":92.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/60","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277581,"name":"Raphael Gaschignard","username":"rtpg","avatar_template":"/user_avatar/discuss.python.org/rtpg/{size}/14068_2.png","created_at":"2025-11-18T04:22:28.658Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"corona10\" data-post=\"52\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/corona10/48/9943_2.png\" class=\"avatar\"\u003e corona10:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca class=\"mention\" href=\"/u/emmatyping\"\u003e@emmatyping\u003c/a\u003e What I’m curious about is this: in the current PoC, \u003ca href=\"https://github.com/emmatyping/cpython/blob/c9deee600d60509c5da6ef538a9b530f7ba12e05/Modules/_base64/src/lib.rs#L114-L181\" rel=\"noopener nofollow ugc\"\u003emost of the code uses\u003c/a\u003e \u003ccode\u003eunsafe\u003c/code\u003e blocks. I understand this isn’t Rust’s fault but rather a limitation of the CPython API. Still, how do these modules become memory-safe in the PoC, and how much less do we need to worry about memory safety compared to writing the same code in C? For example, if you could say something like “X% of the code in the \u003ccode\u003ebase64\u003c/code\u003e module becomes memory-safe,” that would be a helpful metric to highlight.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eTo expand on this point, I see Rust as a potential usability gain here, much more than the security aspect.\u003c/p\u003e\n\u003cp\u003eI think the argument to use Rust for CPython here would be much stronger if we could see \u003ccode\u003estandard_b64encode\u003c/code\u003e implemented in a way that takes advantage of Rust’s RAII to reduce the book-keeping we have to do in the C code right now.\u003c/p\u003e\n\u003cp\u003eWithout a “Rust API” here for writing these extensions, this becomes \u003cem\u003epurely\u003c/em\u003e a security argument (that I find fairly unconvincing at some level). If \u003ccode\u003estandard_b64encode\u003c/code\u003e was returning a \u003ccode\u003e Result\u003c/code\u003e and we were able to use \u003ccode\u003e?\u003c/code\u003e and all this other stuff with a wrapper that did “the right thing” that would be, at least to me, much more interesting\u003c/p\u003e\n\u003cp\u003eEDIT: though a point against this being easy might be the memory allocation story here… though the error allocation failure paths are about allocation failures in the Python arena, not sure if that means we really have no stack left over. Still think it’s worth proving the point that this has ergonomics improvements, because that feels like a pretty big deal all things considered!\u003c/p\u003e","post_number":61,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T04:30:11.273Z","reply_count":1,"reply_to_post_number":52,"quote_count":1,"incoming_link_count":1,"reads":233,"readers_count":232,"score":56.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Raphael Gaschignard","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":14724,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/61","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277583,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-18T04:40:03.220Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"rtpg\" data-post=\"61\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/rtpg/48/14068_2.png\" class=\"avatar\"\u003e Raphael Gaschignard:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI think the argument to use Rust for CPython here would be much stronger if we could see \u003ccode\u003estandard_b64encode\u003c/code\u003e implemented in a way that takes advantage of Rust’s RAII to reduce the book-keeping we have to do in the C code right now.\u003c/p\u003e\n\u003cp\u003eWithout a “Rust API” here for writing these extensions, this becomes \u003cem\u003epurely\u003c/em\u003e a security argument (that I find fairly unconvincing at some level). If \u003ccode\u003estandard_b64encode\u003c/code\u003e was returning a \u003ccode\u003e Result\u003c/code\u003e and we were able to use \u003ccode\u003e?\u003c/code\u003e and all this other stuff with a wrapper that did “the right thing” that would be, at least to me, much more interesting\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eOne example of reducing mental bookkeeping is the \u003ccode\u003eBorrowedBuffer\u003c/code\u003e abstraction in the implementation \u003ca href=\"https://github.com/emmatyping/cpython/blob/c9deee600d60509c5da6ef538a9b530f7ba12e05/Modules/_base64/src/lib.rs#L81-L111\" class=\"inline-onebox\"\u003ecpython/Modules/_base64/src/lib.rs at c9deee600d60509c5da6ef538a9b530f7ba12e05 · emmatyping/cpython · GitHub\u003c/a\u003e. As mentioned previously, the current example is pretty bare-bones as it is a proof of concept. There is a large room for improvement in ergonomics. But even with raw FFI bindings, it’s possible to have a safe, idiomatic Rust core of an extension module then expose that via unsafe wrappers. And I think even that will improve the safety and utility of writing extensions in CPython.\u003c/p\u003e","post_number":62,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T04:40:03.220Z","reply_count":1,"reply_to_post_number":61,"quote_count":1,"incoming_link_count":1,"reads":220,"readers_count":219,"score":83.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/emmatyping/cpython/blob/c9deee600d60509c5da6ef538a9b530f7ba12e05/Modules/_base64/src/lib.rs#L81-L111","internal":false,"reflection":false,"title":"cpython/Modules/_base64/src/lib.rs at c9deee600d60509c5da6ef538a9b530f7ba12e05 · emmatyping/cpython · GitHub","clicks":11}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/62","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277590,"name":"Raphael Gaschignard","username":"rtpg","avatar_template":"/user_avatar/discuss.python.org/rtpg/{size}/14068_2.png","created_at":"2025-11-18T04:56:49.874Z","cooked":"\u003cp\u003eYeah I think the \u003ccode\u003eBorrowedBuffer\u003c/code\u003e is a good example of helping a bit with its \u003ccode\u003eDrop\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eI guess this would be more convincing to me (random person who has little stake in this beyond poking in CPython internals from time to time but wants to see some idea of this succeed!) if we go a bit further in the barebones interpretation to prove some idea of improved ergonomics, focused entirely on this \u003ccode\u003eencode\u003c/code\u003e implementation, which includes just enough bookkeeping futzing that would be nice to not see anymore:\u003c/p\u003e\n\u003cpre data-code-wrap=\"rust\"\u003e\u003ccode class=\"lang-rust\"\u003e\n    let result = unsafe {\n        PyBytes_FromStringAndSize(ptr::null(), output_len as Py_ssize_t)\n    };\n    if result.is_null() {\n        return ptr::null_mut();\n    }\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003einstead being something like:\u003c/p\u003e\n\u003cpre data-code-wrap=\"rust\"\u003e\u003ccode class=\"lang-rust\"\u003elet Ok(result) = PyBytes::from_string_and_size(ptr::null(), output_len as Py_ssize_t) else { return ptr::null_mut() } ;\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOr even, if there’s some way to make \u003ccode\u003ePyResult\u003c/code\u003e-y thing that could collapse the common CPython errors nicely (maybe not a possible thing!):\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003elet result = PyBytes::uninit_from_size(output_len)?\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eJust like \u003ccode\u003eBorrowedBuffer\u003c/code\u003e, it feels like there could be some single-field wrapper structs, and smart constructors that could operate in a “Rust API”-y level to work off of results\u003c/p\u003e\n\u003cp\u003eSimilarly in:\u003c/p\u003e\n\u003cpre data-code-wrap=\"python\"\u003e\u003ccode class=\"lang-python\"\u003elet dest_ptr = unsafe { PyBytes_AsString(result) };\nif dest_ptr.is_null() {\n    unsafe {\n        Py_DecRef(result);\n    }\n    return ptr::null_mut();\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI would have expected we could have some Rust-y wrapper on references that would give us that \u003ccode\u003ePy_DecRef\u003c/code\u003e call for free just through RAII. And maybe I’m too optimistic of Rust’s compiler toolchain, but if the wrapper was a single field struct, my impression is we would be able to get that for free.\u003c/p\u003e\n\u003cp\u003eThe thing I would assume is that within the extension module we could go full Rust API goodness, and it’s only really at the entry and exit points that one would need to go back to acknowledging CPython’s realities a bit more.\u003c/p\u003e\n\u003cp\u003eAnyways yeah, I’m very curious what the ‘pie in the sky most of the APIs used in the encoding example have a nice API’ version of the \u003ccode\u003eencode\u003c/code\u003e port looks like, because jumping from C to Rust could make the maintenance barrier seem way lower. We don’t have to port everything, just enough and enough smoke and mirrors to say “this is what it looks like in practice for this one method”. Because right now beyond the platform support tradeoffs etc, the PoC example is also presenting as generally more code, not less. In my mind’s eye we wouldn’t even have a tradeoff here, and the code \u003cem\u003ewould\u003c/em\u003e be simpler.\u003c/p\u003e","post_number":63,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T04:58:02.614Z","reply_count":1,"reply_to_post_number":62,"quote_count":0,"incoming_link_count":3,"reads":229,"readers_count":228,"score":65.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Raphael Gaschignard","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":136,"username":"emmatyping","name":"Emma Smith","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":14724,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/63","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277593,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-18T05:05:28.705Z","cooked":"\u003cp\u003eInteractions between Python objects and borrows is rather complicated. I don’t think this thread is a great place to go over detailed API design discussion as that isn’t the goal of the PEP, but I’d be happy to chat in another forum like the Python Discord or via DM. I will say a pie-in-the-sky API will look somewhat like an implementation using \u003ca href=\"https://pyo3.rs/\"\u003ePyO3\u003c/a\u003e. I can write up such an implementation and share that if people think it would informative.\u003c/p\u003e","post_number":64,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T05:05:28.705Z","reply_count":1,"reply_to_post_number":63,"quote_count":0,"incoming_link_count":1,"reads":213,"readers_count":212,"score":96.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://pyo3.rs/","internal":false,"reflection":false,"title":"Introduction - PyO3 user guide","clicks":6}],"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":14724,"username":"rtpg","name":"Raphael Gaschignard","avatar_template":"/user_avatar/discuss.python.org/rtpg/{size}/14068_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/64","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277594,"name":"Dan","username":"CEXT-Dan","avatar_template":"/user_avatar/discuss.python.org/cext-dan/{size}/18897_2.png","created_at":"2025-11-18T05:09:12.306Z","cooked":"\u003cp\u003e\u003ccode\u003e but eventually will become a required dependency of CPython\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eWhat does this mean for projects that embed CPython inside their C++ projects? Boost::python or pybind11?\u003c/p\u003e","post_number":65,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T05:09:12.306Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":214,"readers_count":213,"score":67.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Dan","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":28064,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/65","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277596,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-18T05:18:14.327Z","cooked":"\u003cp\u003eYou would need Rust to build any Rust extension modules you want in your embedded Python. I believe most embedding links to libpython so that would already be built and wouldn’t require Rust.\u003c/p\u003e","post_number":66,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T05:18:14.327Z","reply_count":1,"reply_to_post_number":65,"quote_count":0,"incoming_link_count":0,"reads":215,"readers_count":214,"score":92.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":28064,"username":"CEXT-Dan","name":"Dan","avatar_template":"/user_avatar/discuss.python.org/cext-dan/{size}/18897_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/66","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277597,"name":"Dan","username":"CEXT-Dan","avatar_template":"/user_avatar/discuss.python.org/cext-dan/{size}/18897_2.png","created_at":"2025-11-18T05:26:57.004Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"66\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eYou would need Rust to build any Rust extension modules you\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThank you, I know nothing of Rust, I see the word ‘dependency’ and I immediately get scared. Python and all the 3rd party modules must load into the host application’s process. In my case, I’m running Python inside AutoCAD for windows. If this is optional, or something that’s not going load some sort of runtime, or something that could cause issues, then great\u003c/p\u003e","post_number":67,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T05:26:57.004Z","reply_count":1,"reply_to_post_number":66,"quote_count":1,"incoming_link_count":4,"reads":216,"readers_count":215,"score":97.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Dan","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":28064,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/67","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277598,"name":"Dmitry","username":"monk-time","avatar_template":"/user_avatar/discuss.python.org/monk-time/{size}/516_2.png","created_at":"2025-11-18T05:40:40.383Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"merwok\" data-post=\"58\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/merwok/48/29_2.png\" class=\"avatar\"\u003e Éric Araujo:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCan you expand on this with some specific examples? I can only interpret this as a suggestion that Python releases would include uv and ruff, and it doesn’t make much sense to me.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWe do already ship with pip and pymanager, and there’s no denying that Rust/Go have created an expectation for modern languages to include quality standard dev tooling. And it is equally apparent that the best Python tooling for the next decade will be written in Rust\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277598-1\" id=\"footnote-ref-277598-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e. So I don’t see a future where Python also ships with such tools as outside the realm of possibility\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277598-2\" id=\"footnote-ref-277598-2\"\u003e[2]\u003c/a\u003e\u003c/sup\u003e.\u003c/p\u003e\n\u003cp\u003eSo I don’t see why not. This is clearly out of scope for this proposal, which is why I framed it only as a future possibility – one that would require its own difficult discussion and the platform/build support this PEP addresses. So I won’t pursue this further here.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277598-1\" class=\"footnote-item\"\u003e\u003cp\u003eregardless of if it’s still Astral tools like uv and ruff (or ty when it reaches stable) or something else like pyrefly \u003ca href=\"#footnote-ref-277598-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"footnote-277598-2\" class=\"footnote-item\"\u003e\u003cp\u003eI do believe replacing pip with uv might just be the most widely applauded move Python can make \u003ca href=\"#footnote-ref-277598-2\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":68,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T05:41:12.532Z","reply_count":0,"reply_to_post_number":58,"quote_count":1,"incoming_link_count":2,"reads":217,"readers_count":216,"score":67.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Dmitry","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":310,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/68","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277601,"name":"Jeong, YunWon","username":"youknowone","avatar_template":"/user_avatar/discuss.python.org/youknowone/{size}/19382_2.png","created_at":"2025-11-18T07:32:25.879Z","cooked":"\u003cp\u003eTo achieve good ergonomics, we’ll need not only \u003ccode\u003ecpython-sys\u003c/code\u003e but also another crate built on top of it that provides proper Rust abstractions. (Following naming conventions, it would be called \u003ccode\u003ecpython\u003c/code\u003e, but that name is already taken.)\u003c/p\u003e\n\u003cp\u003eRight now, the PEP only covers \u003ccode\u003ecpython-sys\u003c/code\u003e, but if we expect Rust ergonomics by this PEP, I think some consideration of this additional crate should also be included.\u003c/p\u003e","post_number":69,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T07:32:25.879Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":211,"readers_count":210,"score":111.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jeong, YunWon","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":29236,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/69","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277602,"name":"Michał Górny","username":"mgorny","avatar_template":"/user_avatar/discuss.python.org/mgorny/{size}/6517_2.png","created_at":"2025-11-18T07:39:20.436Z","cooked":"\u003cp\u003eThis would be unfortunate for Gentoo. We’re currently one of the few Linux distributions that aim to provide a reasonable working experience for people with older, weaker or more niche hardware that is not supported by Rust; and given that we’re largely talking about volunteers with no corporate backing, there is practically zero chance of ever porting LLVM and Rust to the relevant platforms, let alone providing long-term maintenance needed for keeping them working in projects with such a high rate of code churn.\u003c/p\u003e\n\u003cp\u003eI do realize that these platforms are not “supported” by CPython right now. Nevertheless, even though there historically were efforts to block building on them, they currently work and require comparatively little maintenance effort to keep them working. Admittedly, the wider Python ecosystem with its Rust adoption puts quite a strain on us and the user experience worsens every few months, we still manage to provide a working setup.\u003c/p\u003e\n\u003cp\u003eThe moment CPython starts requiring Rust, this will no longer be possible. Of course, we will still be able to provide older versions of CPython for a few years, at least until some major package starts requiring the newer Python version.\u003c/p\u003e\n\u003cp\u003eThat said, I do realize that we’re basically obsolete and it’s just a matter of time until some projects pulls the switch and force us to tell our users “sorry, we are no longer able to provide a working system for you”.\u003c/p\u003e\n\u003cp\u003eI don’t expect to change anything here. Just wanted to share the other perspective.\u003c/p\u003e","post_number":70,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T07:39:20.436Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":218,"readers_count":217,"score":423.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Michał Górny","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":22}],"moderator":false,"admin":false,"staff":false,"user_id":6712,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/70","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277603,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-18T08:27:56.307Z","cooked":"\u003cp\u003eI hope nobody will mind if my first post as a complete newcomer to the forum (though very far from one with Python or Rust) is letting my designed-to-win-trivia-games brain provide some context, clarifications, etc. for various things across the thread as a whole.\u003c/p\u003e\n\u003cp\u003eAlso, sorry for splitting this across multiple posts but, even after pessimizing all my citations to “Search for …” annotations, it was still claiming I had more than two links in it. (If this posts, then I guess it meant two reply-to-post embeds.)\u003c/p\u003e\n\u003caside class=\"quote quote-modified\" data-post=\"4\" data-topic=\"104906\"\u003e\n  \u003cdiv class=\"title\"\u003e\n    \u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n    \u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jacopoabramo/48/23840_2.png\" class=\"avatar\"\u003e\n    \u003cdiv class=\"quote-title__text-content\"\u003e\n      \u003ca href=\"https://discuss.python.org/t/pre-pep-rust-for-cpython/104906/4\"\u003ePre-PEP: Rust for CPython\u003c/a\u003e \u003ca class=\"badge-category__wrapper \" href=\"/c/core-dev/23\"\u003e\u003cspan data-category-id=\"23\" style=\"--category-badge-color: #25AAE2; --category-badge-text-color: #000000;\" data-drop-close=\"true\" class=\"badge-category --style-square \" title=\"Discussions relating to the development of Python (usage of Python should be discussed in the Python Help category, new ideas for Python to Ideas ).\"\u003e\u003cspan class=\"badge-category__name\"\u003eCore Development\u003c/span\u003e\u003c/span\u003e\u003c/a\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n  \u003cblockquote\u003e\n    I’m not a core dev nor expert in the internals of CPython, but I wanted to chime in to resonate with the question from \u003ca class=\"mention\" href=\"/u/megaing\"\u003e@MegaIng\u003c/a\u003e , pointing out though that it looks to me (as a Python user) that the community in general is more “approachable” in comparison to what happened during the integration of some Rust in the Linux kernel. \nOut of curiosity, what would this mean for both PyO3 and \u003ca href=\"https://github.com/RustPython/RustPython\" rel=\"noopener nofollow ugc\"\u003eRustPython\u003c/a\u003e? Have you reached out to the mantainers of the latter for feedback on how to approach this possibilit…\n  \u003c/blockquote\u003e\n\u003c/aside\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eFinally, if I recall rust applications tend to be a bit “bloated” in binary size, although there are some tricks that can be done at compile time to reduce this - what do these tricks imply on performance I have no idea.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThe answer depends on how long ago you remember that from. Rust’s history has been a tale of improving defaults on this front and I don’t know where you draw the line on “bloated”.\u003c/p\u003e\n\u003cp\u003eFor example, prior to Rust 1.28 (Search for \u003ccode\u003e“Announcing Rust 1.28” site:blog.rust-lang.org\u003c/code\u003e), some platforms embedded a copy of jemalloc but it now defaults to the system allocator.\u003c/p\u003e\n\u003cp\u003eRust still statically links its standard library, which is distributed as a precompiled “release + debug symbols” artifact to be shared between release and debug profiles and, for much of its life, there was no integrated support for stripping the resulting binaries. According to the Profiles (Search for \u003ccode\u003e“The Cargo Book” “Profiles” site:doc.rust-lang.org\u003c/code\u003e) section of The Cargo Book, \u003ccode\u003estrip = \"none\"\u003c/code\u003e is still the default setting for the release profile.\u003c/p\u003e\n\u003cp\u003eIf I do a simple \u003ccode\u003ecargo new\u003c/code\u003e and then \u003ccode\u003ecargo build --release\u003c/code\u003e the resulting “Hello, World!”, the binary is 463K, which drops to 354K if the debuginfo is stripped.\u003c/p\u003e\n\u003cp\u003eThat remaining size includes things like a statically linked copy of libunwind which wouldn’t be needed if using abort on panic as mentioned by Emma Smith… but I’m not up to speed on how much of that will get stripped out without rebuilding the standard library to ensure \u003cem\u003eit\u003c/em\u003e isn’t depending on them.\u003c/p\u003e\n\u003cp\u003e(See my later mention of how the Rust team are currently prioritizing stabilizing \u003ccode\u003e-Zbuild-std\u003c/code\u003e as part of letting “remove kernelspace Rust’s dependency on nightly features” shape much of the 2025 roadmap.)\u003c/p\u003e\n\u003cp\u003eBeyond that, one potentially relevant piece of tooling is dragonfire (\u003ccode\u003eamyspark/dragonfire\u003c/code\u003e on the FreeDesktop Gitlab) as introduced in Linking and shrinking Rust static libraries: a tale of fire. (Search for \u003ccode\u003e“Linking and shrinking Rust static libraries: a tale of fire” site:centricular.com\u003c/code\u003e) (Which is concerned with deduplicating the standard library when building Rust-based plugins as static libraries.)\u003c/p\u003e\n\u003caside class=\"quote\" data-post=\"9\" data-topic=\"104906\"\u003e\n  \u003cdiv class=\"title\"\u003e\n    \u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n    \u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/namorniradnug/48/32531_2.png\" class=\"avatar\"\u003e\n    \u003cdiv class=\"quote-title__text-content\"\u003e\n      \u003ca href=\"https://discuss.python.org/t/pre-pep-rust-for-cpython/104906/9\"\u003ePre-PEP: Rust for CPython\u003c/a\u003e \u003ca class=\"badge-category__wrapper \" href=\"/c/core-dev/23\"\u003e\u003cspan data-category-id=\"23\" style=\"--category-badge-color: #25AAE2; --category-badge-text-color: #000000;\" data-drop-close=\"true\" class=\"badge-category --style-square \" title=\"Discussions relating to the development of Python (usage of Python should be discussed in the Python Help category, new ideas for Python to Ideas ).\"\u003e\u003cspan class=\"badge-category__name\"\u003eCore Development\u003c/span\u003e\u003c/span\u003e\u003c/a\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n  \u003cblockquote\u003e\n    Doesn’t “C“ in the name of “CPython“ means “C programming language”? If so, shouldn’t the project be eventually renamed when a significant part of it is (re)written in Rust? \n/joke, but who knows\n  \u003c/blockquote\u003e\n\u003c/aside\u003e\n\n\u003cp\u003eJust declare “CPython” to be referring to the stable ABI exposed rather than the implementation language.\u003c/p\u003e\n\u003cp\u003eAfter all, the \u003ccode\u003eabi_stable\u003c/code\u003e crate for dynamically linking higher-level Rust constructs does it by marshalling through the C ABI.\u003c/p\u003e","post_number":71,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T08:27:56.307Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":221,"readers_count":220,"score":123.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/71","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277604,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-18T08:28:34.839Z","cooked":"\u003caside class=\"quote quote-modified\" data-post=\"16\" data-topic=\"104906\"\u003e\n  \u003cdiv class=\"title\"\u003e\n    \u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n    \u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/pganssle/48/245_2.png\" class=\"avatar\"\u003e\n    \u003cdiv class=\"quote-title__text-content\"\u003e\n      \u003ca href=\"https://discuss.python.org/t/pre-pep-rust-for-cpython/104906/16\"\u003ePre-PEP: Rust for CPython\u003c/a\u003e \u003ca class=\"badge-category__wrapper \" href=\"/c/core-dev/23\"\u003e\u003cspan data-category-id=\"23\" style=\"--category-badge-color: #25AAE2; --category-badge-text-color: #000000;\" data-drop-close=\"true\" class=\"badge-category --style-square \" title=\"Discussions relating to the development of Python (usage of Python should be discussed in the Python Help category, new ideas for Python to Ideas ).\"\u003e\u003cspan class=\"badge-category__name\"\u003eCore Development\u003c/span\u003e\u003c/span\u003e\u003c/a\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n  \u003cblockquote\u003e\n    I have long liked the idea of doing something like this, and as someone who always introduces memory leaks and segfaults and such any time he writes any kind of C extension code, I welcome the idea of more modern zero-cost abstractions for that\u003ca href=\"#footnote-277497-1\" id=\"footnote-ref-277497-1\"\u003e[1]\u003c/a\u003e. \nHowever, one cost I think that has not been mentioned here is the effect that this could have on build times. In my experience, compile times for Rust (and C++) are much slower than for C. On my 2019 Thinkpad T480, from a fresh clone of CPython, I ca…\n  \u003c/blockquote\u003e\n\u003c/aside\u003e\n\n\u003cblockquote\u003e\n\u003cp\u003eI guess the question is a dual one: can we write Rust in a way that it will not cause build times to explode and if we cannot, is the plan to keep the scope of Rust in CPython to a level where building is still very accessible?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI don’t see why it needs to be slow.\u003c/p\u003e\n\u003cp\u003eAs laid out in The Rust compiler isn’t slow; we are. (Search for \u003ccode\u003e\"The Rust compiler isn't slow; we are.\" site:blog.kodewerx.org\u003c/code\u003e), \u003ccode\u003erustc\u003c/code\u003e is already faster than compiling C++ with GCC and the reason builds are slow has more to do with how much the Rust ecosystem enjoys the creature comforts of macros and monomorphized generics.\u003c/p\u003e\n\u003caside class=\"quote\" data-post=\"18\" data-topic=\"104906\"\u003e\n  \u003cdiv class=\"title\"\u003e\n    \u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n    \u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jamestwebber/48/12799_2.png\" class=\"avatar\"\u003e\n    \u003cdiv class=\"quote-title__text-content\"\u003e\n      \u003ca href=\"https://discuss.python.org/t/pre-pep-rust-for-cpython/104906/18\"\u003ePre-PEP: Rust for CPython\u003c/a\u003e \u003ca class=\"badge-category__wrapper \" href=\"/c/core-dev/23\"\u003e\u003cspan data-category-id=\"23\" style=\"--category-badge-color: #25AAE2; --category-badge-text-color: #000000;\" data-drop-close=\"true\" class=\"badge-category --style-square \" title=\"Discussions relating to the development of Python (usage of Python should be discussed in the Python Help category, new ideas for Python to Ideas ).\"\u003e\u003cspan class=\"badge-category__name\"\u003eCore Development\u003c/span\u003e\u003c/span\u003e\u003c/a\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n  \u003cblockquote\u003e\n    In my experience incremental Rust builds are also very fast–the initial setup (including downloading and building all the dependencies) can be slow, but it’s able to do fast incremental builds just fine. \nAlso, there’s a big difference between debug and release mode–building in debug mode is way faster. I would be surprised if this impacted iteration time unless you’re trying to rebuild the world every time.\n  \u003c/blockquote\u003e\n\u003c/aside\u003e\n\n\u003cp\u003e…and they’re working on making it faster still. Aside from “Relink, Don’t Rebuild”, as mentioned by Jubilee, there are two bottlenecks which disproportionately affect incremental rebuilds right now:\u003c/p\u003e\n\u003cp\u003eFirst, while there’s parallelism between crates and in the LLVM backend, the \u003ccode\u003erustc\u003c/code\u003e frontend is single-threaded. Work is in progress and testable in nightly (Search for \u003ccode\u003e“Faster compilation with the parallel front-end in nightly” site:blog.rust-lang.org\u003c/code\u003e) for making the frontend multithreaded.\u003c/p\u003e\n\u003cp\u003eThey’re also working on rustc_codegen_cranelift (\u003ccode\u003erust-lang/rustc_codegen_cranelift\u003c/code\u003e on GitHub) which is a non-LLVM backend for rustc which makes more Go-like trade-offs for compile-time vs. runtime performance and is intended to eventually become the default for the debug profile.\u003c/p\u003e\n\u003cp\u003eSecond, linking. They’ve been rolling out LLD as a faster default linker on a platform-by-platform basis and it came to Linux in 1.90. (Search for \u003ccode\u003e“Announcing Rust 1.90.0” site:blog.rust-lang.org\u003c/code\u003e)\u003c/p\u003e\n\u003cp\u003eBeyond that, \u003ccode\u003emold\u003c/code\u003e is faster still (it’s what I use on my system) and wild (\u003ccode\u003edavidlattimore/wild\u003c/code\u003e on GitHub), yet faster, is being developed with an eye toward becoming default for debug builds alongside rustc_codegen_cranelift. (i.e. Doesn’t cover all the needs of a \u003cem\u003efully\u003c/em\u003e general-purpose linker, but does make debug builds for the majority of them very quick.)\u003c/p\u003e","post_number":72,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T08:48:14.044Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":216,"readers_count":215,"score":147.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/72","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277605,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-18T08:29:38.639Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eI claim that one of the major reasons for this failure is that cargo is almost unique among build systems in providing absolutely no structured mechanisms for:\u003cbr\u003e\n(1) communicating with other package build scripts in the same dependency graph\u003cbr\u003e\n(2) communicating with the downstream user who invokes cargo (such as a distro packager, or a github actions pipeline)\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThis is a known problem that’s been discussed more or less since v1.0 came out in 2015 but more pressing issues keep jumping ahead of it in the queue.\u003c/p\u003e\n\u003cp\u003e(eg. The 2025H2 roadmap is prioritizing stabilizing an MVP of \u003ccode\u003e-Zbuild-std\u003c/code\u003e so that embedded and low-level projects like Rust for Linux (i.e. kernelspace Rust) don’t need to use either a nightly compiler or the secret switch to use API-unstable features on stable channel.)\u003c/p\u003e\n\u003cp\u003eIf you want to search up existing discussions, what was done to incorporate Rust builds into Bazel got mentioned a lot.\u003c/p\u003e\n\u003caside class=\"quote\" data-post=\"30\" data-topic=\"104906\"\u003e\n  \u003cdiv class=\"title\"\u003e\n    \u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n    \u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/snoopj/48/7944_2.png\" class=\"avatar\"\u003e\n    \u003cdiv class=\"quote-title__text-content\"\u003e\n      \u003ca href=\"https://discuss.python.org/t/pre-pep-rust-for-cpython/104906/30\"\u003ePre-PEP: Rust for CPython\u003c/a\u003e \u003ca class=\"badge-category__wrapper \" href=\"/c/core-dev/23\"\u003e\u003cspan data-category-id=\"23\" style=\"--category-badge-color: #25AAE2; --category-badge-text-color: #000000;\" data-drop-close=\"true\" class=\"badge-category --style-square \" title=\"Discussions relating to the development of Python (usage of Python should be discussed in the Python Help category, new ideas for Python to Ideas ).\"\u003e\u003cspan class=\"badge-category__name\"\u003eCore Development\u003c/span\u003e\u003c/span\u003e\u003c/a\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n  \u003cblockquote\u003e\n    Nothing in particular. PEP 11’s requirements for each tier’s support are broad enough (language-agnostic enough) that it’s very possible that no changes are required, but I did raise my eyebrows at the intersection with Rust’s own support tiers.\n  \u003c/blockquote\u003e\n\u003c/aside\u003e\n\n\u003cp\u003eIt should be noted that, if I understand \u003ccode\u003e“GCC Testing Efforts” site:gnu.org\u003c/code\u003e correctly, GCC’s support for all platforms would count as “Tier 3, at varying degrees of stubbornness” by Rust testing standards since I don’t see any mention of any of the “Current efforts” entries being integrated to the same “CI on every push and will block merging into \u003ccode\u003emain\u003c/code\u003e if it fails” degree.\u003c/p\u003e\n\u003cp\u003eRust’s approach to Tiers 1 and 2 leans in the direction of “We don’t trust our testing to be sufficient for Continuous Deployment, but we’ll do it as diligently as if we were pushing directly to stable channel”.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eEDIT:\u003c/strong\u003e …and, apparently, there’s also a limit on number of posts for new users so I can’t get it all in without breaking the rule about no substantial edits. I’ll drop an in-reply-to-embed and add a \u003ca href=\"https://gist.github.com/ssokolow/2850af89926fd5843ed829a16693e930\" rel=\"noopener nofollow ugc\"\u003eGitHub Gist\u003c/a\u003e containing the source for the entire thing as it was before I started making any changes to try to crunch it in.\u003c/p\u003e\n\u003cp\u003eIn total, the posts being replied to, as represented in the auto-updating Discourse permalink URLs, are 4, 9/12, 15, 16, 18, 19, 30, and 38, and a few I forgot to grab URLs for while blockquoting, and the bits which don’t fit include an answer to the concern about Trusting Trust attacks, a clarification about “Rust guarantees that code outside an \u003ccode\u003eunsafe {}\u003c/code\u003e block is safe”, a mention of \u003ccode\u003e#[repr(transparent)]\u003c/code\u003e, and a few other little things.\u003c/p\u003e","post_number":73,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T08:53:00.271Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":5,"reads":215,"readers_count":214,"score":147.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":4,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://gist.github.com/ssokolow/2850af89926fd5843ed829a16693e930","internal":false,"reflection":false,"title":"Reply to https://discuss.python.org/t/pre-pep-rust-for-cpython/104906 · GitHub","clicks":6}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/73","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277606,"name":"GalaxySnail","username":"GalaxySnail","avatar_template":"/user_avatar/discuss.python.org/galaxysnail/{size}/5655_2.png","created_at":"2025-11-18T08:30:27.638Z","cooked":"\u003cp\u003eIf python cannot be built without rust in the future, I believe the difficulties this would bring to bootstrapping are being underestimated. Python is such a widely used programming language that many projects have started to use python during the build stage. For example, glibc and gcc require python to build (\u003ca href=\"https://github.com/fosslinux/live-bootstrap/commit/69fdc27d64ec56ad59b83b99aab0747c9d9f81ed\" rel=\"noopener nofollow ugc\"\u003ehttps://github.com/fosslinux/live-bootstrap/commit/69fdc27d64ec56ad59b83b99aab0747c9d9f81ed\u003c/a\u003e). If python depends on rust, it would mean that all projects using the meson build system would also need rust to bootstrap (I know muon can be a replacement, but muon isn’t 100% compatible with meson). The live-bootstrap project has already completed the bootstrap of python, and it currently requires a total of 11 builds to obtain CPython 3.11.1, including regenerating all generated code (\u003ca href=\"https://github.com/fosslinux/live-bootstrap/blob/master/parts.rst#159python-201\" rel=\"noopener nofollow ugc\"\u003ehttps://github.com/fosslinux/live-bootstrap/blob/master/parts.rst#159python-201\u003c/a\u003e). And even when using mrustc to build rust 1.74.0, it still requires 18 builds to obtain rust 1.91, especially since the time required to build rustc is much longer than CPython. Moreover, rust releases a new version every 6 weeks, so this number will grow quickly.\u003c/p\u003e\n\u003cp\u003eCompilation time is also an issue. Although incremental builds in debug mode may be fast, this is not always possible, for example when doing distribution packaging, when using \u003ccode\u003egit bisect\u003c/code\u003e, or when debugging bugs that only reproduce in release mode. Currently, a full CPython build is still relatively fast, and I agree that it would be acceptable if the full build time were up to 2x slower.\u003c/p\u003e\n\u003cp\u003eRegarding the previously mentioned issue with \u003ccode\u003eos.fork\u003c/code\u003e, I am not sure whether using fork in a single-threaded process is safe. If using fork in a single-threaded process would still break rust’s safety guarantees, then \u003ccode\u003eos.fork\u003c/code\u003e and \u003ccode\u003emultiprocessing.get_context(\"fork\")\u003c/code\u003e would become completely unusable, and that would break many third-party libraries that depend on it.\u003c/p\u003e\n\u003cp\u003eOn the other hand, rust occasionally introduces breaking changes outside of editions, for example \u003ca href=\"https://github.com/rust-lang/rust/issues/127343\" rel=\"noopener nofollow ugc\"\u003ehttps://github.com/rust-lang/rust/issues/127343\u003c/a\u003e, and the potential impact of such risks on CPython should be considered carefully.\u003c/p\u003e","post_number":74,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T08:30:27.638Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":6,"reads":218,"readers_count":217,"score":303.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"GalaxySnail","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/rust-lang/rust/issues/127343","internal":false,"reflection":false,"title":"regression: type annotations needed for Box\u003c_\u003e · Issue #127343 · rust-lang/rust · GitHub","clicks":20},{"url":"https://github.com/fosslinux/live-bootstrap/commit/69fdc27d64ec56ad59b83b99aab0747c9d9f81ed","internal":false,"reflection":false,"title":"Merge pull request #535 from eduardosm/gcc-15.2.0 · fosslinux/live-bootstrap@69fdc27 · GitHub","clicks":6},{"url":"https://github.com/fosslinux/live-bootstrap/blob/master/parts.rst#159python-201","internal":false,"reflection":false,"title":"live-bootstrap/parts.rst at master · fosslinux/live-bootstrap · GitHub","clicks":2}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":15}],"moderator":false,"admin":false,"staff":false,"user_id":5874,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/74","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277609,"name":"David Hewitt","username":"davidhewitt","avatar_template":"/user_avatar/discuss.python.org/davidhewitt/{size}/3502_2.png","created_at":"2025-11-18T09:21:31.306Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"Eclips4\" data-post=\"32\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/eclips4/48/32292_2.png\" class=\"avatar\"\u003e Eclips4:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCan we integrate \u003ca href=\"https://github.com/rust-lang/miri\" rel=\"noopener nofollow ugc\"\u003eMIRI\u003c/a\u003e into our workflow?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI spoke to some of the Miri maintainers about running PyO3 through Miri a while ago, I believe back then there were limitations due to all the C FFI being opaque to Miri. I vaguely recall the conversation concluded those limitations could be lifted, would just need some work. I’m not aware of anything to make me think that work has been done yet.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"steve.dower\" data-post=\"38\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e steve.dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI’d rather see people discussing things like how Rust provides any protection/benefit at all when we have to interop \u003cem\u003eeverything\u003c/em\u003e with “unsafe” C code at a level \u003cem\u003ebelow\u003c/em\u003e anywhere PyO3 could help (which is only safe because it relies on our public C API, which is the safety barrier with guaranteed semantics that can be mapped into Rust’s semantics).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAt the moment PyO3 has two abstractions, the low level FFI which this pre-PEP proposes generating with bindgen and the high-level abstractions which are totally safe. I’ve wondered about a third level which sits between the two; it would still use \u003ccode\u003eunsafe extern “C”\u003c/code\u003e ABI and call the C symbols directly, but the types for input \u0026amp; output could encode the possible states, e.g. \u003ccode\u003eBorrowedPtr(*mut PyObject)\u003c/code\u003e or even \u003ccode\u003eOption\u0026lt;NonNull\u0026lt;PyObject\u0026gt;\u0026gt;\u003c/code\u003e to force null checking. As long as these are layout identical with the actual C type passed through the FFI, it would just improve type safety without actually introducing any overheads or much “high level” API. There is a lot of scope to experiment here.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"Gankra\" data-post=\"41\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/gankra/48/32546_2.png\" class=\"avatar\"\u003e Gankra:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIn practical specific terms, it’s often reported that Rust often makes implicit ownership/lifetime constraints in C APIs explicit and easier to work with. The Rust bindings to C functions can include lifetimes that enforce these contracts (and yes a \u003cem\u003elot\u003c/em\u003e of C APIs map onto lifetimes and ownership well).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI agree fully with this - in particular a huge win is that you don’t need to remember to call \u003ccode\u003ePy_Clear\u003c/code\u003e / \u003ccode\u003ePy_DecRef\u003c/code\u003e / \u003ccode\u003ePy_XDecRef\u003c/code\u003e on every error pathway, RAII abstractions can just solve this for you. Your point here also speaks to what I was musing about in the point above.\u003c/p\u003e\n\u003caside class=\"quote group-committers quote-modified\" data-username=\"barry\" data-post=\"49\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/barry/48/42_2.png\" class=\"avatar\"\u003e barry:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe former is surely a smaller number, and my guess is that even fewer are comfortable in Rust \u003cem\u003etoday\u003c/em\u003e .\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAbsolutely true that while many core devs may not currently be comfortable in Rust, there is a lot of anectotal evidence that after an initial learning curve many people find Rust relatively easy to feel productive and comfortable in. (Google’s experience with Android strongly supports this, for example.)\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"CEXT-Dan\" data-post=\"67\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/cext-dan/48/18897_2.png\" class=\"avatar\"\u003e CEXT-Dan:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThank you, I know nothing of Rust, I see the word ‘dependency’ and I immediately get scared. Python and all the 3rd party modules must load into the host application’s process. In my case, I’m running Python inside AutoCAD for windows. If this is optional, or something that’s not going load some sort of runtime, or something that could cause issues, then great\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eMany Python packages are already built in Rust, they’re precompiled and uploaded to PyPI as binary distributions which users can use without any awareness they’re built in Rust. CPython using Rust as an implementation detail would be no different for anyone not building from source.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"mgorny\" data-post=\"70\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/mgorny/48/6517_2.png\" class=\"avatar\"\u003e mgorny:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAdmittedly, the wider Python ecosystem with its Rust adoption puts quite a strain on us and the user experience worsens every few months, we still manage to provide a working setup.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003ca class=\"mention\" href=\"/u/mgorny\"\u003e@mgorny\u003c/a\u003e the Python ecosystem user experience is important to me and I’m aware there have been pains as tooling has adopted to Rust support. Gentoo particularly runs into these pains due to so much from-source building and extensive hardware support.\u003c/p\u003e\n\u003cp\u003eI’m sure I’m not aware of every possible configuration, please always do feel free to ping me / direct me at things and I will do my best to help. I build PyO3 / integrate Python \u0026amp; Rust to empower more people to write software, not to alienate.\u003c/p\u003e","post_number":75,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T09:21:31.306Z","reply_count":2,"reply_to_post_number":32,"quote_count":6,"incoming_link_count":6,"reads":228,"readers_count":227,"score":219.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"David Hewitt","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":7}],"moderator":false,"admin":false,"staff":false,"user_id":3448,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/75","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277610,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-18T09:33:34.110Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eOn the other hand, rust occasionally introduces breaking changes outside of editions, for example\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI don’t think it’s fair to call Rust out for that specifically, given that it’s not a Rust-specific problem and that, as demonstrated in places like graydon2’s \u003ca href=\"https://graydon2.dreamwidth.org/317484.html\" rel=\"noopener nofollow ugc\"\u003eretrobootstrapping rust for some reason\u003c/a\u003e, my prior mention of which got spilled into the GitHub Gist because “New users can’t…”,\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\"Modern clang and gcc won’t compile the LLVM used back then (C++ has changed too much – and I tried several CXXFLAGS=-std=c++NN variants!)\u003c/li\u003e\n\u003cli\u003eModern gcc won’t even compile the gcc used back then (apparently C as well!)\u003c/li\u003e\n\u003cli\u003eModern ocaml won’t compile rustboot (ditto)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eWhile I don’t have numbers, given that Rust’s regression suite became a bottleneck on development before Microsoft started donating Azure time, and that they have Crater (a bot for testing proposed changes against slices of the public crate registry up to and including “all of it”), I suspect Rust introduces breaking changes less than C and C++ do.\u003c/p\u003e","post_number":76,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T09:35:09.405Z","reply_count":0,"reply_to_post_number":74,"quote_count":0,"incoming_link_count":8,"reads":216,"readers_count":215,"score":112.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://graydon2.dreamwidth.org/317484.html","internal":false,"reflection":false,"title":"Captcha Check","clicks":7}],"read":true,"user_title":null,"reply_to_user":{"id":5874,"username":"GalaxySnail","name":"GalaxySnail","avatar_template":"/user_avatar/discuss.python.org/galaxysnail/{size}/5655_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/76","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277613,"name":"Sergey \"Shnatsel\" Davidoff","username":"Shnatsel","avatar_template":"/user_avatar/discuss.python.org/shnatsel/{size}/32574_2.png","created_at":"2025-11-18T10:26:36.392Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Rosuav\" data-post=\"15\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/rosuav/48/3429_2.png\" class=\"avatar\"\u003e Rosuav:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eopen questions such as the impact of a potential \u003ca href=\"https://aeb.win.tue.nl/linux/hh/thompson/trust.html\" rel=\"noopener nofollow ugc\"\u003eKen Thompson style compiler hack\u003c/a\u003e. Will CPython lose trust by becoming dependent on a single specific compiler that might be subject to such a hack?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThere is an alternative Rust compiler implementation in C++, \u003ca href=\"https://github.com/thepowersgang/mrustc/\" rel=\"noopener nofollow ugc\"\u003emrustc\u003c/a\u003e, that implements just enough Rust to compile the official Rust the compiler without relying on it in any capacity. The official Rust compiler bootstrapped both ways (original chain and mrustc) produce identical binaries, which is sufficient to prove the absence of the Ken Thompson hack.\u003c/p\u003e","post_number":77,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T10:26:36.392Z","reply_count":0,"reply_to_post_number":15,"quote_count":1,"incoming_link_count":4,"reads":216,"readers_count":215,"score":152.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Sergey \"Shnatsel\" Davidoff","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/thepowersgang/mrustc/","internal":false,"reflection":false,"title":"GitHub - thepowersgang/mrustc: Alternative rust compiler (re-implementation)","clicks":4}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":80035,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/77","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277614,"name":"Sam James","username":"thesamesam","avatar_template":"/user_avatar/discuss.python.org/thesamesam/{size}/10616_2.png","created_at":"2025-11-18T10:42:34.330Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eIt should be noted that, if I understand \u003ccode\u003e“GCC Testing Efforts” site:gnu.org\u003c/code\u003e correctly, GCC’s support for all platforms would count as “Tier 3, at varying degrees of stubbornness” by Rust testing standards since I don’t see any mention of any of the “Current efforts” entries being integrated to the same “CI on every push and will block merging into \u003ccode\u003emain\u003c/code\u003e if it fails” degree.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRust’s approach to Tiers 1 and 2 leans in the direction of “We don’t trust our testing to be sufficient for Continuous Deployment, but we’ll do it as diligently as if we were pushing directly to stable channel”.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI don’t really want to derail this thread into a discussion on models of testing, but a similar discussion was had the other week on \u003ca href=\"https://lobste.rs/s/xj4ncv/hard_rust_requirements_from_may_onward#c_fwf8lw\" rel=\"noopener nofollow ugc\"\u003elobste.rs\u003c/a\u003e. I don’t think it’s a accurate summary to say Rust’s ‘testing standards’ just mean ‘Tier 3’ for GCC.\u003c/p\u003e","post_number":78,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T10:42:34.330Z","reply_count":1,"reply_to_post_number":73,"quote_count":0,"incoming_link_count":5,"reads":224,"readers_count":223,"score":73.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Sam James","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://lobste.rs/s/xj4ncv/hard_rust_requirements_from_may_onward#c_fwf8lw","internal":false,"reflection":false,"title":"Hard Rust requirements from May onward | Lobsters","clicks":11}],"read":true,"user_title":null,"reply_to_user":{"id":80027,"username":"ssokolow","name":"Stephan Sokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":10221,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/78","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277616,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-18T10:45:00.902Z","cooked":"\u003cp\u003eThank you. Is there any chance that clarification could be added to \u003ca href=\"https://www.gnu.org/software/gcc/testing/\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\"\u003eGCC Testing Efforts - GNU Project\u003c/a\u003e since that’s what shows up in search results?\u003c/p\u003e","post_number":79,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T10:45:00.902Z","reply_count":1,"reply_to_post_number":78,"quote_count":0,"incoming_link_count":0,"reads":219,"readers_count":218,"score":62.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://www.gnu.org/software/gcc/testing/","internal":false,"reflection":false,"title":"GCC Testing Efforts - GNU Project","clicks":6}],"read":true,"user_title":null,"reply_to_user":{"id":10221,"username":"thesamesam","name":"Sam James","avatar_template":"/user_avatar/discuss.python.org/thesamesam/{size}/10616_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/79","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277617,"name":"Sam James","username":"thesamesam","avatar_template":"/user_avatar/discuss.python.org/thesamesam/{size}/10616_2.png","created_at":"2025-11-18T10:45:32.617Z","cooked":"\u003cp\u003eIn the thread, I did promise to work on improving documentation, so yes, it will be done.\u003c/p\u003e\n\u003cp\u003eEDIT: Filed \u003ca href=\"https://gcc.gnu.org/PR122742\" rel=\"noopener nofollow ugc\"\u003ePR122742\u003c/a\u003e for that.\u003c/p\u003e","post_number":80,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T19:03:36.907Z","reply_count":0,"reply_to_post_number":79,"quote_count":0,"incoming_link_count":2,"reads":217,"readers_count":216,"score":52.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Sam James","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://gcc.gnu.org/PR122742","internal":false,"reflection":false,"title":"Making sure you're not a bot!","clicks":4}],"read":true,"user_title":null,"reply_to_user":{"id":80027,"username":"ssokolow","name":"Stephan Sokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":10221,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/80","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277620,"name":"Marc-André Lemburg","username":"malemburg","avatar_template":"/user_avatar/discuss.python.org/malemburg/{size}/50_2.png","created_at":"2025-11-18T11:07:55.689Z","cooked":"\u003cp\u003eI’m a firm -1 on proceeding in this direction. The reference implementation \u003cstrong\u003eCPython\u003c/strong\u003e is called CPython for a reason, after all, \u003cimg src=\"https://emoji.discourse-cdn.com/apple/slightly_smiling_face.png?v=15\" title=\":slightly_smiling_face:\" class=\"emoji\" alt=\":slightly_smiling_face:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003cp\u003eBy adding additional requirements, we make CPython less portable, maintenance a lot harder and complicate adoption in spaces where you need to recompile the whole package to other platforms such as WASM.\u003c/p\u003e\n\u003cp\u003eBesides, there already is a \u003ca href=\"https://github.com/RustPython/RustPython\"\u003eGitHub - RustPython/RustPython: A Python Interpreter written in Rust\u003c/a\u003e effort. I’m sure they’d love to get more support.\u003c/p\u003e\n\u003cp\u003eIf you want to use Rust for writing optional extensions, that’s perfectly fine, but please upload them to PyPI instead of requiring Rust in the CPython core.\u003c/p\u003e","post_number":81,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T11:07:55.689Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":212,"readers_count":211,"score":416.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Marc-André Lemburg","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/RustPython/RustPython","internal":false,"reflection":false,"title":"GitHub - RustPython/RustPython: A Python Interpreter written in Rust","clicks":11}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":24}],"moderator":false,"admin":false,"staff":false,"user_id":47,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/81","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277621,"name":"Jacopo Abramo","username":"jacopoabramo","avatar_template":"/user_avatar/discuss.python.org/jacopoabramo/{size}/23840_2.png","created_at":"2025-11-18T11:19:03.755Z","cooked":"\u003cp\u003eMembers of both the RustPython community and PyO3 already expressed their interest in this approach, as already pointed out from the previous replies on this thread.\u003c/p\u003e","post_number":82,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T11:19:03.755Z","reply_count":0,"reply_to_post_number":81,"quote_count":0,"incoming_link_count":1,"reads":212,"readers_count":211,"score":46.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jacopo Abramo","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":47,"username":"malemburg","name":"Marc-André Lemburg","avatar_template":"/user_avatar/discuss.python.org/malemburg/{size}/50_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":43595,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/82","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277622,"name":"Antoine Pitrou","username":"pitrou","avatar_template":"/user_avatar/discuss.python.org/pitrou/{size}/28_2.png","created_at":"2025-11-18T11:24:33.496Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"davidhewitt\" data-post=\"75\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/davidhewitt/48/3502_2.png\" class=\"avatar\"\u003e David Hewitt:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI spoke to some of the Miri maintainers about running PyO3 through Miri a while ago, I believe back then there were limitations due to all the C FFI being opaque to Miri. I vaguely recall the conversation concluded those limitations could be lifted, would just need some work. I’m not aware of anything to make me think that work has been done yet.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAnd conversely, would a ASAN/UBSAN build of CPython be able to see/instrument the Rust parts? Otherwise, not seeing the full program execution could impair the ability of the instrumentation to find bugs at runtime.\u003c/p\u003e","post_number":83,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T11:24:33.496Z","reply_count":1,"reply_to_post_number":75,"quote_count":1,"incoming_link_count":5,"reads":217,"readers_count":216,"score":88.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Antoine Pitrou","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":23,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/83","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277623,"name":"Josh Cannon","username":"thejcannon","avatar_template":"/user_avatar/discuss.python.org/thejcannon/{size}/23759_2.png","created_at":"2025-11-18T11:49:37.806Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"barry\" data-post=\"49\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/barry/48/42_2.png\" class=\"avatar\"\u003e barry:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOne of the soft consequences I’m especially interested in is whether this attracts more or fewer core developers contributing to the Rust bits than the C bits.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAnecdata: I don’t plan on writing any (more) C code, so outside of all the non-coding ways that exist, I don’t see myself ever meaningfully becoming a contributor to CPython (‘s core).\u003c/p\u003e\n\u003cp\u003eOn the other hand, I can’t write enough Rust to scratch the itch.\u003c/p\u003e\n\u003cp\u003eAnd I don’t think I’m particularly unique or special here \u003cimg src=\"https://emoji.discourse-cdn.com/apple/wink.png?v=15\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e","post_number":84,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T11:49:37.806Z","reply_count":0,"reply_to_post_number":49,"quote_count":1,"incoming_link_count":6,"reads":214,"readers_count":213,"score":222.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Josh Cannon","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":8}],"moderator":false,"admin":false,"staff":false,"user_id":10330,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/84","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277625,"name":"David Hewitt","username":"davidhewitt","avatar_template":"/user_avatar/discuss.python.org/davidhewitt/{size}/3502_2.png","created_at":"2025-11-18T12:00:14.672Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"pitrou\" data-post=\"83\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/pitrou/48/28_2.png\" class=\"avatar\"\u003e pitrou:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAnd conversely, would a ASAN/UBSAN build of CPython be able to see/instrument the Rust parts?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eASAN can definitely work with the caveat that this is a nightly Rust feature at present - \u003ca href=\"https://doc.rust-lang.org/unstable-book/compiler-flags/sanitizer.html#addresssanitizer\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\"\u003esanitizer - The Rust Unstable Book\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eUBSAN - I’m less sure, I suspect that the C parts would be instrumented, the Rust parts would not, I would think this would not impact getting meaningful value from the sanitizer.\u003c/p\u003e","post_number":85,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T12:00:14.672Z","reply_count":0,"reply_to_post_number":83,"quote_count":1,"incoming_link_count":3,"reads":221,"readers_count":220,"score":118.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"David Hewitt","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://doc.rust-lang.org/unstable-book/compiler-flags/sanitizer.html#addresssanitizer","internal":false,"reflection":false,"title":"sanitizer - The Rust Unstable Book","clicks":4}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":3448,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/85","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277628,"name":"Kivooeo","username":"Kivooeo","avatar_template":"/user_avatar/discuss.python.org/kivooeo/{size}/32580_2.png","created_at":"2025-11-18T12:30:12.238Z","cooked":"\u003cp\u003eHi from the Rust Compiler Team!\u003c/p\u003e\n\u003cp\u003eAs someone who programmed in Python for several years previously, I’m really excited to see this!\u003c/p\u003e\n\u003cp\u003eI haven’t read the entire thread, but I have a minor concern that I previously raised personally with Kirill and wanted to bring here as well. After reading the PEP, one question remains regarding the specific version of Rust that will be used in Python. While Rust maintains excellent stability for the vast majority of users, large foundational projects like CPython often benefit from more conservative versioning strategies. Following approaches used by other large projects, would it make sense to pin specific Rust versions and update deliberately.\u003c/p\u003e\n\u003cp\u003eAdditionally, the policy around nightly features isn’t entirely clear. These often contain some quality-of-life improvements that might assist development. Within the Rust compiler itself, we regularly rely on many nightly features, so their treatment remains an open question from the PEP.\u003c/p\u003e\n\u003cp\u003eThese are the main points that I feel still need clarification after reading the proposal. Thank you for your tremendous work on integrating Rust into Python – it will be very exciting to watch this progress!\u003c/p\u003e","post_number":86,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T14:19:28.015Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":4,"reads":222,"readers_count":221,"score":258.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Kivooeo","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":11}],"moderator":false,"admin":false,"staff":false,"user_id":80044,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/86","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277633,"name":"Michał Górny","username":"mgorny","avatar_template":"/user_avatar/discuss.python.org/mgorny/{size}/6517_2.png","created_at":"2025-11-18T12:55:29.578Z","cooked":"\u003caside class=\"quote no-group quote-modified\" data-username=\"davidhewitt\" data-post=\"75\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/davidhewitt/48/3502_2.png\" class=\"avatar\"\u003e davidhewitt:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote no-group\" data-username=\"mgorny\" data-post=\"70\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/mgorny/48/6517_2.png\" class=\"avatar\"\u003e mgorny:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eAdmittedly, the wider Python ecosystem with its Rust adoption puts quite a strain on us and the user experience worsens every few months, we still manage to provide a working setup.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003ca class=\"mention\" href=\"/u/mgorny\"\u003e@mgorny\u003c/a\u003e the Python ecosystem user experience is important to me and I’m aware there have been pains as tooling has adopted to Rust support. Gentoo particularly runs into these pains due to so much from-source building and extensive hardware support.\u003c/p\u003e\n\u003cp\u003eI’m sure I’m not aware of every possible configuration, please always do feel free to ping me / direct me at things and I will do my best to help. I build PyO3 / integrate Python \u0026amp; Rust to empower more people to write software, not to alienate.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThank you, and I am grateful for your help whenever we run into specific problems with Rust. Unfortunately, here the problem is Rust itself — for platforms it doesn’t support, all we can do is either drop the package from that platform (which generally means also dropping all the packages that require it) or remove the Rust dependency somehow. For the latter, it often means disabling tests (which is far from optimal, but there’s at least some hope that testing on other platforms will suffice for pure Python packages), and lately replacing \u003ccode\u003euv-build\u003c/code\u003e with a pure Python build system (say, when \u003ccode\u003ecachecontrol\u003c/code\u003e started using it, given it’s required by \u003ccode\u003epip\u003c/code\u003e and \u003ccode\u003epoetry\u003c/code\u003e).\u003c/p\u003e","post_number":87,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T12:55:29.578Z","reply_count":0,"reply_to_post_number":75,"quote_count":2,"incoming_link_count":2,"reads":225,"readers_count":224,"score":129.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Michał Górny","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":6712,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/87","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277635,"name":"Dima Tisnek","username":"dimaqq","avatar_template":"/user_avatar/discuss.python.org/dimaqq/{size}/372_2.png","created_at":"2025-11-18T13:08:30.429Z","cooked":"\u003cp\u003eThank you Emma and Kirill for taking this on.\u003c/p\u003e\n\u003cp\u003eThe kudos you deserve is beyond what can be expressed in words.\u003c/p\u003e\n\u003cp\u003eWhile I love reading the virtues of rust extolled… there are perhaps some areas that pre-pep should address that got glossed over.\u003c/p\u003e\n\u003cp\u003eRust’s approach to memory safety in multithreaded programs is very different from Python’s. In fact, I don’t think it can be used out of the box. Please make a plan or a PoC and show otherwise. Or set out an educated set of guards rails.\u003c/p\u003e\n\u003cp\u003eLooking at the sample module, this stood out to me:\u003c/p\u003e\n\u003cpre data-code-wrap=\"rust\"\u003e\u003ccode class=\"lang-rust\"\u003e#[inline]\nfn encoded_output_len(input_len: usize) -\u0026gt; Option\u0026lt;usize\u0026gt; {\n    input_len\n        .checked_add(2)\n        .map(|n| n / 3)\n        .and_then(|blocks| blocks.checked_mul(4))\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis is just rust for the sake of rust. A safe C equivalent would be two lines long. The moral is that not all valid rust code belongs to CPython, just like PEP-7, there needs to be a spec about what rust features and idioms to use and what not to.\u003c/p\u003e","post_number":88,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T13:08:30.429Z","reply_count":4,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":224,"readers_count":223,"score":114.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Dima Tisnek","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":301,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/88","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277637,"name":"David Hewitt","username":"davidhewitt","avatar_template":"/user_avatar/discuss.python.org/davidhewitt/{size}/3502_2.png","created_at":"2025-11-18T13:24:41.824Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"dimaqq\" data-post=\"88\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/dimaqq/48/372_2.png\" class=\"avatar\"\u003e dimaqq:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRust’s approach to memory safety in multithreaded programs is very different from Python’s.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eFrom subinterpreters, yes I agree there are differences. From freethreaded Python, it has so far felt very similar to me (atomic datatypes, locks etc).\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"dimaqq\" data-post=\"88\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/dimaqq/48/372_2.png\" class=\"avatar\"\u003e dimaqq:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThis is just rust for the sake of rust. A safe C equivalent would be two lines long.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis code could be written in a one liner if really wanted, I wouldn’t pick at LOC as a relevant metric. Some Rust code is more verbose than C because it encourages checking, some Rust code is less verbose because it (e.g.) handles RAII for you.\u003c/p\u003e\n\u003cpre data-code-wrap=\"rust\"\u003e\u003ccode class=\"lang-rust\"\u003e#[inline]\nfn encoded_output_len(input_len: usize) -\u0026gt; Option\u0026lt;usize\u0026gt; {\n    (input_len.checked_add(2)? / 3).checked_mul(4)\n}\n\u003c/code\u003e\u003c/pre\u003e","post_number":89,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T13:24:41.824Z","reply_count":0,"reply_to_post_number":88,"quote_count":1,"incoming_link_count":2,"reads":220,"readers_count":219,"score":83.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"David Hewitt","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":3448,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/89","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277638,"name":"David Hewitt","username":"davidhewitt","avatar_template":"/user_avatar/discuss.python.org/davidhewitt/{size}/3502_2.png","created_at":"2025-11-18T13:26:50.201Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"dimaqq\" data-post=\"88\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/dimaqq/48/372_2.png\" class=\"avatar\"\u003e dimaqq:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe moral is that not all valid rust code belongs to CPython, just like PEP-7, there needs to be a spec about what rust features and idioms to use and what not to.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003ccode\u003eclippy\u003c/code\u003e and \u003ccode\u003erustfmt\u003c/code\u003e are fantastic tools (configurable) that enable a common standard of Rust to be used widely across the ecosystem with specific tailoring possible. I would think these will be great (possibly sufficient) starting points.\u003c/p\u003e","post_number":90,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T13:26:50.201Z","reply_count":0,"reply_to_post_number":88,"quote_count":1,"incoming_link_count":1,"reads":218,"readers_count":217,"score":63.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"David Hewitt","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":3448,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/90","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277643,"name":"Alex Gaynor","username":"alex_Gaynor","avatar_template":"/user_avatar/discuss.python.org/alex_gaynor/{size}/17_2.png","created_at":"2025-11-18T13:56:47.268Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"dimaqq\" data-post=\"88\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/dimaqq/48/372_2.png\" class=\"avatar\"\u003e dimaqq:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA safe C equivalent would be two lines long.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eFWIW, I’ve tried pretty hard, but I can’t find a way to write a (readable) 2-line version of this function in C that retains the overflow checking. (And any C version I do either relies on a magic sentinel like -1 for a return value or an out param, which is obviously more challenging for the caller).\u003c/p\u003e\n\u003cp\u003eI think this is a good example of a dynamic with Rust: it \u003cem\u003edefinitely\u003c/em\u003e forces you to front load a lot of work. It’s more annoying for building POCs and playing with ideas. The trade-off is you get way less debugging and vulnerabilities on the back side.\u003c/p\u003e","post_number":91,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T13:56:47.268Z","reply_count":1,"reply_to_post_number":88,"quote_count":1,"incoming_link_count":6,"reads":225,"readers_count":224,"score":214.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Alex Gaynor","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":7}],"moderator":false,"admin":false,"staff":false,"user_id":12,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/91","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277644,"name":"Sergey Fedorov","username":"barracuda156","avatar_template":"/user_avatar/discuss.python.org/barracuda156/{size}/24504_2.png","created_at":"2025-11-18T14:00:13.923Z","cooked":"\u003cp\u003eThis is very disappointing to see rust being pushed into Python itself. That will break Python for all platforms where rust is broken, which will hit users badly, since a lot of apps rely on Python. (And will be a regression as compared to C implementation generally.)\u003c/p\u003e\n\u003cp\u003eUsing it optionally, like Ruby does, is fine. I honestly hope it does not become obligatory.\u003c/p\u003e","post_number":92,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T14:00:13.923Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":11,"reads":226,"readers_count":225,"score":174.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Sergey Fedorov","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":46327,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/92","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277645,"name":"Jakub Beránek","username":"Kobzol","avatar_template":"/user_avatar/discuss.python.org/kobzol/{size}/12682_2.png","created_at":"2025-11-18T14:07:34.735Z","cooked":"\u003cp\u003eTo provide some numbers on Rust’s build performance: today, I can build the whole Rust compiler (600 kLOC) plus its ~200 dependencies (a couple more hundred kLOC) on my Zen3 16 core (8C+8HT) laptop in ~50s from scratch, in release mode with optimizations, with incremental rebuilds taking 5-20s (depending on how deep I modify something in the dependency tree).\u003c/p\u003e\n\u003cp\u003eWhile that is still slower than rebuilding CPython, especially in incremental, I don’t think that the initiative mentioned in this PEP would run into Rust build time performance issues soon, unless you somehow manage to write (or depend on) hundreds thousands of Rust code very quickly.\u003c/p\u003e","post_number":93,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T14:07:34.735Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":15,"reads":227,"readers_count":226,"score":194.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jakub Beránek","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":12155,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/93","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277648,"name":"ShalokShalom","username":"ShalokShalom","avatar_template":"/user_avatar/discuss.python.org/shalokshalom/{size}/32588_2.png","created_at":"2025-11-18T15:19:04.037Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eRust’s memory safety guarantees have been formally proven by the RustBelt project for code that does not use “unsafe” .\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/Speykious/cve-rs\" rel=\"noopener nofollow ugc\"\u003eThere are CVE’s in safe Rust\u003c/a\u003e\u003c/p\u003e","post_number":94,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T15:36:19.610Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":230,"readers_count":229,"score":160.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"ShalokShalom","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/Speykious/cve-rs","internal":false,"reflection":false,"title":"GitHub - Speykious/cve-rs: Blazingly 🔥 fast 🚀 memory vulnerabilities, written in 100% safe Rust. 🦀","clicks":67}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":80068,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/94","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277654,"name":"Antoine Pitrou","username":"pitrou","avatar_template":"/user_avatar/discuss.python.org/pitrou/{size}/28_2.png","created_at":"2025-11-18T15:42:51.203Z","cooked":"\u003cp\u003eWell, there are CVEs in pure Python too, that doesn’t mean that Python and C are equivalent when it comes to avoiding security vulnerabilities.\u003c/p\u003e","post_number":95,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T15:42:51.203Z","reply_count":1,"reply_to_post_number":94,"quote_count":0,"incoming_link_count":3,"reads":228,"readers_count":227,"score":350.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Antoine Pitrou","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":80068,"username":"ShalokShalom","name":"ShalokShalom","avatar_template":"/user_avatar/discuss.python.org/shalokshalom/{size}/32588_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":17}],"moderator":false,"admin":false,"staff":false,"user_id":23,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/95","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277656,"name":"Bill Janssen","username":"billjanssen","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/b/4bbf92/{size}.png","created_at":"2025-11-18T16:41:48.408Z","cooked":"\u003cp\u003eI think this is a great idea! So much so I finally signed onto the Discourse server to endorse it. Will follow developments with much interest.\u003c/p\u003e","post_number":96,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T16:41:48.408Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":218,"readers_count":217,"score":98.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Bill Janssen","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":80069,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/96","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277660,"name":"Michael H","username":"mikeshardmind","avatar_template":"/user_avatar/discuss.python.org/mikeshardmind/{size}/14381_2.png","created_at":"2025-11-18T16:54:46.173Z","cooked":"\u003cp\u003eNo, but it does undercut the idea that the memory safety guarantees have been “formally proven” when there are longstanding known direct counterexamples.\u003c/p\u003e\n\u003cp\u003eFor what it’s worth, Miri does catch that issue.\u003c/p\u003e","post_number":97,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T16:54:46.173Z","reply_count":1,"reply_to_post_number":95,"quote_count":0,"incoming_link_count":0,"reads":217,"readers_count":216,"score":77.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Michael H","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":23,"username":"pitrou","name":"Antoine Pitrou","avatar_template":"/user_avatar/discuss.python.org/pitrou/{size}/28_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":15730,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/97","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277661,"name":"Dustin Spicuzza","username":"virtuald","avatar_template":"/user_avatar/discuss.python.org/virtuald/{size}/2798_2.png","created_at":"2025-11-18T17:01:24.594Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003ch4\u003eHow should we manage dependencies?\u003c/h4\u003e\n\u003cp\u003eBy default cargo will download dependencies which aren’t already cached locally when \u003ccode\u003ecargo build\u003c/code\u003e is invoked, but perhaps we should vendor these? Cargo has built-in support for vendoring code. We could also \u003ccode\u003ecargo fetch\u003c/code\u003e to download dependencies at any other part of the build process (such as when running configure).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eCurrently, it is trivial to build python on a computer that isn’t connected to the internet. IMO this must continue to be the case, it’s really important to many users in restricted environments.\u003c/p\u003e","post_number":98,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T17:01:24.594Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":3,"reads":218,"readers_count":217,"score":318.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Dustin Spicuzza","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":17}],"moderator":false,"admin":false,"staff":false,"user_id":2719,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/98","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277663,"name":"Michael H","username":"mikeshardmind","avatar_template":"/user_avatar/discuss.python.org/mikeshardmind/{size}/14381_2.png","created_at":"2025-11-18T17:20:53.414Z","cooked":"\u003cp\u003eI have too many concerns about the use of Python in various bootstrapping to be in favor of this currently.\u003c/p\u003e\n\u003cp\u003eI agree with the overall goal of increasing memory safety and making it easier to write code people can be confident in by default, and I like Rust for this, but I don’t see this as the right move without more supporting pieces that just aren’t there yet when considering how Python is used in the world.\u003c/p\u003e\n\u003cp\u003eIt seems more advantageous to focus on which modules have both C and Python implementations that would highly benefit from the guarantees afforded. This also seems to have cleaner boundaries on a technical level, and doesn’t force people to evaluate Rust adoption as an all-or-nothing roadmap to be committed to before it is proven to work within CPython’s core development, and before seeing actual impact of even that smaller transition.\u003c/p\u003e\n\u003cp\u003eIt’s also worth pointing out that there are options other than rust which have stronger formal guarantees than C (some more than Rust), and which don’t require a Rust toolchain. Python is already using \u003ca href=\"https://github.com/hacl-star/hacl-star\" class=\"inline-onebox\"\u003eGitHub - hacl-star/hacl-star: HACL*, a formally verified cryptographic library written in F*\u003c/a\u003e for various cryptography functions, and getting more from doing so than had a Rust implementation been chosen:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe code for all of these algorithms is formally verified using the \u003ca href=\"https://fstar-lang.org/\"\u003eF*\u003c/a\u003e verification framework for memory safety, functional correctness, and secret independence (resistance to some types of timing side-channels).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eWhile Rust is certainly more popular than a purpose-chosen subset of F*\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277663-1\" id=\"footnote-ref-277663-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e, it serves as a point that it is possible to get the level of additional compiler-enforced safety that’s desired without compromising on the existing portability of CPython.\u003c/p\u003e\n\u003cp\u003eAs CPython doesn’t support these unsupported triples either, Rust stabilizing user-provided JSON targets brings it to effective parity: “You’re on your own, but the build tools required have a stable way of doing it.”\u003c/p\u003e\n\u003cp\u003eI also want to be crystal clear, I don’t think it’s even remotely feasible to say “Rust has to support all target triples that have ever used or ever will use python.” There’s a limited amount of maintainer bandwidth in every project, and some hardware just isn’t being developed for by the core teams. It’s niche.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eA probably less important issue, but one that I think hasn’t been mentioned directly\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277663-2\" id=\"footnote-ref-277663-2\"\u003e[2]\u003c/a\u003e\u003c/sup\u003e, is that rust and rust-analyzer both use significantly more memory than existing tooling for C. I don’t think it’s an amount likely to be a significant contribution barrier, and don’t personally count this against the proposal, but would like to make sure all known impacts are considered.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277663-1\" class=\"footnote-item\"\u003e\u003cp\u003eLow* \u003ca href=\"#footnote-ref-277663-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"footnote-277663-2\" class=\"footnote-item\"\u003e\u003cp\u003eCompile times were mentioned, but there’s workflows that avoid the brunt of this. \u003ca href=\"#footnote-ref-277663-2\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":99,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T17:21:42.194Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":7,"reads":237,"readers_count":236,"score":316.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Michael H","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/hacl-star/hacl-star","internal":false,"reflection":false,"title":"GitHub - hacl-star/hacl-star: HACL*, a formally verified cryptographic library written in F*","clicks":5},{"url":"https://fstar-lang.org/","internal":false,"reflection":false,"title":"F*: A Proof-Oriented Programming Language","clicks":1}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":16}],"moderator":false,"admin":false,"staff":false,"user_id":15730,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/99","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277666,"name":"Norman Lorrain","username":"normanlorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png","created_at":"2025-11-18T17:37:57.979Z","cooked":"\u003cp\u003eGiven that Rust isn’t standardised like C and C++ (ISO/IEC 9899, ISO/IEC 14882), isn’t this premature?\u003c/p\u003e","post_number":100,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T17:37:57.979Z","reply_count":3,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":232,"readers_count":231,"score":105.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Norman Lorrain","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":20079,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/100","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277669,"name":"Alex Gaynor","username":"alex_Gaynor","avatar_template":"/user_avatar/discuss.python.org/alex_gaynor/{size}/17_2.png","created_at":"2025-11-18T17:53:01.349Z","cooked":"\u003cp\u003ePython is also not standardized, and yet I don’t think any of us believe it follows that it’s premature to use it \u003cimg src=\"https://emoji.discourse-cdn.com/apple/slight_smile.png?v=15\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e . Can you expand a bit more on why you think standardization should play into this?\u003c/p\u003e","post_number":101,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T17:53:01.349Z","reply_count":1,"reply_to_post_number":100,"quote_count":0,"incoming_link_count":1,"reads":220,"readers_count":219,"score":368.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Alex Gaynor","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":20079,"username":"normanlorrain","name":"Norman Lorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":17}],"moderator":false,"admin":false,"staff":false,"user_id":12,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/101","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277671,"name":"Kirill Podoprigora","username":"Eclips4","avatar_template":"/user_avatar/discuss.python.org/eclips4/{size}/32292_2.png","created_at":"2025-11-18T17:56:54.370Z","cooked":"\u003cp\u003eThat’s a good question!\u003cbr\u003e\nBut I guess the real question here is: what problem does standardization actually solve?\u003cbr\u003e\nAndroid and Linux seem to be doing just fine with Rust, even though it doesn’t have a formal standard.\u003cbr\u003e\nHere’s an article from Mara (a member of the Rust Leadership Council) that discusses this topic: \u003ca href=\"https://blog.m-ou.se/rust-standard/\"\u003ehttps://blog.m-ou.se/rust-standard/\u003c/a\u003e.\u003c/p\u003e","post_number":102,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T17:56:54.370Z","reply_count":1,"reply_to_post_number":100,"quote_count":0,"incoming_link_count":2,"reads":226,"readers_count":225,"score":74.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Kirill Podoprigora","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://blog.m-ou.se/rust-standard/","internal":false,"reflection":false,"clicks":14}],"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":20079,"username":"normanlorrain","name":"Norman Lorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":8236,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/102","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277672,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-18T18:08:43.682Z","cooked":"\u003cp\u003eThe distinction is that those are implemented using \u003ca href=\"https://github.com/rust-lang/rust/issues?q=is%3Aissue%20state%3Aopen%20I-unsound%20label%3AI-unsound\" rel=\"noopener nofollow ugc\"\u003eI-unsound\u003c/a\u003e-tagged bugs in the compiler (and no comparably advanced optimizing compiler is completely free of them) and the underlying formal proof is for “if all compiler bugs are fixed”… similar to how you shouldn’t fault a language for the underlying DRAM being susceptible to \u003ca href=\"https://en.wikipedia.org/wiki/Row_hammer\" rel=\"noopener nofollow ugc\"\u003eRowhammer\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eI don’t have the URLs on hand, but, if I remember correctly, GCC and LLVM have equivalent tags in their bug trackers.\u003c/p\u003e\n\u003cp\u003eIn this context, the reason some of those bugs are long-lived is twofold:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eThe developers have determined that they’re very difficult to encounter accidentally.\u003c/li\u003e\n\u003cli\u003eNeither the rustc devs nor the LLVM devs nor the GCC devs nor \u003cem\u003eany\u003c/em\u003e developers of optimizing compilers are willing to take on “this transformation is a security boundary, fit for processing mailcious inputs”-level responsibility.\u003c/li\u003e\n\u003c/ol\u003e","post_number":103,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:08:43.682Z","reply_count":0,"reply_to_post_number":97,"quote_count":0,"incoming_link_count":4,"reads":228,"readers_count":227,"score":79.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/rust-lang/rust/issues?q=is%3Aissue%20state%3Aopen%20I-unsound%20label%3AI-unsound","internal":false,"reflection":false,"title":"GitHub · Where software is built","clicks":5},{"url":"https://en.wikipedia.org/wiki/Row_hammer","internal":false,"reflection":false,"title":"Row hammer - Wikipedia","clicks":2}],"read":true,"user_title":null,"reply_to_user":{"id":15730,"username":"mikeshardmind","name":"Michael H","avatar_template":"/user_avatar/discuss.python.org/mikeshardmind/{size}/14381_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/103","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277673,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-18T18:15:27.107Z","cooked":"\u003cp\u003eRust has multiple mechanisms for building without access to \u003ca href=\"http://Crates.io\" rel=\"noopener nofollow ugc\"\u003eCrates.io\u003c/a\u003e, depending on the specific circumstances. For example:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003ecargo fetch\u003c/code\u003e and \u003ccode\u003ecargo build --offline\u003c/code\u003e can be used to separate the downloading and building while otherwise using Cargo the same way.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ecargo vendor\u003c/code\u003e can be used to vendor the dependencies without losing the information that something like cargo-audit would need.\u003c/li\u003e\n\u003cli\u003eThe \u003ca href=\"https://doc.rust-lang.org/cargo/reference/overriding-dependencies.html#overriding-dependencies\" rel=\"noopener nofollow ugc\"\u003eOverriding Dependencies\u003c/a\u003e section of the Cargo Book covers things like overriding the \u003ca href=\"http://Crates.io\" rel=\"noopener nofollow ugc\"\u003eCrates.io\u003c/a\u003e repository URL to locally point a package at a different source.\u003c/li\u003e\n\u003cli\u003eWhile I haven’t kept up on the state of the art, it’s possible to run a local mirror of \u003ca href=\"http://Crates.io\" rel=\"noopener nofollow ugc\"\u003eCrates.io\u003c/a\u003e more broadly using tools like \u003ca href=\"https://github.com/panamax-rs/panamax\" rel=\"noopener nofollow ugc\"\u003ePanamax\u003c/a\u003e.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eI think that covers all the major tiers of the problem.\u003c/p\u003e","post_number":104,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:15:27.107Z","reply_count":1,"reply_to_post_number":98,"quote_count":0,"incoming_link_count":1,"reads":226,"readers_count":225,"score":84.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/panamax-rs/panamax","internal":false,"reflection":false,"clicks":4},{"url":"http://Crates.io","internal":false,"reflection":false,"title":"crates.io: Rust Package Registry","clicks":0},{"url":"https://doc.rust-lang.org/cargo/reference/overriding-dependencies.html#overriding-dependencies","internal":false,"reflection":false,"title":"Overriding Dependencies - The Cargo Book","clicks":0}],"read":true,"user_title":null,"reply_to_user":{"id":2719,"username":"virtuald","name":"Dustin Spicuzza","avatar_template":"/user_avatar/discuss.python.org/virtuald/{size}/2798_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/104","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277674,"name":"Norman Lorrain","username":"normanlorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png","created_at":"2025-11-18T18:16:54.221Z","cooked":"\u003cp\u003eI think in terms of a tech stack, as you go further down you want to be increasingly conservative and prevent any breaking changes.  This has been the success of Windows, which for all it’s faults is quite backward compatible.  I can take code from 30 years ago and it will run.  Similarly for the Web.  I can look at archived pages from decades ago and it will display.\u003c/p\u003e\n\u003cp\u003ePython is the foundation for many projects and businesses.  I trust that code I write today will run in 1 or 2 or 5 years.  10 years, less trust. Lessons learned from 2to3 transition.\u003c/p\u003e\n\u003cp\u003eIn turn, C is the foundation of Python.  I trust that any changes to C will not impact Python and my investment of time, etc. won’t be at risk.\u003c/p\u003e\n\u003cp\u003eThe core issue is trust. There is “currency” in trust.  Python has a healthy bank account of trust, and I fear it will be at risk.\u003c/p\u003e","post_number":105,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:16:54.221Z","reply_count":1,"reply_to_post_number":101,"quote_count":0,"incoming_link_count":3,"reads":225,"readers_count":224,"score":154.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Norman Lorrain","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":12,"username":"alex_Gaynor","name":"Alex Gaynor","avatar_template":"/user_avatar/discuss.python.org/alex_gaynor/{size}/17_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":20079,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/105","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277675,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-18T18:22:07.057Z","cooked":"\u003cp\u003eGenerally speaking, standardization tends to come into play for one of two purposes:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eRe-unifying disparate implementations of a language (C, C++, ECMAScript, etc.)\u003c/li\u003e\n\u003cli\u003eMaking a proprietary product look more appealing to enterprise or government decision-makers (Java, .NET, Office Open XML, etc.)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eGiven that Rust’s regression suite and v1.0 stability promise already pin the language down more thoroughly than C or C++ and that gccrs plans to follow rustc as the source of truth, I’m not sure a standard would have much benefit here.\u003c/p\u003e\n\u003cp\u003e(Seriously. Look into how much about C is left implementation-defined. We generally greatly overestimate what the spec actually calls for. That’s one reason you tend to see big projects picking one or maybe two compilers per platform and coding against those. For example, the \u003ca href=\"https://maskray.me/blog/2024-05-12-exploring-gnu-extensions-in-linux-kernel\" rel=\"noopener nofollow ugc\"\u003eLinux kernel is written in GNU C\u003c/a\u003e and the ability to compile it using llvm-clang was a little bit about retiring use of features the kernel devs had decided were mistakes and overwhelmingly about teaching llvm-clang to support GNU C. …it also has its own non-standard memory model that only works because GCC is careful not to break it.)\u003c/p\u003e","post_number":106,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:24:58.798Z","reply_count":0,"reply_to_post_number":100,"quote_count":0,"incoming_link_count":0,"reads":219,"readers_count":218,"score":73.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://maskray.me/blog/2024-05-12-exploring-gnu-extensions-in-linux-kernel","internal":false,"reflection":false,"title":"Exploring GNU extensions in the Linux kernel | MaskRay","clicks":1}],"read":true,"user_title":null,"reply_to_user":{"id":20079,"username":"normanlorrain","name":"Norman Lorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/106","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277677,"name":"Norman Lorrain","username":"normanlorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png","created_at":"2025-11-18T18:27:18.924Z","cooked":"\u003cp\u003eSee my other answer, regarding trust.  Having a standard provides some measure of trust in a technology that is a foundation of a project.\u003cbr\u003e\nI know nothing about Android, but I read that Ubuntu had a problematic release with their porting of uutils/coreutils to Rust in 25.10.  Those tools are a foundation to a Linux system. This undermines trust in Ubuntu. I’d hate for the same to happen to Python.\u003c/p\u003e","post_number":107,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:27:18.924Z","reply_count":2,"reply_to_post_number":102,"quote_count":0,"incoming_link_count":0,"reads":214,"readers_count":213,"score":67.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Norman Lorrain","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":8236,"username":"Eclips4","name":"Kirill Podoprigora","avatar_template":"/user_avatar/discuss.python.org/eclips4/{size}/32292_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":20079,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/107","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277678,"name":"James Webber","username":"jamestwebber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","created_at":"2025-11-18T18:28:16.038Z","cooked":"\u003cp\u003eI don’t know that there is a level of standardization or certification that can satisfy every vague concern.\u003c/p\u003e","post_number":108,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:28:16.038Z","reply_count":1,"reply_to_post_number":107,"quote_count":0,"incoming_link_count":0,"reads":214,"readers_count":213,"score":182.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Webber","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":20079,"username":"normanlorrain","name":"Norman Lorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":7}],"moderator":false,"admin":false,"staff":false,"user_id":12267,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/108","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277679,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-18T18:31:08.268Z","cooked":"\u003cp\u003ePersonally, my trust in Python was broken as soon as I saw lines in the standard library docs saying things like \u003ccode\u003eDeprecated since version 3.6, removed in version 3.12.\u003c/code\u003e (Specifically the latter half.)\u003c/p\u003e\n\u003cp\u003eIt’s one of the things that made me feel relieved that I’d decided to work on a Rust rewrite for any code that doesn’t need memory-safe QWidget bindings, Django’s ecosystem, or Django ORM/Alembic draft migration autogeneration in order to minimize the “It works. Don’t **** with it” vs. “Burned myself out again trying to reinvent a stronger type system in my test suite” factor.\u003c/p\u003e","post_number":109,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:31:08.268Z","reply_count":0,"reply_to_post_number":107,"quote_count":0,"incoming_link_count":1,"reads":219,"readers_count":218,"score":63.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":20079,"username":"normanlorrain","name":"Norman Lorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/109","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277682,"name":"Tin Tvrtković","username":"Tinche","avatar_template":"/user_avatar/discuss.python.org/tinche/{size}/12507_2.png","created_at":"2025-11-18T18:38:17.862Z","cooked":"\u003cp\u003eLove this effort, a strong +1 from me. I’ve been historically wary of bigger CPython contributions because I don’t know C, and don’t particularly want to know it. Rust is a completely different matter.\u003c/p\u003e\n\u003cp\u003eA lot of the introduction here is aimed at Rust as a replacement for the C parts of CPython. But I think Rust could be a huge win for optimizing Python parts of CPython. “Rewrite module X in C” usually means a significant effort, both up front and on-going, maintenance-wise. Rewriting in Rust could be a completely different story, if we do this right.\u003c/p\u003e","post_number":110,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:38:17.862Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":215,"readers_count":214,"score":192.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Tin Tvrtković","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":8}],"moderator":false,"admin":false,"staff":false,"user_id":1820,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/110","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277683,"name":"Norman Lorrain","username":"normanlorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png","created_at":"2025-11-18T18:40:45.970Z","cooked":"\u003cp\u003eMaybe a standardisation to the effect that code from The Rust book, 1st edition, or 2nd edition, still work with the latest Rust. (Perhaps it does).\u003c/p\u003e","post_number":111,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:40:45.970Z","reply_count":1,"reply_to_post_number":108,"quote_count":0,"incoming_link_count":1,"reads":218,"readers_count":217,"score":48.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Norman Lorrain","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":12267,"username":"jamestwebber","name":"James Webber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":20079,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/111","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277684,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-18T18:44:18.998Z","cooked":"\u003cp\u003eIt should. See \u003ca href=\"https://blog.rust-lang.org/2014/10/30/Stability/\" rel=\"noopener nofollow ugc\"\u003eStability as a Deliverable\u003c/a\u003e for a description of Rust’s “v1.0 Stability Promise”.\u003c/p\u003e\n\u003cp\u003eBasically, so long as you’re not depending on a compiler bug or security hole, the only thing which should be allowed to break vN code in any later vN+M version of the Rust compiler is the occasional change to how type inference works in edge cases.\u003c/p\u003e\n\u003cp\u003e…also, I almost forgot to mention this:\u003c/p\u003e\n\u003cp\u003eUbuntu’s troubles with uutils are, in my opinion and in the opinion of others, self-inflicted. The uutils devs are quite up-front that they haven’t yet achieved their goal of passing all the tests in the GNU Coreutils test suite, so Ubuntu trying to use them is similar to all the distros that made a mess by ignoring KDE’s announcement that 4.0 was meant to be a developer preview.\u003c/p\u003e","post_number":112,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:44:18.998Z","reply_count":1,"reply_to_post_number":111,"quote_count":0,"incoming_link_count":5,"reads":222,"readers_count":221,"score":88.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://blog.rust-lang.org/2014/10/30/Stability/","internal":false,"reflection":false,"title":"Stability as a Deliverable | Rust Blog","clicks":3}],"read":true,"user_title":null,"reply_to_user":{"id":20079,"username":"normanlorrain","name":"Norman Lorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/112","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277685,"name":"William Woodruff","username":"woodruffw","avatar_template":"/user_avatar/discuss.python.org/woodruffw/{size}/7614_2.png","created_at":"2025-11-18T18:47:05.212Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"normanlorrain\" data-post=\"105\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/normanlorrain/48/15821_2.png\" class=\"avatar\"\u003e Norman Lorrain:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe core issue is trust. There is “currency” in trust. Python has a healthy bank account of trust, and I fear it will be at risk.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eHow should the Python community quantify this trust, given that your original metric (standardization) doesn’t apply to Python itself?\u003c/p\u003e\n\u003cp\u003eConversely: do you moderate your trust in CPython based on the presence of unstandardized, compiler-specific extensions? The last time I checked, there were a nontrivial number of GCC extensions and attributes in the codebase (other compilers go to great efforts to be compatible with these, but they’re not standard).\u003c/p\u003e","post_number":113,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:47:05.212Z","reply_count":2,"reply_to_post_number":105,"quote_count":1,"incoming_link_count":0,"reads":223,"readers_count":222,"score":68.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"William Woodruff","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":994,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/113","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277686,"name":"Sam James","username":"thesamesam","avatar_template":"/user_avatar/discuss.python.org/thesamesam/{size}/10616_2.png","created_at":"2025-11-18T18:47:33.294Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eBasically, so long as you’re not depending on a compiler bug or security hole, the only thing which should be allowed to break vN code in any later vN+M version of the Rust compiler is the occasional change to how type inference works in edge cases.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eUse of unstable features in crates is more common than I’d like it to be still, and the promise does not apply to that. CPython should avoid any use of them.\u003c/p\u003e\n\u003cp\u003eRust for Linux currently relies on some such features, though they’re making an effort to stabilise the ones they’re relying on and not introduce more.\u003c/p\u003e","post_number":114,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:47:33.294Z","reply_count":1,"reply_to_post_number":112,"quote_count":0,"incoming_link_count":1,"reads":219,"readers_count":218,"score":82.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Sam James","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":80027,"username":"ssokolow","name":"Stephan Sokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":10221,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/114","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277687,"name":"Sam James","username":"thesamesam","avatar_template":"/user_avatar/discuss.python.org/thesamesam/{size}/10616_2.png","created_at":"2025-11-18T18:49:54.681Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003e\u003ccode\u003ecargo fetch\u003c/code\u003e and \u003ccode\u003ecargo build --offline\u003c/code\u003e can be used to separate the downloading and building while otherwise using Cargo the same way.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThat option would require some work besides \u003ccode\u003egit clone\u003c/code\u003e which may not be desirable. It does bring up the general question of whether CPython would want to aggressively use crates (which can bring licence questions too) or not.\u003c/p\u003e\n\u003cp\u003eCPython currently has a pretty small set of external dependencies.\u003c/p\u003e","post_number":115,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:49:54.681Z","reply_count":1,"reply_to_post_number":104,"quote_count":0,"incoming_link_count":0,"reads":215,"readers_count":214,"score":92.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Sam James","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":80027,"username":"ssokolow","name":"Stephan Sokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":10221,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/115","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277688,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-18T18:55:21.893Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"thesamesam\" data-post=\"114\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/thesamesam/48/10616_2.png\" class=\"avatar\"\u003e thesamesam:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eUse of unstable features in crates is more common than I’d like it to be still, and the promise does not apply to that. CPython should avoid any use of them.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eFair point.\u003c/p\u003e\n\u003cp\u003eI haven’t used \u003ccode\u003enightly\u003c/code\u003e for anything but the occasional nightly-only tool run (eg. Miri) in at least five years, but then I don’t do kernelspace stuff and using Rust for microcontroller hobby programming is still on my TODO list.\u003c/p\u003e\n\u003cp\u003eMy experience has been that there isn’t much call for\u003ccode\u003enightly\u003c/code\u003e for \u003ccode\u003ecargo build\u003c/code\u003e-ing userspace projects anymore.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"thesamesam\" data-post=\"115\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/thesamesam/48/10616_2.png\" class=\"avatar\"\u003e thesamesam:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThat option would require some work besides \u003ccode\u003egit clone\u003c/code\u003e which may not be desirable. It does bring up the general question of whether CPython would want to aggressively use crates (which can bring licence questions too) or not.\u003c/p\u003e\n\u003cp\u003eCPython currently has a pretty small set of external dependencies.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’d imagine \u003ccode\u003ecargo vendor\u003c/code\u003e would probably be a better fit for that. Beyond that, \u003ca href=\"https://lib.rs/crates/cargo-deny\" rel=\"noopener nofollow ugc\"\u003ecargo-deny\u003c/a\u003e is good for enforcing policy on dependencies (licenses, security advisories, etc.) and \u003ca href=\"https://lib.rs/crates/cargo-supply-chain\" rel=\"noopener nofollow ugc\"\u003ecargo-supply-chain\u003c/a\u003e helps to automate the process of inspecting who you’re trusting, independent of how many pieces they decided to split their project into.\u003c/p\u003e","post_number":116,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T18:55:21.893Z","reply_count":0,"reply_to_post_number":114,"quote_count":2,"incoming_link_count":6,"reads":254,"readers_count":253,"score":79.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://lib.rs/crates/cargo-deny","internal":false,"reflection":false,"title":"cargo-deny — Cargo add-on // Lib.rs","clicks":1},{"url":"https://lib.rs/crates/cargo-supply-chain","internal":false,"reflection":false,"title":"cargo-supply-chain — Cargo add-on // Lib.rs","clicks":1}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/116","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277689,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-18T19:07:35.013Z","cooked":"\u003cp\u003eI wanted to start by thanking everyone for their feedback on the proposal so far, and say that we look forward to continued discussion.\u003c/p\u003e\n\u003cp\u003eAfter reviewing the discussion so far, we’ve decided to re-focus the (pre-)PEP to only propose the introduction of optional Rust extension modules to CPython. We hope that with experiences gained from introducing Rust for extension modules, Rust can eventually be used for working on the required modules and the interpreter core itself in the future. However, we will leave that to a future PEP when we know more and will not be proposing that as part of the current in-discussion PEP.\u003c/p\u003e\n\u003cp\u003eThis should address issues with bootstrapping, language portability, and churn.\u003c/p\u003e\n\u003cp\u003eWe’ve also been noting lots of other feedback we’ve received, but I wanted to call this one out in particular as it has been the source of a large portion of the discussion.\u003c/p\u003e","post_number":117,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T19:18:29.439Z","reply_count":0,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":76,"reads":262,"readers_count":261,"score":1181.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":50}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/117","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277691,"name":"Chris Angelico","username":"Rosuav","avatar_template":"/user_avatar/discuss.python.org/rosuav/{size}/3429_2.png","created_at":"2025-11-18T19:59:46.895Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"woodruffw\" data-post=\"113\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/woodruffw/48/7614_2.png\" class=\"avatar\"\u003e William Woodruff:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eConversely: do you moderate your trust in CPython based on the presence of unstandardized, compiler-specific extensions? The last time I checked, there were a nontrivial number of GCC extensions and attributes in the codebase (other compilers go to great efforts to be compatible with these, but they’re not standard).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI would, but the moderation in question is relatively slight. There are two levels of trust: “Do I believe this isn’t malicious?” and “Do I believe that this is able to do what it promises?”. The compiler-specific extensions don’t significantly affect the first one (any sort of malicious implication has to be incredibly convoluted, like “the CPython devs are trying to force people to use GCC because they are trying to boost Richard Stallman’s fame and try to get him into the Guinness Book of Records” - or something equally ridiculous), though they do have an impact on the second (“in the event of a problem, do we have true options here?”). So, yes, it does impact trust, but not all THAT much.\u003c/p\u003e\n\u003cp\u003eNon-standard/compiler-specific features, to me, recall the days of IE-specific features in web sites, which had the much-less-convoluted justification “Microsoft wants everyone to use IE so they have to buy Windows”. But the trust impact depends on how viable the threat is.\u003c/p\u003e","post_number":118,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T19:59:46.895Z","reply_count":0,"reply_to_post_number":113,"quote_count":1,"incoming_link_count":4,"reads":260,"readers_count":259,"score":85.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Chris Angelico","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":3377,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/118","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277692,"name":"Elchanan Haas","username":"ElchananHaas","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/e/a3d4f5/{size}.png","created_at":"2025-11-18T20:20:28.247Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"1\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhen should Rust be allowed in non-optional parts of CPython?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI think the timeline you are laying out here is a bit too certain. I would instead propose a timeline based on the adaption of Rust within Python.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eIn Python 3.15, \u003ccode\u003e./configure\u003c/code\u003e will start emitting warnings if Rust is not available in the environment. Optional extension modules may start using Rust. (Same as PEP proposal)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eOnce the Rust has enough usage within Python extensions a PEP will be created with a timeline of making Rust mandatory.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":119,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T20:20:28.247Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":3,"reads":244,"readers_count":243,"score":67.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Elchanan Haas","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80085,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/119","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277694,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-18T20:32:56.369Z","cooked":"\u003cp\u003eThis is no longer the current plan, please see \u003ca href=\"https://discuss.python.org/t/pre-pep-rust-for-cpython/104906/117\" class=\"inline-onebox\"\u003ePre-PEP: Rust for CPython - #117 by emmatyping\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI don’t think we should emit a warning now that these items will be entirely optional and we don’t have a plan for making Rust required. When that is proposed in a PEP, the timeline for emitting warnings and requiring Rust will be decided there.\u003c/p\u003e","post_number":120,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T20:32:56.369Z","reply_count":1,"reply_to_post_number":119,"quote_count":0,"incoming_link_count":1,"reads":240,"readers_count":239,"score":102.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":80085,"username":"ElchananHaas","name":"Elchanan Haas","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/e/a3d4f5/{size}.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/120","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277695,"name":"Norman Lorrain","username":"normanlorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png","created_at":"2025-11-18T20:34:48.478Z","cooked":"\u003cp\u003eI would quantify it in terms of the timeline a codebase will still run.  1,2,5,10 years.\u003c/p\u003e\n\u003cp\u003eYes, I moderate it.  I’ve been burned by changes, and I guess this is why a foundational change like moving to Rust causes concern.  Why not defer this to Python 4?\u003c/p\u003e","post_number":121,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T20:34:48.478Z","reply_count":2,"reply_to_post_number":113,"quote_count":0,"incoming_link_count":1,"reads":236,"readers_count":235,"score":76.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Norman Lorrain","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":994,"username":"woodruffw","name":"William Woodruff","avatar_template":"/user_avatar/discuss.python.org/woodruffw/{size}/7614_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":20079,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/121","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277696,"name":"James Webber","username":"jamestwebber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","created_at":"2025-11-18T20:44:25.949Z","cooked":"\u003cp\u003eBecause there’s no plan to ever have a Python 4.\u003c/p\u003e","post_number":122,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T20:44:25.949Z","reply_count":0,"reply_to_post_number":121,"quote_count":0,"incoming_link_count":1,"reads":230,"readers_count":229,"score":320.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Webber","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":20079,"username":"normanlorrain","name":"Norman Lorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":16}],"moderator":false,"admin":false,"staff":false,"user_id":12267,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/122","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277697,"name":"William Woodruff","username":"woodruffw","avatar_template":"/user_avatar/discuss.python.org/woodruffw/{size}/7614_2.png","created_at":"2025-11-18T21:03:38.697Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"normanlorrain\" data-post=\"121\" data-topic=\"104906\" data-full=\"true\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/normanlorrain/48/15821_2.png\" class=\"avatar\"\u003e Norman Lorrain:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI would quantify it in terms of the timeline a codebase will still run. 1,2,5,10 years.\u003c/p\u003e\n\u003cp\u003eYes, I moderate it. I’ve been burned by changes, and I guess this is why a foundational change like moving to Rust causes concern. Why not defer this to Python 4?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI don’t think CPython makes a hard and fast guarantee that your code will run unmodified in 1, 2, 5, or 10 years. But even if it did: the presence of Rust \u003cem\u003einside\u003c/em\u003e the runtime doesn’t seem material to that property, or at least is no more material to it than everything that happens on each minor release of Python 3 anyways.\u003c/p\u003e","post_number":123,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T21:03:38.697Z","reply_count":0,"reply_to_post_number":121,"quote_count":1,"incoming_link_count":3,"reads":234,"readers_count":233,"score":181.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"William Woodruff","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":994,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/123","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277698,"name":"James Webber","username":"jamestwebber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","created_at":"2025-11-18T21:24:37.466Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"120\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThis is no longer the current plan, please see \u003ca href=\"https://discuss.python.org/t/pre-pep-rust-for-cpython/104906/117\"\u003ePre-PEP: Rust for CPython - #117 by emmatyping\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eGiven that this thread reached 100+ posts in a day (!), you might want to edit the OP to make this clear. This thread is getting some broader coverage and I expect more people will be jumping in without reading the whole thing.\u003c/p\u003e","post_number":124,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T21:24:37.466Z","reply_count":1,"reply_to_post_number":120,"quote_count":1,"incoming_link_count":7,"reads":234,"readers_count":233,"score":311.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Webber","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":15}],"moderator":false,"admin":false,"staff":false,"user_id":12267,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/124","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277713,"name":"Zachary Harrold","username":"bushrat011899","avatar_template":"/user_avatar/discuss.python.org/bushrat011899/{size}/32603_2.png","created_at":"2025-11-18T23:28:51.925Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"barry\" data-post=\"49\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/barry/48/42_2.png\" class=\"avatar\"\u003e barry:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI would go further and predict that this will never happen, and claim that it shouldn’t be a goal of the Rust-in-Python project. There are 10**oodles of person-years invested in the CPython core interpreter, and I just don’t see how that will ever be cost effective to rewrite, even as a \u003ca href=\"https://en.wikipedia.org/wiki/Ship_of_Theseus\" rel=\"noopener nofollow ugc\"\u003eShip of Theseus\u003c/a\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI mean, there’s already +12,777,745/-9,190,109 total changes in a project with (currently) 2,791,005 lines of text (git diffs include non-code so this count does too). Arguably, cpython has been rewritten at least 4 times now.\u003c/p\u003e","post_number":125,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T23:28:51.925Z","reply_count":0,"reply_to_post_number":49,"quote_count":1,"incoming_link_count":3,"reads":228,"readers_count":227,"score":60.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Zachary Harrold","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80090,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/125","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277714,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-18T23:29:22.571Z","cooked":"\u003cp\u003eGood idea, I updated the OP to mention and link to the updates to the timeline section, but left the original text for posterity.\u003c/p\u003e","post_number":126,"post_type":1,"posts_count":192,"updated_at":"2025-11-18T23:30:39.201Z","reply_count":0,"reply_to_post_number":124,"quote_count":0,"incoming_link_count":1,"reads":225,"readers_count":224,"score":139.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":12267,"username":"jamestwebber","name":"James Webber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/126","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277721,"name":"Filipe Laíns","username":"FFY00","avatar_template":"/user_avatar/discuss.python.org/ffy00/{size}/4007_2.png","created_at":"2025-11-19T02:32:15.541Z","cooked":"\u003cp\u003eHi, thank you for being willing to take on this project!\u003c/p\u003e\n\u003cp\u003eThe proposal overall seems great, with the proposal scope and bootstrapping story being the only potentially major issues I see. I am only gonna comment on that, as other folks are already addressing remaining concerns. This discussion is already big as-is, and I have no doubt it will still grow much larger \u003cimg src=\"https://emoji.discourse-cdn.com/apple/sweat_smile.png?v=15\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e\u003ca name=\"p-277721-proposal-scope-1\" class=\"anchor\" href=\"#p-277721-proposal-scope-1\"\u003e\u003c/a\u003eProposal scope\u003c/h3\u003e\n\u003cp\u003eUnless I am misinterpreting it, the proposal foreword seems to imply that this is a phased proposal that will eventually add Rust as a required build dependency of CPython, but the presented PEP only covers making it an optional build dependency.\u003c/p\u003e\n\u003cp\u003eThis proposal declares Rust will at some point will stop being optional. While I understand the motivation, I feel like deciding this right now is too early.\u003c/p\u003e\n\u003cp\u003eI don’t think the PEP provides strong enough supporting evidence to outweigh the potential implications of such a major change. The downstream impact is still pretty up in the air, as is the impact on development, etc., while the potential benefit of introducing Rust into the core code-base is still very unclear.\u003c/p\u003e\n\u003cp\u003eWhen I say the benefit of using Rust in core is unclear, I am not questioning Rust’s benefit over C. It’s the quantity of opportunities where it would make sense to use it that is unclear. I strongly believe we should not be rewriting existing code in Rust without a specific reason, and that’s what I think is unclear at this point.\u003c/p\u003e\n\u003cp\u003eEven the PEP is unsure of the timeline for promoting Rust to a hard build dependency, probably because of this.\u003c/p\u003e\n\u003cp\u003eI think this proposal would be much easier to drive forward if it were split into two phases, each with its own PEP.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eIntroducing Rust as an optional build dependency\u003c/li\u003e\n\u003cli\u003ePromoting Rust to a hard build dependency\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThis way, 1) would allow us to gather feedback from the development team, downstreams, etc., giving us a much better picture of the impact of 2), enabling us to make a better argument and design a more concrete plan.\u003c/p\u003e\n\u003cp\u003eWith this in mind, here are my suggestions for the PEP text:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eAdd an “Abstract“ section explaining that the PEP is a first step into the adoption of Rust in the CPython codebase, introducing it in an optional capacity, allowing us to experiment, gather developer feedback, and better assess the technical implications of using Rust in CPython.\u003c/li\u003e\n\u003cli\u003eAdd a “Goals“ section\n\u003cul\u003e\n\u003cli\u003eExplicitly state that rewriting existing code in Rust without further motivation is a \u003cstrong\u003enon-goal\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eDefine a couple of goals, like the following\n\u003cul\u003e\n\u003cli\u003eEvaluate how well the development team engages with Rust inside the codebase\u003c/li\u003e\n\u003cli\u003eEvaluate how well the CPython architecture couples with Rust\u003c/li\u003e\n\u003cli\u003eEvaluate the impact of first-party Rust APIs on downstream users (eg. PyO3)\u003c/li\u003e\n\u003cli\u003eGather feedback from downstream users regarding the bootstrapping implications\u003c/li\u003e\n\u003cli\u003eGather feedback from downstream users of platforms where Rust is not supported\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eAdd a “Future“ section explaining that, contingent on the impact of this PEP, we plan to promote Rust to a hard build dependency as a next step\u003c/li\u003e\n\u003cli\u003eRemove “Keep Rust Always-Optional“ from “Rejected Ideas”\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch4\u003e\u003ca name=\"p-277721-tldr-2\" class=\"anchor\" href=\"#p-277721-tldr-2\"\u003e\u003c/a\u003eTLDR\u003c/h4\u003e\n\u003cp\u003eI don’t feel the PEP provides enough justification to make Rust a hard build dependency, and I think that’s something that would be difficult to provide at this point. As such, I feel like this proposal would be better served by splitting into two phases/PEP — starting with adding Rust as an optional build dependency, and then promoting it into a hard build dependency.\u003c/p\u003e\n\u003chr\u003e\n\u003ch3\u003e\u003ca name=\"p-277721-bootstrapping-3\" class=\"anchor\" href=\"#p-277721-bootstrapping-3\"\u003e\u003c/a\u003eBootstrapping\u003c/h3\u003e\n\u003cp\u003eI personally don’t think any of the given solutions are good enough at the moment, so it is very important to explore other options. IMO, even if no better solutions are found, the PEP authors should show they have exhausted all other sensible possibilities.\u003c/p\u003e\n\u003cp\u003eThat said, I may be mistaken, but it’s my understanding that Python should only be needed to build LLVM for \u003ccode\u003erustc\u003c/code\u003e. Perhaps it would be worth exploring the possibility of using the \u003ca href=\"https://github.com/rust-lang/rustc_codegen_cranelift\"\u003eCranelift backend\u003c/a\u003e instead, which AFAICT doesn’t need Python.\u003c/p\u003e\n\u003cp\u003eIt may also be worthwhile to engage with the \u003ca href=\"https://github.com/thepowersgang/mrustc\"\u003emrustc\u003c/a\u003e project, as they may have better insights on other possible approaches.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eAnother thing that I thought it would be pertinent to point out. If we were to introduce Python to the bootstrapping dependency tree (via Rust), that would greatly weaken the argument against moving CPython’s build system to Meson (discussion in \u003ca href=\"https://discuss.python.org/t/what-do-you-want-to-see-in-tomorrow-s-cpython-build-system/28197\" class=\"inline-onebox\"\u003eWhat do you want to see in tomorrow’s CPython build system?\u003c/a\u003e ).\u003c/p\u003e","post_number":127,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T02:32:15.541Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":225,"readers_count":224,"score":229.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Filipe Laíns","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://discuss.python.org/t/what-do-you-want-to-see-in-tomorrow-s-cpython-build-system/28197","internal":true,"reflection":false,"title":"What do you want to see in tomorrow’s CPython build system?","clicks":9},{"url":"https://github.com/thepowersgang/mrustc","internal":false,"reflection":false,"title":"GitHub - thepowersgang/mrustc: Alternative rust compiler (re-implementation)","clicks":4},{"url":"https://github.com/rust-lang/rustc_codegen_cranelift","internal":false,"reflection":false,"title":"GitHub - rust-lang/rustc_codegen_cranelift: Cranelift based backend for rustc","clicks":3}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":11}],"moderator":false,"admin":false,"staff":false,"user_id":1970,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/127","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277722,"name":"James Webber","username":"jamestwebber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","created_at":"2025-11-19T02:34:58.859Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"FFY00\" data-post=\"127\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/ffy00/48/4007_2.png\" class=\"avatar\"\u003e Filipe Laíns:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI don’t feel the PEP provides enough justification to make Rust a hard build dependency, and I think that’s something that would be difficult to provide at this point.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eGood news, this was agreed upon somewhere in the next 100ish posts of the thread.\u003c/p\u003e","post_number":128,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T02:34:58.859Z","reply_count":0,"reply_to_post_number":127,"quote_count":1,"incoming_link_count":2,"reads":212,"readers_count":211,"score":156.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Webber","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":7}],"moderator":false,"admin":false,"staff":false,"user_id":12267,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/128","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277725,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-19T04:03:18.487Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eI claim that one of the major reasons for this failure is that cargo is almost unique among build systems in providing absolutely no structured mechanisms for:\u003cbr\u003e\n(1) communicating with other package build scripts in the same dependency graph\u003cbr\u003e\n(2) communicating with the downstream user who invokes cargo (such as a distro packager, or a github actions pipeline)\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAn update on work in this direction: The GSoC results page details progress on \u003ca href=\"https://blog.rust-lang.org/2025/11/18/gsoc-2025-results/#prototype-cargo-plumbing-commands\" rel=\"noopener nofollow ugc\"\u003ePrototype Cargo Plumbing Commands\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eNot what you asked for, but evidence of how this sort of thing \u003cem\u003eis\u003c/em\u003e on the radar.\u003c/p\u003e","post_number":129,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T04:03:41.799Z","reply_count":0,"reply_to_post_number":19,"quote_count":0,"incoming_link_count":4,"reads":213,"readers_count":212,"score":57.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://blog.rust-lang.org/2025/11/18/gsoc-2025-results/#prototype-cargo-plumbing-commands","internal":false,"reflection":false,"title":"Google Summer of Code 2025 results | Rust Blog","clicks":15}],"read":true,"user_title":null,"reply_to_user":{"id":6039,"username":"cosmicexplorer","name":"danny mcClanahan","avatar_template":"/user_avatar/discuss.python.org/cosmicexplorer/{size}/31291_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/129","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277731,"name":"Alyssa Coghlan","username":"ncoghlan","avatar_template":"/user_avatar/discuss.python.org/ncoghlan/{size}/14266_2.png","created_at":"2025-11-19T06:59:55.463Z","cooked":"\u003cp\u003eI’ll chime in with a +1 on the idea of allowing Rust extension modules, -1 (at least for now) for the core interpreter and compiler (which is already the direction the descoped PEP has moved in).\u003c/p\u003e\n\u003cp\u003eFor the core interpreter (at least the part which needs to be built in order for CPython to freeze its own frozen standard library modules), I think the bootstrapping and long tail platform support concerns are significant enough to at least postpone consideration of the possibility, and potentially even enough to block it forever.\u003c/p\u003e\n\u003cp\u003eFor extension modules manipulating untrusted input data, I see huge potential value in having access to Rust as a fast low overhead statically typed language with rich data structures and implicitly thread local data access. (For a concrete example of that from nearly 10 years ago, here’s a Sentry post about \u003ca href=\"https://blog.sentry.io/fixing-python-performance-with-rust/\"\u003emigrating their JavaScript source map processing from Python to Rust\u003c/a\u003e, and the benefits of \u003cem\u003enot\u003c/em\u003e incurring the per-instance overhead of creating full Python objects). There are some cases where platform compatibility may still be a concern, but extension modules will have more options for handling that than the core interpreter does.\u003c/p\u003e","post_number":130,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T06:59:55.463Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":210,"readers_count":209,"score":291.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Alyssa Coghlan","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://blog.sentry.io/fixing-python-performance-with-rust/","internal":false,"reflection":false,"title":"Fixing Python Performance with Rust","clicks":4}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":16}],"moderator":false,"admin":false,"staff":false,"user_id":98,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/130","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277732,"name":"Dima Tisnek","username":"dimaqq","avatar_template":"/user_avatar/discuss.python.org/dimaqq/{size}/372_2.png","created_at":"2025-11-19T07:09:23.108Z","cooked":"\u003caside class=\"quote group-committers quote-modified\" data-username=\"alex_Gaynor\" data-post=\"91\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/alex_gaynor/48/17_2.png\" class=\"avatar\"\u003e alex_Gaynor:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote no-group\" data-username=\"dimaqq\" data-post=\"88\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/dimaqq/48/372_2.png\" class=\"avatar\"\u003e dimaqq:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA safe C equivalent would be two lines long.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eFWIW, I’ve tried pretty hard, but I can’t find a way to write a (readable) 2-line version of this function in C that retains the overflow checking.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eMy take:\u003c/p\u003e\n\u003cpre data-code-wrap=\"c\"\u003e\u003ccode class=\"lang-c\"\u003eif (len \u0026gt; PRECOMPUTED_CONST) return -1;\nreturn (len + 2) / 3 * 4;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eMy point was exactly about the fact that crustaceans worry about overflow checking, borrow safety, traits, etc., and write verbose code that is beautiful, while pragmatic folk reduce the problem, put safety limits leaving the implementation very short.\u003c/p\u003e\n\u003cp\u003eAfter all, what’s the point of encoding a string that’s larger than a fraction of the total address space? The Rust overflow checker is only effective at ~3/4 RAM, at which point the argument and result cannot fit into RAM at the same time.\u003c/p\u003e\n\u003cp\u003eFancy Rust safety is totally appropriate for user-defined or external input (e.g. networking code, cryptography or \u003ccode\u003ejson.dumps\u003c/code\u003e argument where some inner dict-like object may have a custom dunder method that does some “caching” but ends up modifying sibling elements in flight or creates cycles), while simple concepts should \u003cstrong\u003ein my opinion\u003c/strong\u003e remain simple, so that the code remains maintainable, ideally also by contributors who are not Rust experts. Which is why I’m calling for the equivalent of PEP-7 for Rust use in CPython.\u003c/p\u003e\n\u003caside class=\"quote no-group quote-modified\" data-username=\"ShalokShalom\" data-post=\"94\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/shalokshalom/48/32588_2.png\" class=\"avatar\"\u003e ShalokShalom:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRust’s memory safety guarantees have been formally proven by the RustBelt project for code that does not use “unsafe” .\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/Speykious/cve-rs\" rel=\"noopener nofollow ugc\"\u003eThere are CVE’s in safe Rust\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’d go even further and decry “proven safe” as smoke and mirrors.\u003c/p\u003e\n\u003cp\u003eRemember the BAN logic proof for the Needham–Schroeder protocol?\u003c/p\u003e\n\u003cp\u003eTo recap, every proof is against a certain fixed set of assumptions. Meanwhile what happens in practice is that software is reused in ways unpredictable a priori. RustBelt has proven \u003cstrong\u003esomething\u003c/strong\u003e about Rust, but not about Rust use in CPython, or Rust use in 3rd party Python extensions and certainly not about Rust used within CPython when an arbitrary user program is run by the interpreter, with arbitrary additional extension, for arbitrary goals and with arbitrary thread model.\u003c/p\u003e\n\u003cp\u003eHere my call is to move most of Rust exultations into the footnotes, and focus on tangible direct benefits instead: safer refactoring / faster reviews, broader contributor pool / potentially more approachable to new contributors who grew up with safe/typed languages, specific CPython core bug classes (not generic C bugs), cleaner (more self-documented) internal APIs, safer norms for 3rd party extensions, possibly safer/faster backport story, potentially better tooling, possibly CPython guts (e.g. regexp) shared as crates for other uses…\u003c/p\u003e","post_number":131,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T07:09:23.108Z","reply_count":2,"reply_to_post_number":91,"quote_count":3,"incoming_link_count":2,"reads":220,"readers_count":219,"score":153.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Dima Tisnek","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":301,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/131","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277734,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-19T07:32:31.612Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"dimaqq\" data-post=\"131\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/dimaqq/48/372_2.png\" class=\"avatar\"\u003e Dima Tisnek:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhich is why I’m calling for the equivalent of PEP-7 for Rust use in CPython.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis is definitely something I hope to work on with folks. We will need a standard style for Rust in CPython, but I also think that might depend as we adopt Rust and expand the current proof of concept. Regardless it probably should be it’s own PEP, in my mind drafted and published after this one is approved.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"dimaqq\" data-post=\"131\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/dimaqq/48/372_2.png\" class=\"avatar\"\u003e Dima Tisnek:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRustBelt has proven \u003cstrong\u003esomething\u003c/strong\u003e about Rust, but not about Rust use in CPython\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThat’s certainly true, but in projects that have adopted Rust for a while, we see significant decreases in memory safety bugs. Here’s an excerpt from a blog about Rust adoption in Android:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWe adopted Rust for its security and are seeing \u003cstrong\u003ea 1000x reduction in memory safety vulnerability density compared to Android’s C and C++ code\u003c/strong\u003e. But the biggest surprise was Rust’s impact on software delivery. With Rust changes having \u003cstrong\u003ea 4x lower rollback rate\u003c/strong\u003e and spending \u003cstrong\u003e25% less time in code review\u003c/strong\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOur historical data for C and C++ shows a density of closer to 1,000 memory safety vulnerabilities per MLOC. Our Rust code is currently tracking at a density orders of magnitude lower: \u003cstrong\u003ea more than 1000x reduction.\u003c/strong\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eFrom \u003ca href=\"https://security.googleblog.com/2025/11/rust-in-android-move-fast-fix-things.html\" class=\"inline-onebox\"\u003eGoogle Online Security Blog: Rust in Android: move fast and fix things\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI agree with you that it is important to highlight that Rust can increase developer velocity as well as provide memory safety. I think this is something we will highlight more in the PEP draft and is something a few people have mentioned. Here’s another excerpt from the above blog related to that:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cstrong\u003eFor medium and large changes, the rollback rate of Rust changes in Android is ~4x lower than C++.\u003c/strong\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRust changes currently spend about 25% less time in code review compared to C++.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThese are definitely things we will be focusing on more in the PEP text itself.\u003c/p\u003e","post_number":132,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T07:32:51.476Z","reply_count":0,"reply_to_post_number":131,"quote_count":1,"incoming_link_count":7,"reads":222,"readers_count":221,"score":198.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://security.googleblog.com/2025/11/rust-in-android-move-fast-fix-things.html","internal":false,"reflection":false,"title":"Google Online Security Blog: Rust in Android: move fast and fix things","clicks":2}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":8}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/132","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277740,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-19T08:50:24.905Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"dimaqq\" data-post=\"131\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/dimaqq/48/372_2.png\" class=\"avatar\"\u003e dimaqq:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eTo recap, every proof is against a certain fixed set of assumptions. Meanwhile what happens in practice is that software is reused in ways unpredictable a priori. RustBelt has proven \u003cstrong\u003esomething\u003c/strong\u003e about Rust, but not about Rust use in CPython, or Rust use in 3rd party Python extensions and certainly not about Rust used within CPython when an arbitrary user program is run by the interpreter, with arbitrary additional extension, for arbitrary goals and with arbitrary thread model.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWhile I agree that focus should be on other benefits (eg. I spent a decade in /r/rust/ and people coming from C++ loved the tooling most), I think it goes too far to call “proven safe” smoke and mirrors. That stance generalizes far too easily to things like “It’s a waste of time to make Python memory safe because \u003ccode\u003eimport ctypes\u003c/code\u003e exists”, which makes it far too easy for people to dismiss… especially when the whole point of things like the safe/unsafe split and the \u003cem\u003eway\u003c/em\u003e parts of Rust have been formally verified is to draw boxes around bits of code and say “assuming no external factor, such as bad RAM or abuse of \u003ccode\u003eunsafe\u003c/code\u003e violates the invariants, this code’s behaviour will meet expectations”.\u003c/p\u003e","post_number":133,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T10:55:19.237Z","reply_count":0,"reply_to_post_number":131,"quote_count":1,"incoming_link_count":2,"reads":216,"readers_count":215,"score":82.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/133","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277741,"name":"Ricardo Robles","username":"rroblf01","avatar_template":"/user_avatar/discuss.python.org/rroblf01/{size}/32517_2.png","created_at":"2025-11-19T08:53:05.681Z","cooked":"\u003cp\u003eI’m not a Rust expert; I only have work experience with C/C++ and Python. What advantages would Rust have over other languages ​​like Go? I’m just asking to understand Rust’s advantages and to make sure it’s for a real reason and not just to “Rustify” everything.\u003c/p\u003e","post_number":134,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T08:53:05.681Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":214,"readers_count":213,"score":122.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Ricardo Robles","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":79936,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/134","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277742,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-19T08:55:50.106Z","cooked":"\u003cp\u003eGo depends on having a garbage collector and garbage collectors are solitary creatures, which makes it unsuitable for writing extensions or rewriting components of a C or C++ codebase. (That’s one reason Jython and IronPython exist, instead of integrating CPython with the JVM and CLR. They live within the JVM or CLR’s existing GC instead of competing with it.)\u003c/p\u003e\n\u003cp\u003eRust is noteworthy because it’s the only language to gain significant traction in this niche previously held almost exclusively by C and C++.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eEDIT:\u003c/strong\u003e To elaborate on that, Rust enables compile-time guarantees that C and C++ are incapable of without relying on a heavy VM to do it. That’s what makes it essentially unique. (Though other languages like D and Ada \u003cem\u003eare\u003c/em\u003e starting to copy Rust’s innovations.)\u003c/p\u003e","post_number":135,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T09:01:39.565Z","reply_count":0,"reply_to_post_number":134,"quote_count":0,"incoming_link_count":0,"reads":220,"readers_count":219,"score":223.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":79936,"username":"rroblf01","name":"Ricardo Robles","avatar_template":"/user_avatar/discuss.python.org/rroblf01/{size}/32517_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":12}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/135","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277746,"name":"Miraculixx","username":"miraculixx","avatar_template":"/user_avatar/discuss.python.org/miraculixx/{size}/9503_2.png","created_at":"2025-11-19T09:06:42.019Z","cooked":"\u003cp\u003eNot a core dev, yet experienced in large scale sw development including changing of core tech. Spoiler alert: these efforts usually fail.\u003c/p\u003e\n\u003cp\u003eI always recommend to answer three key questions before embarking on changing foundational pieces of the stack:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eIs the new stack introduced for its coolness instead of solving an actual problem?\u003c/li\u003e\n\u003cli\u003eWill the new stack introduce new problems that the old stack does not have?\u003c/li\u003e\n\u003cli\u003eDoes the investment in time and effort to introduce the new stack compete with more worthwile work that delivers value to users?\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIf the answer to any of these questions is yes, and the change is pressed on anyway, the outcome will eventually land in one of two states:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eEfforts will stall and the resulting two-stack system is more complex than ever before, effectively meaning the change will be consuming ever more resources to no good cause.\u003c/li\u003e\n\u003cli\u003eThe complexities introduced by the new stack have a far higher blast radius than previously anticipated, triggering a complete rewrite, eventually reaching feature parity with no added value.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eIn short, I recommend to avoid the introduction of Rust as an alternative to C in CPython(!).\u003c/p\u003e","post_number":136,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T09:10:31.575Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":2,"reads":221,"readers_count":220,"score":223.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Miraculixx","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":11}],"moderator":false,"admin":false,"staff":false,"user_id":9212,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/136","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277749,"name":"Kirill Podoprigora","username":"Eclips4","avatar_template":"/user_avatar/discuss.python.org/eclips4/{size}/32292_2.png","created_at":"2025-11-19T09:34:33.025Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"miraculixx\" data-post=\"136\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/miraculixx/48/9503_2.png\" class=\"avatar\"\u003e Miraculixx:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eNot a core dev, yet experienced in large scale sw development including changing of core tech. Spoiler alert: these efforts usually fail.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWe’ve received a lot of messages from people who want to help, and even members of the Rust core team are willing to support us. As we mentioned earlier, there are two strong examples of Rust adoption done right: Rust for Linux and Rust for Android. Here’s the blog post from the Android team: \u003ca href=\"https://security.googleblog.com/2025/11/rust-in-android-move-fast-fix-things.html\" class=\"inline-onebox\"\u003eGoogle Online Security Blog: Rust in Android: move fast and fix things\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eWe’re fully committed to putting a lot of effort into this initiative, and to making sure we don’t fail \u003cimg src=\"https://emoji.discourse-cdn.com/apple/slightly_smiling_face.png?v=15\" title=\":slightly_smiling_face:\" class=\"emoji\" alt=\":slightly_smiling_face:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"miraculixx\" data-post=\"136\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/miraculixx/48/9503_2.png\" class=\"avatar\"\u003e Miraculixx:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIs the new stack introduced for its coolness instead of solving an actual problem?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWe’re addressing a real problem: CPython like many other projects written in C or C++ suffers from memory-safety vulnerabilities. Rust can drastically reduce the number of these vulnerabilities.\u003cbr\u003e\nFrom the Android blog post:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWe adopted Rust for its security and are seeing \u003cstrong\u003ea 1000x reduction in memory safety vulnerability density compared to Android’s C and C++ code\u003c/strong\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003caside class=\"quote no-group\" data-username=\"miraculixx\" data-post=\"136\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/miraculixx/48/9503_2.png\" class=\"avatar\"\u003e Miraculixx:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWill the new stack introduce new problems that the old stack does not have?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’m pretty sure this project will encounter at least one challenge: CPython contributors who don’t know Rust will need to dedicate some time if they want to contribute to the Rust parts. Other challenges will only become clear as we move forward, and that’s where members of the Rust core team may be able to help us. As I understand it, they supported the Rust for Linux project as well.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"miraculixx\" data-post=\"136\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/miraculixx/48/9503_2.png\" class=\"avatar\"\u003e Miraculixx:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eDoes the investment in time and effort to introduce the new stack compete with more worthwile work that delivers value to users?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSorry, but I’m reading that part of your message as if this were about business. CPython is an open-source project, and most of us volunteer our time for free. Because we’re volunteers, we’re free to choose whichever problems we want to work on. So, we chose this problem and here’s the solution we believe in: Rust \u003cimg src=\"https://emoji.discourse-cdn.com/apple/slightly_smiling_face.png?v=15\" title=\":slightly_smiling_face:\" class=\"emoji\" alt=\":slightly_smiling_face:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"miraculixx\" data-post=\"136\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/miraculixx/48/9503_2.png\" class=\"avatar\"\u003e Miraculixx:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003eEfforts will stall and the resulting two-stack system is more complex than ever before, effectively meaning the change will be consuming ever more resources to no good cause.\u003c/li\u003e\n\u003cli\u003eThe complexities introduced by the new stack have a far higher blast radius than previously anticipated, triggering a complete rewrite, eventually reaching feature parity with no added value.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’d like to quote Android blog again:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eBut the biggest surprise was Rust’s impact on software delivery. With Rust changes having \u003cstrong\u003ea 4x lower rollback rate\u003c/strong\u003e and spending \u003cstrong\u003e25% less time in code review\u003c/strong\u003e, the safer path is now also the faster one.\u003c/p\u003e\n\u003c/blockquote\u003e","post_number":137,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T09:34:33.025Z","reply_count":1,"reply_to_post_number":136,"quote_count":1,"incoming_link_count":10,"reads":219,"readers_count":218,"score":143.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Kirill Podoprigora","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://security.googleblog.com/2025/11/rust-in-android-move-fast-fix-things.html","internal":false,"reflection":false,"title":"Google Online Security Blog: Rust in Android: move fast and fix things","clicks":4}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":8236,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/137","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277752,"name":"Miraculixx","username":"miraculixx","avatar_template":"/user_avatar/discuss.python.org/miraculixx/{size}/9503_2.png","created_at":"2025-11-19T09:52:56.490Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"Eclips4\" data-post=\"137\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/eclips4/48/32292_2.png\" class=\"avatar\"\u003e Eclips4:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWe’re fully committed to putting a lot of effort into this initiative, and to making sure we don’t fail \u003cimg src=\"https://emoji.discourse-cdn.com/apple/slightly_smiling_face.png?v=15\" title=\":slightly_smiling_face:\" class=\"emoji\" alt=\":slightly_smiling_face:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSaid every team ever. I don’t doubt that.\u003c/p\u003e\n\u003cp\u003eJust for reference, can you point to some of the memory saftey issues that would have been avoided if CPython were using Rust?\u003c/p\u003e","post_number":138,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T09:52:56.490Z","reply_count":1,"reply_to_post_number":137,"quote_count":1,"incoming_link_count":7,"reads":217,"readers_count":216,"score":173.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Miraculixx","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":9212,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/138","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277758,"name":"Zander","username":"Zander-1024","avatar_template":"/user_avatar/discuss.python.org/zander-1024/{size}/32625_2.png","created_at":"2025-11-19T10:08:08.246Z","cooked":"\u003cp\u003eIt is undeniable that Rust offers superior safety over C and can effectively prevent many errors that would otherwise occur. However, introducing Rust into CPython may inevitably lead to some divergence within the community, with some developers in favor and others potentially having reservations. Additionally, this would require developers to be proficient in C, Rust to effectively address related issues.\u003c/p\u003e\n\u003cp\u003eMore importantly, as the proportion of Rust code in the project gradually increases, there may be growing calls within the community for a full transition of CPython to Rust. This could further intensify disagreements among core developers, somewhat reminiscent of certain situations the Linux community has experienced in the past.\u003c/p\u003e\n\u003cp\u003eIf all proceeds smoothly, we might eventually achieve a RustPython that remains compatible with the C ABI. That said, RustPython already exists today, though it still lags behind CPython in terms of features and ecosystem. Wouldn’t steadily improving it be a more feasible path forward? This approach may prove more manageable than integrating Rust directly into CPython.\u003c/p\u003e\n\u003cp\u003eIf there is a clear advantage to introducing Rust into CPython, it may lie in the ability to gradually migrate the official Python implementation from C to Rust while preserving existing functionality and compatibility. If the current path is maintained, CPython will continue to be implemented in C, and even if RustPython develops remarkably, replacing the official implementation would present significant challenges—since doing so would likely require the current maintenance team to undergo a major transition.\u003c/p\u003e","post_number":139,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T10:08:08.246Z","reply_count":3,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":8,"reads":225,"readers_count":224,"score":189.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Zander","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":80130,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/139","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277762,"name":"Kirill Podoprigora","username":"Eclips4","avatar_template":"/user_avatar/discuss.python.org/eclips4/{size}/32292_2.png","created_at":"2025-11-19T10:12:51.385Z","cooked":"\u003cp\u003e\u003ca href=\"https://github.com/python/cpython/pull/129648\" class=\"inline-onebox\"\u003egh-133767: Fix use-after-free in the unicode-escape decoder with an error handler by serhiy-storchaka · Pull Request #129648 · python/cpython · GitHub\u003c/a\u003e and many other UAFs\u003c/p\u003e","post_number":140,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T10:12:51.385Z","reply_count":0,"reply_to_post_number":138,"quote_count":0,"incoming_link_count":5,"reads":228,"readers_count":227,"score":114.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Kirill Podoprigora","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/python/cpython/pull/129648","internal":false,"reflection":false,"title":"gh-133767: Fix use-after-free in the unicode-escape decoder with an error handler by serhiy-storchaka · Pull Request #129648 · python/cpython · GitHub","clicks":26}],"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":9212,"username":"miraculixx","name":"Miraculixx","avatar_template":"/user_avatar/discuss.python.org/miraculixx/{size}/9503_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":8236,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/140","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277764,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-19T10:53:11.705Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Zander-1024\" data-post=\"139\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/zander-1024/48/32625_2.png\" class=\"avatar\"\u003e Zander-1024:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf all proceeds smoothly, we might eventually achieve a RustPython that remains compatible with the C ABI. That said, RustPython already exists today, though it still lags behind CPython in terms of features and ecosystem. Wouldn’t steadily improving it be a more feasible path forward? This approach may prove more manageable than integrating Rust directly into CPython.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWhenever I see arguments like this, I get the impression that the people making such an argument forget what “volunteer” means.\u003c/p\u003e\n\u003cp\u003eIf they’re not getting paid to work on Python, then it’s entirely possible that it’s not “Rust vs. C”, but “Rust vs. wear out and stop contributing”.\u003c/p\u003e\n\u003cp\u003eI know that situation is why I’m rewriting my Python projects in Rust. Even without memory safety on the line and even with strict-mode MyPy, the constant vigilance of a dynamic language with ubiquitous NULL/None/nil and exceptions introducing hidden return paths all over the place wears on me.\u003c/p\u003e","post_number":141,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T10:54:17.901Z","reply_count":1,"reply_to_post_number":139,"quote_count":1,"incoming_link_count":19,"reads":231,"readers_count":230,"score":250.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":7}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/141","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277785,"name":"Jacopo Abramo","username":"jacopoabramo","avatar_template":"/user_avatar/discuss.python.org/jacopoabramo/{size}/23840_2.png","created_at":"2025-11-19T15:17:01.954Z","cooked":"\u003cp\u003eI don’t want to bring fuel to the fire as I’m just observing the decision making process, but the timing of the situation was just too funny for me.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://blog.cloudflare.com/20-percent-internet-upgrade/\" rel=\"noopener nofollow ugc\"\u003eApparently in September Cloudflare migrated some internal library to Rust\u003c/a\u003e…\u003c/p\u003e\n\u003cp\u003e… \u003ca href=\"https://blog.cloudflare.com/18-november-2025-outage/\" rel=\"noopener nofollow ugc\"\u003eand after investigation, the recent November outage was effectively caused by some code that wasn’t appropriately managing memory in this new library.\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eBut at any rate the pre-PEP has already been discussed exhaustively, it was just my sense of humour that found this hilarious in the context of this discussion where lots of points about integrating Rust were about memory safety.\u003c/p\u003e","post_number":142,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T15:17:01.954Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":3,"reads":226,"readers_count":225,"score":144.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jacopo Abramo","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://blog.cloudflare.com/18-november-2025-outage/","internal":false,"reflection":false,"title":"Cloudflare outage on November 18, 2025","clicks":29},{"url":"https://blog.cloudflare.com/20-percent-internet-upgrade/","internal":false,"reflection":false,"title":"Cloudflare just got faster and more secure, powered by Rust","clicks":8}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":43595,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/142","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277790,"name":"Paul Moore","username":"pf_moore","avatar_template":"/user_avatar/discuss.python.org/pf_moore/{size}/35_2.png","created_at":"2025-11-19T15:43:03.986Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"ssokolow\" data-post=\"141\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/ssokolow/48/32572_2.png\" class=\"avatar\"\u003e Stephan Sokolow:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf they’re not getting paid to work on Python, then it’s entirely possible that it’s not “Rust vs. C”, but “Rust vs. wear out and stop contributing”.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis is a good point that doesn’t seem to be getting enough attention. I can’t speak for any of the core devs that routinely work on the C parts of the codebase, but I can say that personally, there were a number of improvements that I would have loved to make to the old \u003ccode\u003epy\u003c/code\u003e launcher, which I gave up on because I couldn’t face the manual memory management, and pointer manipulation, involved in string processing in C. If the launcher had been written in Rust\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277790-1\" id=\"footnote-ref-277790-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e, then I could have used Rust’s standard string type, and as a result I would have been motivated to work on those improvements.\u003c/p\u003e\n\u003cp\u003eSo yes, a significant benefit of using Rust, even just for isolated parts of the Python stdlib, is that it could dramatically reduce the risk of developer burnout. Of course, we have to take care not to have the transition process burn people out as well, but I’m in favour of doing extra work to manage a short-term transition exercise in order to set up a better long term foundation.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277790-1\" class=\"footnote-item\"\u003e\u003cp\u003eAn entirely reasonable possibility, it was self contained, and its build process is isolated from the core build. \u003ca href=\"#footnote-ref-277790-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":143,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T15:43:03.986Z","reply_count":1,"reply_to_post_number":141,"quote_count":1,"incoming_link_count":4,"reads":228,"readers_count":227,"score":589.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Paul Moore","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":33}],"moderator":false,"admin":false,"staff":false,"user_id":35,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/143","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277807,"name":"Roman Vlasenko","username":"Klavionik","avatar_template":"/user_avatar/discuss.python.org/klavionik/{size}/32639_2.png","created_at":"2025-11-19T17:20:57.412Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"jacopoabramo\" data-post=\"142\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jacopoabramo/48/23840_2.png\" class=\"avatar\"\u003e jacopoabramo:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eit was just my sense of humour that found this hilarious in the context of this discussion where lots of points about integrating Rust were about memory safety.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI’d say that this is misleading. The Cloudflare’s outage actually has nothing to do with the memory safety guarantees of Rust or with inappropriately managing memory in general.\u003c/p\u003e","post_number":144,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T17:22:47.073Z","reply_count":0,"reply_to_post_number":142,"quote_count":1,"incoming_link_count":0,"reads":220,"readers_count":219,"score":118.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Roman Vlasenko","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":80167,"hidden":false,"trust_level":0,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/144","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277808,"name":"Davide Rizzo","username":"sorcio","avatar_template":"https://avatars.discourse-cdn.com/v4/letter/s/50afbb/{size}.png","created_at":"2025-11-19T17:27:57.550Z","cooked":"\u003cp\u003eI’m a huge fan of this proposal. Thanks everyone for the effort. I volunteer to support in the endeavor in any way needed.\u003c/p\u003e\n\u003cp\u003eThe technical details can be discussed in due time, but one thing I’d love is for CPython API to define things around ownership and thread safety more formally. Right now this is delegated to documentation, but both C users and foreign language binding implementers (e.g. Rust and C++) would benefit if they could verify that a certain reference is meant to be owned or borrowed and so on.\u003c/p\u003e\n\u003cp\u003eI understand there are challenges on both the technical and social aspect. I wish for both the aspects to be cared for seriously (and I renew my availability for help). It’s not the first time that adoption of Rust in a big project brings up some strong\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277808-1\" id=\"footnote-ref-277808-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e resistance. I feel that there is space to adequately understand needs and worries; and to empower the people who have some stake in this change to impact the process.\u003c/p\u003e\n\u003cp\u003eFor example, some people brought up a worry that Rust is chosen because it’s a trendy toy rather than an actual solution. It’s good to spend time identifying why this is considered a problem, why it is a worry, and what can be done to address it. In part this is being done now (thanks to everyone who took time to answer) by reassuring that there is technical merit and proper research into the solution. But maybe this is not the whole argument and people would like to hear something closer to their worry. In other contexts I’ve seen a resistance to Rust adoption as a sort of threat to job stability (growing as a proficient C programmer takes a huge investment and attention to a number of issues, and something like Rust seems to promise to automate away part of your skill set), and maybe that also needs to be treated with care and empathy.\u003c/p\u003e\n\u003cp\u003eAnd, on the other side, people wanting to see Rust introduced have their needs (that might not be entirely obvious besides the technical value) and might be faced with walls and gatekeeping and, as it happened in other projects, could be discouraged or burn out when they don’t see those needs understood, or their good will acknowledged.\u003c/p\u003e\n\u003cp\u003eSo, please, let’s not disregard that this is a socially loaded topic, and people are already reacting in many ways. I hope that the discussion will be smooth but I will not bet on it.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277808-1\" class=\"footnote-item\"\u003e\u003cp\u003eand, sometimes, unexpectedly violent or vicious. Fortunately nothing of that sort is visible on this thread. \u003ca href=\"#footnote-ref-277808-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":145,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T17:27:57.550Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":8,"reads":223,"readers_count":222,"score":118.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Davide Rizzo","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":7283,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/145","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277812,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-19T18:58:54.670Z","cooked":"\u003cp\u003eTo elaborate on “nothing to do with […] Rust”, the outage was down to:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eWe wrote a recipient service which preallocates memory as an optimization.\u003c/li\u003e\n\u003cli\u003eSince we wrote it to ingest data from one of our other services, we made the assumption the data would always be well formed and had it preallocate 3⅓ times as much space as we’re currently using.\u003c/li\u003e\n\u003cli\u003eWe committed a bug to the sender service which caused it to produce data bundles that blew past that 3⅓ times safety margin.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eIt’s a logic bug. If they’d written it in C or C++ it would have been an \u003ccode\u003eASSERT\u003c/code\u003e or \u003ccode\u003eSIGSEGV\u003c/code\u003e and, in Rust, it was doing the equivalent of dying with an uncaught \u003ccode\u003eAssertionError\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e(Basically, a violation of “Assume ‘unreachable’ never is”.)\u003c/p\u003e","post_number":146,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T19:30:07.964Z","reply_count":0,"reply_to_post_number":142,"quote_count":0,"incoming_link_count":6,"reads":218,"readers_count":217,"score":132.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":5,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":43595,"username":"jacopoabramo","name":"Jacopo Abramo","avatar_template":"/user_avatar/discuss.python.org/jacopoabramo/{size}/23840_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/146","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277835,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-19T22:33:31.068Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"sorcio\" data-post=\"145\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/50afbb/48.png\" class=\"avatar\"\u003e Davide Rizzo:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI volunteer to support in the endeavor in any way needed.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eExcellent! Thank you!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"sorcio\" data-post=\"145\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/50afbb/48.png\" class=\"avatar\"\u003e Davide Rizzo:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe technical details can be discussed in due time, but one thing I’d love is for CPython API to define things around ownership and thread safety more formally. Right now this is delegated to documentation, but both C users and foreign language binding implementers (e.g. Rust and C++) would benefit if they could verify that a certain reference is meant to be owned or borrowed and so on.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI think that in Linux they have seen a number of improvements by better defining the ownership of various parts of the kernel, so this would be very nice. I think it may be a while before it is feasible, but we shall see!\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"sorcio\" data-post=\"145\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://avatars.discourse-cdn.com/v4/letter/s/50afbb/48.png\" class=\"avatar\"\u003e Davide Rizzo:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSo, please, let’s not disregard that this is a socially loaded topic, and people are already reacting in many ways. I hope that the discussion will be smooth but I will not bet on it.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eVery important to remember! Going into working on this proposal I was trying to be very cognizant that this topic can engender strong feelings. I think overall I have been pleased with how the discussions have gone so far. I think so far folks have demonstrated that they can engage on this topic in a level-headed and cordial manner. I hope that trend continues. I also hope it has been clear in my own communications that I hope to understand and care about the the views of people who may disagree with the proposal. I do not want to drive away current contributors. I will also re-iterate that if anyone would like to chat about concerns regarding the proposal not in a discussion thread, please feel free to DM me!\u003c/p\u003e","post_number":147,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T22:33:31.068Z","reply_count":1,"reply_to_post_number":145,"quote_count":1,"incoming_link_count":1,"reads":215,"readers_count":214,"score":127.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/147","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277845,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-19T23:53:39.410Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"Zander-1024\" data-post=\"139\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/zander-1024/48/32625_2.png\" class=\"avatar\"\u003e Zander:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRustPython already exists today, though it still lags behind CPython in terms of features and ecosystem. Wouldn’t steadily improving it be a more feasible path forward?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI don’t think so for a couple of reasons. First, RustPython are semantically different enough that I think merging the semantics would be a significant undertaking:\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRustPython isn’t something that can be considered in this PEP in short term. RustPython and CPython are not semantically compatible across many layers of their implementation.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003caside class=\"quote no-group\" data-username=\"youknowone\" data-post=\"57\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/youknowone/48/19382_2.png\" class=\"avatar\"\u003e Jeong, YunWon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRustPython has its own approach to running without a GIL, but it’s not compatible with CPython’s nogil direction.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSecond, introducing Rust to CPython would see direct benefits to the millions of users CPython has today. Improving RustPython might see benefits to it’s current user base, but to get current CPython users to switch would need to be earned through proven compatibility over a long time period. That sounds like much more of an uphill battle with unclear benefits.\u003c/p\u003e","post_number":148,"post_type":1,"posts_count":192,"updated_at":"2025-11-19T23:53:39.410Z","reply_count":0,"reply_to_post_number":139,"quote_count":2,"incoming_link_count":1,"reads":214,"readers_count":213,"score":92.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":3}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/148","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277847,"name":"Brett Cannon","username":"brettcannon","avatar_template":"/user_avatar/discuss.python.org/brettcannon/{size}/21723_2.png","created_at":"2025-11-20T00:22:54.256Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"ncoghlan\" data-post=\"130\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/ncoghlan/48/14266_2.png\" class=\"avatar\"\u003e Alyssa Coghlan:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003elong tail platform support concerns\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eFYI \u003ca href=\"https://github.blog/open-source/git/highlights-from-git-2-52/#:~:text=Git%2C%20this%20release%20is%20the%20first%20to%20(optionally)%20use%20Rust%20code%20for%20some%20internal%20functionality%20within%20Git\"\u003eGit 2.52 now optionally uses Rust\u003c/a\u003e and it will be \u003ca href=\"https://github.blog/open-source/git/highlights-from-git-2-52/#:~:text=Rust%20support%20is%20not%20yet%20mandatory%2C%20so%20Git%202.52%20will%20continue%20to%20run%20just%20fine%20on%20platforms%20that%20don%E2%80%99t%20have%20a%20Rust%20compiler.%20However%2C%20Rust%20support%20will%20be%20required%20for%20Git%203.0%2C%20at%20which%20point%20many%20more%20components%20of%20Git%20will%20likely%20depend%20on%20Rust%20code\"\u003erequired in Git 3\u003c/a\u003e.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"Zander-1024\" data-post=\"139\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/zander-1024/48/32625_2.png\" class=\"avatar\"\u003e Zander:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eintroducing Rust into CPython may inevitably lead to some divergence within the community\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eDivergence how? The key people who would be affected by this are:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCore developers\u003c/li\u003e\n\u003cli\u003ePeople who build CPython from source\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eBut as has already been stated, the PEP will have Rust usage be optional, so really, the people who will be affected by the planned PEP are:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eCore developers\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAnd so far I have seen more +1 than -1 from core developers.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"pf_moore\" data-post=\"143\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/pf_moore/48/35_2.png\" class=\"avatar\"\u003e Paul Moore:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf the launcher had been written in Rust\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/brettcannon/python-launcher\" class=\"inline-onebox\"\u003eGitHub - brettcannon/python-launcher: Python launcher for Unix\u003c/a\u003e (although admittedly I’m now curious to see if Python performance is such that I can just do it in pure Python and package it up appropriately).\u003c/p\u003e","post_number":149,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T00:22:54.256Z","reply_count":1,"reply_to_post_number":130,"quote_count":3,"incoming_link_count":8,"reads":208,"readers_count":207,"score":236.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Brett Cannon","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/brettcannon/python-launcher","internal":false,"reflection":false,"title":"GitHub - brettcannon/python-launcher: Python launcher for Unix","clicks":19},{"url":"https://github.blog/open-source/git/highlights-from-git-2-52/#:~:text=Rust%20support%20is%20not%20yet%20mandatory%2C%20so%20Git%202.52%20will%20continue%20to%20run%20just%20fine%20on%20platforms%20that%20don%E2%80%99t%20have%20a%20Rust%20compiler.%20However%2C%20Rust%20support%20will%20be%20required%20for%20Git%203.0%2C%20at%20which%20point%20many%20more%20components%20of%20Git%20will%20likely%20depend%20on%20Rust%20code","internal":false,"reflection":false,"title":"Highlights from Git 2.52 - The GitHub Blog","clicks":19},{"url":"https://github.blog/open-source/git/highlights-from-git-2-52/#:~:text=Git%2C%20this%20release%20is%20the%20first%20to%20(optionally)%20use%20Rust%20code%20for%20some%20internal%20functionality%20within%20Git","internal":false,"reflection":false,"title":"Highlights from Git 2.52 - The GitHub Blog","clicks":16}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":10}],"moderator":true,"admin":true,"staff":true,"user_id":36,"hidden":false,"trust_level":4,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/149","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277849,"name":"H. Vetinari","username":"h-vetinari","avatar_template":"/user_avatar/discuss.python.org/h-vetinari/{size}/1220_2.png","created_at":"2025-11-20T00:58:32.354Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"147\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI think that in Linux they have seen a number of improvements by better defining the ownership of various parts of the kernel, so this would be very nice.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis is one of the points that Greg KH\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277849-1\" id=\"footnote-ref-277849-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e explicitly calls out repeatedly as a benefit of the Rust-for-Linux effort, even if Rust went away again (here’s a recent talk with a timestamped \u003ca href=\"https://www.youtube.com/watch?v=HX0GH-YJbGw\u0026amp;t=760s\" rel=\"noopener nofollow ugc\"\u003elink\u003c/a\u003e): By forcing the C APIs to define their semantics, the C APIs themselves often were improved.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277849-1\" class=\"footnote-item\"\u003e\u003cp\u003eone of the most veteran Linux contributors, maintainer of LTS kernels and involved in every security issue \u003ca href=\"#footnote-ref-277849-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":150,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T00:58:32.354Z","reply_count":1,"reply_to_post_number":147,"quote_count":1,"incoming_link_count":3,"reads":210,"readers_count":209,"score":211.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"H. Vetinari","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://www.youtube.com/watch?v=HX0GH-YJbGw\u0026t=760s","internal":false,"reflection":false,"clicks":11}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":10}],"moderator":false,"admin":false,"staff":false,"user_id":1017,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/150","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277874,"name":"GalaxySnail","username":"GalaxySnail","avatar_template":"/user_avatar/discuss.python.org/galaxysnail/{size}/5655_2.png","created_at":"2025-11-20T04:51:04.783Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"brettcannon\" data-post=\"149\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/brettcannon/48/21723_2.png\" class=\"avatar\"\u003e Brett Cannon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eFYI \u003ca href=\"https://github.blog/open-source/git/highlights-from-git-2-52/#:~:text=Git%2C%20this%20release%20is%20the%20first%20to%20(optionally)%20use%20Rust%20code%20for%20some%20internal%20functionality%20within%20Git\" rel=\"noopener nofollow ugc\"\u003eGit 2.52 now optionally uses Rust\u003c/a\u003e and it will be \u003ca href=\"https://github.blog/open-source/git/highlights-from-git-2-52/#:~:text=Rust%20support%20is%20not%20yet%20mandatory%2C%20so%20Git%202.52%20will%20continue%20to%20run%20just%20fine%20on%20platforms%20that%20don%E2%80%99t%20have%20a%20Rust%20compiler.%20However%2C%20Rust%20support%20will%20be%20required%20for%20Git%203.0%2C%20at%20which%20point%20many%20more%20components%20of%20Git%20will%20likely%20depend%20on%20Rust%20code\" rel=\"noopener nofollow ugc\"\u003erequired in Git 3\u003c/a\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eGit 2 → Git 3 sounds like Python 3 → Python 4. Git isn’t a programming language, you only need an implementation of \u003ca href=\"https://git-scm.com/docs/protocol-v2\" rel=\"noopener nofollow ugc\"\u003eGit’s wire protocol\u003c/a\u003e to interoperate with others, don’t even need to keep the on-disk format compatible. I don’t think Git’s choice necessarily tells us what we should do for CPython. Since the authors of this pre-PEP have already decided to make Rust optional for CPython, there isn’t much more to discuss about making Rust required.\u003c/p\u003e","post_number":151,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T04:51:04.783Z","reply_count":1,"reply_to_post_number":149,"quote_count":1,"incoming_link_count":0,"reads":200,"readers_count":199,"score":119.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"GalaxySnail","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://git-scm.com/docs/protocol-v2","internal":false,"reflection":false,"title":"Git - protocol-v2 Documentation","clicks":6}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":5874,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/151","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277875,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-20T05:10:25.037Z","cooked":"\u003cp\u003eGit 3 is bringing in support for SHA256 commit hashes, which is a protocol break. (From what I remember, Rust is used to write the part which allows seamless SHA1 → SHA256 transitioning within a repo.)\u003c/p\u003e","post_number":152,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T05:10:25.037Z","reply_count":0,"reply_to_post_number":151,"quote_count":0,"incoming_link_count":0,"reads":196,"readers_count":195,"score":38.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":5874,"username":"GalaxySnail","name":"GalaxySnail","avatar_template":"/user_avatar/discuss.python.org/galaxysnail/{size}/5655_2.png"},"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/152","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277888,"name":"Da Woods","username":"da-woods","avatar_template":"/user_avatar/discuss.python.org/da-woods/{size}/7507_2.png","created_at":"2025-11-20T07:02:05.591Z","cooked":"\u003cp\u003eQuestion related to RustPython: they look to have made good progress on compatibility but not great progress on performance so far.\u003c/p\u003e\n\u003cp\u003eIs there anything to be learned from why?\u003c/p\u003e\n\u003cp\u003eI.e. if it’s just lack of time and contributors then it probably isn’t very interesting to this discussion, but if they were finding some optimisations difficult in Rust it might be useful to know.\u003c/p\u003e","post_number":153,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T07:02:05.591Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":192,"readers_count":191,"score":103.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Da Woods","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":7468,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/153","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277894,"name":"Jeong, YunWon","username":"youknowone","avatar_template":"/user_avatar/discuss.python.org/youknowone/{size}/19382_2.png","created_at":"2025-11-20T08:17:12.463Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"da-woods\" data-post=\"153\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/da-woods/48/7507_2.png\" class=\"avatar\"\u003e da-woods:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eQuestion related to RustPython: they look to have made good progress on compatibility but not great progress on performance so far.\u003c/p\u003e\n\u003cp\u003eIs there anything to be learned from why?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003e2 main reasons, which are mirror-side of each other.\u003cbr\u003e\nFirst, the core language part of CPython is very well optimized. RustPython adopt a few parts of them, but not able to finish major parts of them.\u003cbr\u003e\nSecond, RustPython contributors (like me) didn’t have enough interests on the performance. So it happened just occasionally.\u003c/p\u003e\n\u003cp\u003eSo… that’s not by technical issues. Just lack of driving to the performance. If anyone interested in enhancing performance of RustPython, I will do my best support.\u003c/p\u003e","post_number":154,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T08:17:12.463Z","reply_count":0,"reply_to_post_number":153,"quote_count":1,"incoming_link_count":0,"reads":197,"readers_count":196,"score":203.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jeong, YunWon","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":11}],"moderator":false,"admin":false,"staff":false,"user_id":29236,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/154","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277898,"name":"Jeong, YunWon","username":"youknowone","avatar_template":"/user_avatar/discuss.python.org/youknowone/{size}/19382_2.png","created_at":"2025-11-20T08:27:30.787Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"64\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eInteractions between Python objects and borrows is rather complicated. I don’t think this thread is a great place to go over detailed API design discussion as that isn’t the goal of the PEP, but I’d be happy to chat in another forum like the Python Discord or via DM. I will say a pie-in-the-sky API will look somewhat like an implementation using \u003ca href=\"https://pyo3.rs/\" rel=\"noopener nofollow ugc\"\u003ePyO3\u003c/a\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eA sample clone in RustPython; it is not PyO3 though.\u003cbr\u003e\nThe technical details will differ, but once Rust for CPython gains sufficient abstraction, it will reach a similar level in terms of cognitive load.\u003c/p\u003e\n\u003caside class=\"onebox githubpullrequest\" data-onebox-src=\"https://github.com/youknowone/RustPython/pull/6/files#diff-f01108c5f9f79199422d30e5556df9d4234c442464b791d0d515158ba787074bR61-R85\"\u003e\n  \u003cheader class=\"source\"\u003e\n\n      \u003ca href=\"https://github.com/youknowone/RustPython/pull/6/files#diff-f01108c5f9f79199422d30e5556df9d4234c442464b791d0d515158ba787074bR61-R85\" target=\"_blank\" rel=\"noopener nofollow ugc\"\u003egithub.com/youknowone/RustPython\u003c/a\u003e\n  \u003c/header\u003e\n\n  \u003carticle class=\"onebox-body\"\u003e\n    \u003cdiv class=\"github-row\" data-github-private-repo=\"false\"\u003e\n\n\n\n    \u003cdiv class=\"github-icon-container\" title=\"Pull Request\"\u003e\n      \u003csvg width=\"60\" height=\"60\" class=\"github-icon\" viewBox=\"0 0 12 16\" aria-hidden=\"true\"\u003e\u003cpath fill-rule=\"evenodd\" d=\"M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z\"\u003e\u003c/path\u003e\u003c/svg\u003e\n    \u003c/div\u003e\n\n  \u003cdiv class=\"github-info-container\"\u003e\n\n\n\n      \u003ch4\u003e\n        \u003ca href=\"https://github.com/youknowone/RustPython/pull/6/files#diff-f01108c5f9f79199422d30e5556df9d4234c442464b791d0d515158ba787074bR61-R85\" target=\"_blank\" rel=\"noopener nofollow ugc\"\u003e_base64\u003c/a\u003e\n      \u003c/h4\u003e\n\n    \u003cdiv class=\"branches\"\u003e\n      \u003ccode\u003emain\u003c/code\u003e ← \u003ccode\u003e_base64\u003c/code\u003e\n    \u003c/div\u003e\n\n      \u003cdiv class=\"github-info\"\u003e\n        \u003cdiv class=\"date\"\u003e\n          opened \u003cspan class=\"discourse-local-date\" data-format=\"ll\" data-date=\"2025-11-20\" data-time=\"08:08:07\" data-timezone=\"UTC\"\u003e08:08AM - 20 Nov 25 UTC\u003c/span\u003e\n        \u003c/div\u003e\n\n        \u003cdiv class=\"user\"\u003e\n          \u003ca href=\"https://github.com/youknowone\" target=\"_blank\" rel=\"noopener nofollow ugc\"\u003e\n            \u003cimg alt=\"\" src=\"https://us1.discourse-cdn.com/flex002/uploads/python1/original/3X/1/7/17073e6b3fff433f1c126821aeafe2775856db09.png\" class=\"onebox-avatar-inline\" width=\"20\" height=\"20\" data-dominant-color=\"50AAFF\"\u003e\n            youknowone\n          \u003c/a\u003e\n        \u003c/div\u003e\n\n        \u003cdiv class=\"lines\" title=\"1 commits changed 2 files with 87 additions and 0 deletions\"\u003e\n          \u003ca href=\"https://github.com/youknowone/RustPython/pull/6/files\" target=\"_blank\" rel=\"noopener nofollow ugc\"\u003e\n            \u003cspan class=\"added\"\u003e+87\u003c/span\u003e\n            \u003cspan class=\"removed\"\u003e-0\u003c/span\u003e\n          \u003c/a\u003e\n        \u003c/div\u003e\n      \u003c/div\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\n  \u003cdiv class=\"github-row\"\u003e\n    \u003cp class=\"github-body-container\"\u003e## Summary by CodeRabbit\n\n* **New Features**\n  * Base64 encoding support is now \u003cspan class=\"show-more-container\"\u003e\u003ca href=\"https://github.com/youknowone/RustPython/pull/6\" target=\"_blank\" rel=\"noopener nofollow ugc\" class=\"show-more\"\u003e…\u003c/a\u003e\u003c/span\u003e\u003cspan class=\"excerpt hidden\"\u003eavailable in the standard library. Users can encode binary data into standard Base64 format with built-in error handling and safety guarantees for large datasets. This enables reliable and efficient data transformation for applications requiring text-safe data representation and enhanced cross-platform system compatibility.\n\n\u0026lt;sub\u0026gt;✏️ Tip: You can customize this high-level summary in your review settings.\u0026lt;/sub\u0026gt;\u003c/span\u003e\u003c/p\u003e\n  \u003c/div\u003e\n\n  \u003c/article\u003e\n\n  \u003cdiv class=\"onebox-metadata\"\u003e\n    \n    \n  \u003c/div\u003e\n\n  \u003cdiv style=\"clear: both\"\u003e\u003c/div\u003e\n\u003c/aside\u003e\n","post_number":155,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T08:27:30.787Z","reply_count":0,"reply_to_post_number":64,"quote_count":1,"incoming_link_count":3,"reads":202,"readers_count":201,"score":69.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jeong, YunWon","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/youknowone/RustPython/pull/6/files#diff-f01108c5f9f79199422d30e5556df9d4234c442464b791d0d515158ba787074bR61-R85","internal":false,"reflection":false,"title":"_base64 by youknowone · Pull Request #6 · youknowone/RustPython · GitHub","clicks":27}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":29236,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/155","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277904,"name":"Mark Shannon","username":"markshannon","avatar_template":"/user_avatar/discuss.python.org/markshannon/{size}/72_2.png","created_at":"2025-11-20T09:58:39.817Z","cooked":"\u003cp\u003ePersonally, I think this makes a lot of sense for extension modules and some components, but not so much for the core of the VM (the interpreter, gc, and core objects).\u003cbr\u003e\nThe safety, or lack of safety, of those components depends not so much on the language they are written in, but the design. If you feed dodgy bytecode to the interpreter it should crash, or worse. That’s how it is supposed to work.\u003c/p\u003e\n\u003cp\u003eWhat is the proposed API for rust?\u003cbr\u003e\nThe section on implementation talks about using bindgen, but what is the underlying C API that you are binding? The limited API or the warts-and-all “unlimited” API?\u003cbr\u003e\nYou mention \u003ccode\u003ePY_OBJECT_HEAD_INIT\u003c/code\u003e but that just couples rust code to the deep internals of the VM.\u003c/p\u003e\n\u003cp\u003eIf we are introducing a new API, then it should be a good one. It should follow the design on \u003ca href=\"https://hpyproject.org/\"\u003eHPy\u003c/a\u003e, or its successor \u003ca href=\"https://github.com/py-ni\"\u003ePyNI\u003c/a\u003e. The linear typing of HPy handles should work very well with rust’s ownership model.\u003c/p\u003e","post_number":156,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T10:00:26.312Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":5,"reads":199,"readers_count":198,"score":349.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Mark Shannon","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/py-ni","internal":false,"reflection":false,"title":"py-ni · GitHub","clicks":44},{"url":"https://hpyproject.org/","internal":false,"reflection":false,"title":"HPy - A better C API for Python | HPy","clicks":15}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":19}],"moderator":false,"admin":false,"staff":false,"user_id":65,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/156","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277922,"name":"Steve Dower","username":"steve.dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","created_at":"2025-11-20T14:53:31.669Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"h-vetinari\" data-post=\"150\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/h-vetinari/48/1220_2.png\" class=\"avatar\"\u003e H. Vetinari:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eBy forcing the C APIs to define their semantics, the C APIs themselves often were improved.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYes, I think this is the best we can look forward to if the plan to progressively replace the core runtime implementation with Rust were still on the cards (which I assume it is, just unofficially for now - it doesn’t make any sense at all to “put Rust in CPython” without that ambition, since you can already write an extension module using Rust without our permission\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277922-1\" id=\"footnote-ref-277922-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e).\u003c/p\u003e\n\u003cp\u003eAnd we are already working to improve the semantics of our C APIs as quickly as we can without destroying our existing user base - adding Rust won’t help here (it’ll let us get away with more breakage for some people “because Rust”, but it’ll upset other people who still want minimal breakage, and on average I expect it’ll make no real difference).\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eWhat the current proposal comes down to is “can we make some stdlib extension modules optional for some people”, where the answer is obviously “yes” as we already make a number of them optional for users who don’t have/support/want certain third-party libraries.\u003c/p\u003e\n\u003cp\u003eSo the slightly higher-level question is “are we willing to make some modules optional based on compiler choice, rather than based on access to the core functionality required by the module”. (For example, if I don’t want/have OpenSSL, then the \u003ccode\u003e_ssl\u003c/code\u003e module is obviously useless and best omitted. But if I don’t want/have Rust, why should I miss out on \u003ccode\u003e_base64\u003c/code\u003e?)\u003c/p\u003e\n\u003cp\u003eThat question is the real, practical impact that we have to decide on. Everything else is hypothetical and achievable in this way or in other ways. But if we’re not willing to have a more inconsistent stdlib across our userbase, then the overall question seems to be moot, at least until Rust can be assumed to be as available as make+GCC.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277922-1\" class=\"footnote-item\"\u003e\u003cp\u003eI’ll also note here that the SC has previously approved putting obviously core functionality on PyPI (subinterpreters), so until we rotate through to an entirely new SC, I don’t think there’s a case for “has to be in core” other than taking advantage of our popularity (which has been earned through stability, so we shouldn’t ruin it by actively destabilising it). \u003ca href=\"#footnote-ref-277922-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":157,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T14:55:06.142Z","reply_count":1,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":0,"reads":195,"readers_count":194,"score":178.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steve Dower","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":9}],"moderator":false,"admin":false,"staff":false,"user_id":54,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/157","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277923,"name":"James Webber","username":"jamestwebber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","created_at":"2025-11-20T15:05:11.703Z","cooked":"\u003caside class=\"quote group-committers quote-modified\" data-username=\"steve.dower\" data-post=\"157\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003e(which I assume it is, just unofficially for now - it doesn’t make any sense at all to “put Rust in CPython” without that ambition, since you can already write an extension module using Rust without our permission ).\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWhile I think some view that as an end goal, a PEP to allow Rust extensions in the stdlib still stands on its own merit–there should be a formal decision whether to allow that expansion.\u003c/p\u003e\n\u003cp\u003eEven if the ultimate goal was “let some optional extensions be Rust” it would still need a PEP, no?\u003c/p\u003e","post_number":158,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T15:05:11.703Z","reply_count":1,"reply_to_post_number":157,"quote_count":1,"incoming_link_count":0,"reads":193,"readers_count":192,"score":58.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Webber","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":12267,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/158","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277924,"name":"Jelle Zijlstra","username":"Jelle","avatar_template":"/user_avatar/discuss.python.org/jelle/{size}/1049_2.png","created_at":"2025-11-20T15:05:24.571Z","cooked":"\u003cp\u003eI like the idea of moving CPython towards Rust, but I feel the current proposal is so conservative that it doesn’t really get us there.\u003c/p\u003e\n\u003cp\u003eThe idea is to allow optional extension modules to be written in Rust. That basically means either new accelerators for modules currently written in Python, or completely new stdlib modules (which are rare). They have to be optional, which means that we must also maintain a Python (or C!) version, at least for existing modules. The concrete suggestion is \u003ccode\u003ebase64\u003c/code\u003e, which is currently fully in Python.\u003c/p\u003e\n\u003cp\u003eThe “optional” part means that this proposal will make the stdlib more inconsistent across users. There are many ways the stdlib is already inconsistent in this way, but I feel that’s generally a bad situation that we should avoid making worse: ideally, Python should be the same for all users, and users who use base64 shouldn’t have to think about the details of their platform to know its performance characteristics.\u003c/p\u003e\n\u003cp\u003eThere might be another unfortunate consequence. Clearly, lots of people are very excited about getting Rust in CPython. But with this proposal, the only realistic way they can do that is by adding new accelerator modules. Those could be for modules that already have a C accelerator, but in that case we have to keep the C version too to avoid creating a regression for users without Rust. Or it could be for modules that are currently fully in Python. But I’m not sure how many such modules there are for which an accelerator really makes sense: in most cases, if we’d wanted a C accelerator, we’d have written one already. Therefore, we might end up with Rust code that is mostly replacing Python code, not C code, and that isn’t terribly high-impact.\u003c/p\u003e\n\u003cp\u003eTo get safety wins from using Rust, we have to stop using C. Not necessarily everywhere, definitely not everywhere immediately, but at least somewhere. So for this proposal to be accepted, I feel there must be a clear path towards making it possible to \u003cem\u003ereplace\u003c/em\u003e existing C code with Rust, even if that means making Rust required.\u003c/p\u003e","post_number":159,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T15:05:24.571Z","reply_count":4,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":0,"reads":201,"readers_count":200,"score":404.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jelle Zijlstra","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":23}],"moderator":false,"admin":false,"staff":false,"user_id":9,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/159","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277926,"name":"Antoine Pitrou","username":"pitrou","avatar_template":"/user_avatar/discuss.python.org/pitrou/{size}/28_2.png","created_at":"2025-11-20T15:17:04.475Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"Jelle\" data-post=\"159\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jelle/48/1049_2.png\" class=\"avatar\"\u003e Jelle Zijlstra:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSo for this proposal to be accepted, I feel there must be a clear path towards making it possible to \u003cem\u003ereplace\u003c/em\u003e existing C code with Rust, even if that means making Rust required.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIMHO that “clear path” must be conditioned on the bootstrap issues being solved. As in: bootstrapping CPython-with-Rust should not be harder than bootstrapping CPython-without-Rust.\u003c/p\u003e\n\u003cp\u003eOnce that happens, them I’m fully +1 for Rust in CPython, including core parts.\u003c/p\u003e","post_number":160,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T15:17:04.475Z","reply_count":0,"reply_to_post_number":159,"quote_count":1,"incoming_link_count":0,"reads":200,"readers_count":199,"score":144.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Antoine Pitrou","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":7}],"moderator":false,"admin":false,"staff":false,"user_id":23,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/160","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277927,"name":"Steve Dower","username":"steve.dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","created_at":"2025-11-20T15:17:17.891Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"jamestwebber\" data-post=\"158\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jamestwebber/48/12799_2.png\" class=\"avatar\"\u003e James Webber:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhile I think some view that as an end goal, a PEP to allow Rust extensions in the stdlib still stands on its own merit–there should be a formal decision whether to allow that expansion.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSure, but as I said in the rest of my post, that “formal decision” is really “can we let some people be lacking certain stdlib modules”. The choice of language is fairly orthogonal, since it isn’t going to affect the design of the runtime at all - we might as well bundle up C++ extension modules in the same PEP, since a similar number of users will be unable to use those, and some extension modules would benefit.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eAlso, there’s only a small gap between “the stdlib may not have this module for you” and “if you want this module, choose to add it”. The latter is already possible with whatever language you want to use, so with the re-scoped proposal, we’re only slightly reframing things from the latter to the former. Once we’re officially okay with “the library is (core modules) plus (optional modules) plus (whatever your distro adds) plus (whatever you’ve installed)”,\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277927-1\" id=\"footnote-ref-277927-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e then “optional modules” could be anything from anywhere (which means it’s really easy to say “yes, they could use Rust”).\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277927-1\" class=\"footnote-item\"\u003e\u003cp\u003eFor explicitness, the current situation is “the library is (core modules) plus (whatever your distro adds) plus (whatever you’ve installed)”. The only thing we’re adding here is “optional modules”. \u003ca href=\"#footnote-ref-277927-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":161,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T15:23:41.379Z","reply_count":1,"reply_to_post_number":158,"quote_count":1,"incoming_link_count":0,"reads":198,"readers_count":197,"score":118.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steve Dower","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":54,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/161","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277929,"name":"Antoine Pitrou","username":"pitrou","avatar_template":"/user_avatar/discuss.python.org/pitrou/{size}/28_2.png","created_at":"2025-11-20T15:25:43.096Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"steve.dower\" data-post=\"161\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ewe might as well bundle up C++ extension modules in the same PEP, since a similar number of users will be unable to use those, and some extension modules would benefit.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI don’t think it would be the case. Everywhere you have a C compiler, you probably have a C++ compiler too.\u003c/p\u003e","post_number":162,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T15:25:43.096Z","reply_count":1,"reply_to_post_number":161,"quote_count":1,"incoming_link_count":0,"reads":192,"readers_count":191,"score":72.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Antoine Pitrou","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":23,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/162","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277930,"name":"Steve Dower","username":"steve.dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","created_at":"2025-11-20T15:26:41.390Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"pitrou\" data-post=\"162\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/pitrou/48/28_2.png\" class=\"avatar\"\u003e Antoine Pitrou:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI don’t think it would be the case. Everywhere you have a C compiler, you probably have a C++ compiler too.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI agree, but I’m trying to be generous here \u003cimg src=\"https://emoji.discourse-cdn.com/apple/wink.png?v=15\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e We already have an (optional) C++ extension module in the stdlib, but don’t tell anyone.\u003c/p\u003e","post_number":163,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T15:26:41.390Z","reply_count":0,"reply_to_post_number":162,"quote_count":1,"incoming_link_count":0,"reads":193,"readers_count":192,"score":97.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steve Dower","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":54,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/163","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277931,"name":"Kirill Podoprigora","username":"Eclips4","avatar_template":"/user_avatar/discuss.python.org/eclips4/{size}/32292_2.png","created_at":"2025-11-20T15:49:56.537Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"Jelle\" data-post=\"159\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jelle/48/1049_2.png\" class=\"avatar\"\u003e Jelle Zijlstra:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe concrete suggestion is \u003ccode\u003ebase64\u003c/code\u003e, which is currently fully in Python.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eIn fact, \u003ccode\u003ebase64\u003c/code\u003e is built on top of the \u003ccode\u003ebinascii\u003c/code\u003e module, which is implemented entirely in C. So I think you’re right, we can try replacing the current \u003ccode\u003ebinascii\u003c/code\u003e implementation with a Rust-based one.\u003c/p\u003e","post_number":164,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T15:49:56.537Z","reply_count":0,"reply_to_post_number":159,"quote_count":1,"incoming_link_count":1,"reads":191,"readers_count":190,"score":57.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Kirill Podoprigora","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":8236,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/164","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277935,"name":"Xie Qi","username":"shynur","avatar_template":"/user_avatar/discuss.python.org/shynur/{size}/19399_2.png","created_at":"2025-11-20T16:34:23.668Z","cooked":"\u003cp\u003eThis post is about Rust, so it will attract considerable attention from Rust fans.\u003cbr\u003e\nAs a result, most of the comments are likely to be positive (since they come from Rust fans).\u003cbr\u003e\nWe still need to wait and see.\u003c/p\u003e\n\u003chr\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cs\u003ebut eventually will become a required dependency of CPython and allowed to be used throughout the CPython code base\u003c/s\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ccode\u003e\u0026lt;del\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eAdditionally, using Rust (which relies on LLVM) means abandoning many niche platforms.  Is this really an appropriate choice?\u003cbr\u003e\nMany popular open-source projects use Python to some extent.  If CPython drops support for certain platforms, those platforms will no longer be able to run many projects that depend on Python.\u003cbr\u003e\nThat would be truly unfortunate!\u003c/p\u003e\n\u003cp\u003eRust may mitigate some memory-related issues, but… are you really in such a hurry to introduce Rust into CPython?\u003cbr\u003e\nIn any case, Rust should be made optional.\u003cbr\u003e\nThis way, maintainers of (Python-dependent) open-source projects can choose whether to use the Rust-dependent features or not.  \u003cstrong\u003eThey deserve to have a choice!\u003c/strong\u003e\u003cbr\u003e\nMoreover, making Rust a mandatory dependency for CPython sounds like a proposal driven by Rust fans to push their own agenda.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003e\u0026lt;/dev\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003ePerhaps we can wait until the maturity of the following options:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eC++26: hardening and contract\u003c/li\u003e\n\u003cli\u003eZig\u003c/li\u003e\n\u003cli\u003egcc-rs\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAfter that, we can conduct more comparisons before making a final decision.\u003c/p\u003e","post_number":165,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T16:40:56.427Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":194,"readers_count":193,"score":72.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Xie Qi","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"","bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":29271,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/165","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277939,"name":"Filipe Laíns","username":"FFY00","avatar_template":"/user_avatar/discuss.python.org/ffy00/{size}/4007_2.png","created_at":"2025-11-20T16:52:42.002Z","cooked":"\u003cp\u003eThanks for pointing that out, that’s a great point.\u003c/p\u003e\n\u003cp\u003ePersonally, I thought of optionally introducing Rust more as a way to better understand how it would affect the community, and how well it would fit into the CPython codebase, and developers’ workflows.\u003c/p\u003e\n\u003cp\u003eI also don’t see a great value from allowing Rust in optional modules purely from a maintainer perspective, but I think it is a necessary step to decide on making Rust a hard build dependency.\u003c/p\u003e\n\u003cp\u003eThat said, maybe someone else does have a use-case where Rust being available for optional components would be great. If that’s the case, it would be great to let us know \u003cimg src=\"https://emoji.discourse-cdn.com/apple/sweat_smile.png?v=15\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e","post_number":166,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T16:52:42.002Z","reply_count":1,"reply_to_post_number":159,"quote_count":0,"incoming_link_count":1,"reads":192,"readers_count":191,"score":102.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Filipe Laíns","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":9,"username":"Jelle","name":"Jelle Zijlstra","avatar_template":"/user_avatar/discuss.python.org/jelle/{size}/1049_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":1970,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/166","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277955,"name":"Stephan Sokolow","username":"ssokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","created_at":"2025-11-20T19:19:22.841Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"shynur\" data-post=\"165\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/shynur/48/19399_2.png\" class=\"avatar\"\u003e shynur:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePerhaps we can wait until the maturity of the following options:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eC++26: hardening and contract\u003c/li\u003e\n\u003cli\u003eZig\u003c/li\u003e\n\u003cli\u003egcc-rs\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eBear in mind that Zig isn’t aiming to serve the same niche as Rust as far as safety/correctness goes (See \u003ca href=\"https://www.scattered-thoughts.net/writing/how-safe-is-zig/\" rel=\"noopener nofollow ugc\"\u003eHow (memory) safe is zig?\u003c/a\u003e for comparative details on its design philosophy) and posts like these suggest a worrying attitude toward Rust-level safety/correctness within the groups responsible for steering C++.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://izzys.casa/2024/11/on-safe-cxx/\" rel=\"noopener nofollow ugc\"\u003eOn “Safe” C++\u003c/a\u003e by Isabella “Izzy” Muerte\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://sibellavia.lol/posts/2025/09/safe-c-proposal-is-not-being-continued/\" rel=\"noopener nofollow ugc\"\u003eSafe C++ proposal is not being continued\u003c/a\u003e by Simone Bellavia\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.circle-lang.org/draft-profiles.html\" rel=\"noopener nofollow ugc\"\u003eWhy Safety Profiles Failed\u003c/a\u003e by Sean Baxter\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI’m having trouble remembering what I bookmarked it under so I can link it, but I’d also add the paper Stroustrup put out within the last few years which, to me at least, felt like a sign that the defensiveness various loud C++ developers feel toward the idea of Rust-like guarantees goes all the way to the top. (Which would be consistent with what On “Safe” C++ lays out.) I remember it being longer than \u003ca href=\"https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2739r0.pdf\" rel=\"noopener nofollow ugc\"\u003eA call to action: Think seriously about “safety”; \u003cstrong\u003ethen\u003c/strong\u003e do something sensible about it\u003c/a\u003e\u003cem\u003e.\u003c/em\u003e\u003c/p\u003e","post_number":167,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T19:34:17.022Z","reply_count":0,"reply_to_post_number":165,"quote_count":1,"incoming_link_count":1,"reads":185,"readers_count":184,"score":56.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Stephan Sokolow","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":3,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://www.scattered-thoughts.net/writing/how-safe-is-zig/","internal":false,"reflection":false,"title":"How (memory) safe is zig?","clicks":6},{"url":"https://www.circle-lang.org/draft-profiles.html","internal":false,"reflection":false,"title":"Why Safety Profiles Failed","clicks":6},{"url":"https://izzys.casa/2024/11/on-safe-cxx/","internal":false,"reflection":false,"title":"On \"Safe\" C++ • Izzy Muerte","clicks":6},{"url":"https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2023/p2739r0.pdf","internal":false,"reflection":false,"clicks":5},{"url":"https://sibellavia.lol/posts/2025/09/safe-c-proposal-is-not-being-continued/","internal":false,"reflection":false,"title":"Safe C++ proposal is not being continued - Simone Bellavia's Web Page","clicks":5}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":80027,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/167","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277960,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-20T19:42:38.788Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"Jelle\" data-post=\"159\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jelle/48/1049_2.png\" class=\"avatar\"\u003e Jelle Zijlstra:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI like the idea of moving CPython towards Rust, but I feel the current proposal is so conservative that it doesn’t really get us there.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYou’re completely correct here, the pre-PEP does not get us to Rust being ubiquitous in CPython. I think we probably didn’t do a good enough job explaining why the approach is so conservative, and should explain more on a potential path to make Rust ubiquitous, so let me expand on that.\u003c/p\u003e\n\u003cp\u003eI want to start by echoing \u003ca class=\"mention\" href=\"/u/ffy00\"\u003e@FFY00\u003c/a\u003e\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"FFY00\" data-post=\"166\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/ffy00/48/4007_2.png\" class=\"avatar\"\u003e Filipe Laíns:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePersonally, I thought of optionally introducing Rust more as a way to better understand how it would affect the community, and how well it would fit into the CPython codebase, and developers’ workflows.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWe intentionally want to keep the initial test as conservative as possible for a few reasons. Right now, the impact of introducing Rust at all is not fully known, so we want to make sure that it is both easy to back out of the change if it is untenable, and understand what workflows would break when Rust becomes required. One thing this thread has reinforced for me is that CPython is used all over the place, often in places we the core team are not aware of. The only way we can properly evaluate the potential impact of making Rust required is to start warning users we hope to do so and hear about places it would break, and what is needed to change to make Rust required.\u003c/p\u003e\n\u003cp\u003eAs for using Rust outside of extension modules, I think it \u003cem\u003ecould\u003c/em\u003e be used for experimental, opt-in interpreter features such as the JIT. I want to be cautious of this though because I don’t want the JIT to be in the state where it should become the default but making Rust required is a blocker to that. As everything else, it should be considered if migrating to Rust makes sense for the JIT.\u003c/p\u003e\n\u003cp\u003eI’d also like to cite an \u003ca href=\"https://queue.acm.org/detail.cfm?id=3773096\"\u003earticle by Google researchers\u003c/a\u003e:\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThere is a temptation, when introducing a new language, to pursue an aggressive timeline to justify the investment with short-term gains. Such an approach, fixated on overly ambitious goals, or rapid, sweeping change, invariably carries elevated risks of failure and can actively disincentivize future adoption by disrupting roadmaps and competing with other business objectives.\u003c/p\u003e\n\u003cp\u003eA more powerful strategy, the one that proved so effective for Android, is to treat language adoption as \u003cem\u003ea long-term investment in sustainable, compounding growth\u003c/em\u003e that supports other business objectives instead of competing with them. This approach \u003cem\u003epatiently\u003c/em\u003e \u003cem\u003eaccepts\u003c/em\u003e initially lower absolute numbers to provide the necessary time for the new language to establish a foothold, build momentum, and achieve critical mass.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eIn summary, for Android they found that moving to Rust is a long-term investment, that may not see immediate payoffs, but that moving to Rust is a long term success with significant payoffs. I realize this is a hard sell. But to me it makes a lot sense because there is a lot of learning and investigation to do related to integrating Rust into CPython. We need to spend the early period where Rust is allowed conservatively to build out the experience and support infrastructure for making Rust for CPython succeed.\u003c/p\u003e\n\u003cp\u003eI could see a path where we start very conservatively with base64, then introduce a Rust version of a more central standard library module like json (as an optional replacement to the C version to start with), then make Rust required. But this is a guess at a plausible path forward, and the final path needs to be informed from experience.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"Jelle\" data-post=\"159\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jelle/48/1049_2.png\" class=\"avatar\"\u003e Jelle Zijlstra:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ein most cases, if we’d wanted a C accelerator, we’d have written one already.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI would push back against this. One of the theses of this pre-PEP is that contributors are not inclined to write complex C code because it is difficult to do, thus projects like a C accelerator are \u003cem\u003enot\u003c/em\u003e getting written.\u003c/p\u003e\n\u003cp\u003eAs an example, the performance of the json module has been significantly slower than other implementations for a long time. Yet a re-write in C would be daunting. I think Rust would excel in cases like this.\u003c/p\u003e\n\u003cp\u003eAnother example is actually the base64 module! \u003ca href=\"https://github.com/python/cpython/issues/124951\" class=\"inline-onebox\"\u003e`base64` module: Link against SIMD library for 10x performance. · Issue #124951 · python/cpython · GitHub\u003c/a\u003e\u003cbr\u003e\nWe could use the Rust base64-simd crate for an easier, significant improvement to performance.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"Jelle\" data-post=\"159\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jelle/48/1049_2.png\" class=\"avatar\"\u003e Jelle Zijlstra:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eTo get safety wins from using Rust, we have to stop using C. Not necessarily everywhere, definitely not everywhere immediately, but at least somewhere.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWholeheartedly agree with this, and that’s the goal with base64. We want to start \u003cem\u003esomewhere\u003c/em\u003e, to better inform efforts elsewhere. Starting simply and minimally seems like the best path to allowing us to get an understanding without risk.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"Jelle\" data-post=\"159\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jelle/48/1049_2.png\" class=\"avatar\"\u003e Jelle Zijlstra:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSo for this proposal to be accepted, I feel there must be a clear path towards making it possible to \u003cem\u003ereplace\u003c/em\u003e existing C code with Rust, even if that means making Rust required.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI think on the contrary we will see the greatest benefits for memory safety from making new code in Rust. \u003ca href=\"https://www.usenix.org/conference/usenixsecurity22/presentation/alexopoulos\"\u003eA usenix paper\u003c/a\u003e found that the majority of vulnerabilities are in new code, as older code is battle-tested. So while I think we should enable replacing C code with Rust code where it makes sense, for example the json module, I think we will still see plenty of wins in new code too.\u003c/p\u003e","post_number":168,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T19:42:38.788Z","reply_count":1,"reply_to_post_number":159,"quote_count":2,"incoming_link_count":3,"reads":184,"readers_count":183,"score":131.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/python/cpython/issues/124951","internal":false,"reflection":false,"title":"`base64` module: Link against SIMD library for 10x performance. · Issue #124951 · python/cpython · GitHub","clicks":3},{"url":"https://www.usenix.org/conference/usenixsecurity22/presentation/alexopoulos","internal":false,"reflection":false,"clicks":1},{"url":"https://queue.acm.org/detail.cfm?id=3773096","internal":false,"reflection":false,"clicks":1}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/168","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277965,"name":"Jelle Zijlstra","username":"Jelle","avatar_template":"/user_avatar/discuss.python.org/jelle/{size}/1049_2.png","created_at":"2025-11-20T20:04:14.019Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"168\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI think on the contrary we will see the greatest benefits for memory safety from making new code in Rust. \u003ca href=\"https://www.usenix.org/conference/usenixsecurity22/presentation/alexopoulos\"\u003eA usenix paper\u003c/a\u003e found that the majority of vulnerabilities are in new code, as older code is battle-tested.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWhile most vulnerabilities may be in new code, I doubt they are in new \u003cem\u003emodules\u003c/em\u003e. If we add a feature to (say) the JIT, or the JSON module, we have to write new C code.\u003c/p\u003e","post_number":170,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T20:04:14.019Z","reply_count":1,"reply_to_post_number":168,"quote_count":1,"incoming_link_count":0,"reads":177,"readers_count":176,"score":39.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jelle Zijlstra","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":9,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/170","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277966,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-20T20:05:32.356Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"markshannon\" data-post=\"156\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/markshannon/48/72_2.png\" class=\"avatar\"\u003e Mark Shannon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhat is the proposed API for rust?\u003cbr\u003e\nThe section on implementation talks about using bindgen, but what is the underlying C API that you are binding? The limited API or the warts-and-all “unlimited” API?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eTo interact with the interpreter today, we need to interface with C APIs. Currently the proof of concept binds to the unstable Python APIs as well as internal ones. We definitely want to build safe abstractions over the raw C APIs for common use cases, and that could perhaps use an API like handles. But it has to wrap the existing APIs like HPy does for CPython, so these necessarily need to be exposed to Rust.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"markshannon\" data-post=\"156\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/markshannon/48/72_2.png\" class=\"avatar\"\u003e Mark Shannon:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eYou mention \u003ccode\u003ePY_OBJECT_HEAD_INIT\u003c/code\u003e but that just couples rust code to the deep internals of the VM.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eTo define a module, we need to have some way of defining a PyModuleDef, unless we want to introduce a new module initialization protocol (which is a large proposal in of itself). Therefore we need a pointer to a PyModuleDef, which needs it’s first member to be PyModuleDef_HEAD_INIT which internally expands to a structure with it’s first member being PyObject_HEAD_INIT. So some of this coupling is necessary as part of the module initialization protocol. Changing this protocol could be something we look into, but seems like it’s own rabbit hole \u003cimg src=\"https://emoji.discourse-cdn.com/apple/slight_smile.png?v=15\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003cp\u003eI realize this coupling is less than ideal, but any nicer HPy-like API would likely need to necessarily build on the existing C APIs, and I would like internal functions to be available to Rust modules just as they are to C modules in the standard library.\u003c/p\u003e","post_number":171,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T20:05:32.356Z","reply_count":3,"reply_to_post_number":156,"quote_count":1,"incoming_link_count":1,"reads":181,"readers_count":180,"score":55.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/171","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277967,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-20T20:15:58.826Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"Jelle\" data-post=\"170\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jelle/48/1049_2.png\" class=\"avatar\"\u003e Jelle Zijlstra:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eWhile most vulnerabilities may be in new code, I doubt they are in new \u003cem\u003emodules\u003c/em\u003e. If we add a feature to (say) the JIT, or the JSON module, we have to write new C code.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWe absolutely need to write new C code for the JIT, the JSON module, or most other parts of CPython when making changes and adding features. However I think demanding immediate results across the code base from introducing Rust is infeasible. I’m curious as to your thoughts on the rest of my comment explaining why.\u003c/p\u003e","post_number":172,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T20:15:58.826Z","reply_count":1,"reply_to_post_number":170,"quote_count":1,"incoming_link_count":1,"reads":179,"readers_count":178,"score":60.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/172","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277968,"name":"Jelle Zijlstra","username":"Jelle","avatar_template":"/user_avatar/discuss.python.org/jelle/{size}/1049_2.png","created_at":"2025-11-20T20:18:44.330Z","cooked":"\u003cp\u003eMy thoughts are that a proposal that allows Rust only for optional extension modules is likely not useful enough to justify the cost of adding a new language. It can be a first step (in fact, it’s a very reasonable first step!), but that means there must be a plan to expand beyond it just being an optional part of building CPython. And that in turn means that we need to deal with the concerns that are being raised around bootstrapping and niche platforms.\u003c/p\u003e","post_number":173,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T20:18:44.330Z","reply_count":2,"reply_to_post_number":172,"quote_count":0,"incoming_link_count":0,"reads":185,"readers_count":184,"score":151.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jelle Zijlstra","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":136,"username":"emmatyping","name":"Emma Smith","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":7}],"moderator":false,"admin":false,"staff":false,"user_id":9,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/173","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277970,"name":"Paul Moore","username":"pf_moore","avatar_template":"/user_avatar/discuss.python.org/pf_moore/{size}/35_2.png","created_at":"2025-11-20T20:51:15.069Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"Jelle\" data-post=\"173\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jelle/48/1049_2.png\" class=\"avatar\"\u003e Jelle Zijlstra:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMy thoughts are that a proposal that allows Rust only for optional extension modules is likely not useful enough to justify the cost of adding a new language.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThere’s been a number of comments about “optional extension modules” in this discussion so far. I want to make sure we’re 100% clear on what we mean by this, as I’m concerned we could end up measuring the wrong thing otherwise.\u003c/p\u003e\n\u003cp\u003eAs an end user, I have literally no interest in what language a stdlib module (or a core feature) is written in. It’s irrelevant to me. However, I have a \u003cem\u003estrong\u003c/em\u003e interest in what is available in the stdlib and core. Optional modules are an awkward compromise here - can I use the module safely, or do I need to account for the possibility that it might not be available? This is exacerbated by the fact that the packaging ecosystem has no way to express a dependency on “Python \u0026gt;= 3.13, with the tkinter module available” (for example).\u003c/p\u003e\n\u003cp\u003eIf we introduce Rust by using it for stdlib modules, and as a result make them (and anything that depends on them!) optional, then we risk getting negative feedback which will \u003cem\u003elook\u003c/em\u003e like it’s a downside of Rust, when it’s actually a downside of optional modules.\u003c/p\u003e\n\u003cp\u003eI \u003cem\u003ethink\u003c/em\u003e the intention is not to do this, but rather to use Rust to create \u003cem\u003eaccelerators\u003c/em\u003e for existing pure-Python modules. But if that is the case, can we be clearer about this, so that people don’t get the wrong impression? Assuming we are talking about accelerators, I feel that \u003ca class=\"mention\" href=\"/u/jelle\"\u003e@Jelle\u003c/a\u003e has a point. Using Rust to get a faster JSON module\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277970-1\" id=\"footnote-ref-277970-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e will be a good way of finding out what’s involved in adding Rust to the core build process, but I don’t think it will provide much useful feedback on whether Rust provides sufficient benefit to be worth taking further.\u003c/p\u003e\n\u003cp\u003eWhich prompts the question - what \u003cem\u003ewould\u003c/em\u003e useful feedback look like? And how do we get it? I don’t think that’s been clearly established yet.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277970-1\" class=\"footnote-item\"\u003e\u003cp\u003eI have to say that I don’t think anyone cares about a faster base64 module… \u003ca href=\"#footnote-ref-277970-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":174,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T20:51:15.069Z","reply_count":0,"reply_to_post_number":173,"quote_count":1,"incoming_link_count":0,"reads":187,"readers_count":186,"score":186.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Paul Moore","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":10}],"moderator":false,"admin":false,"staff":false,"user_id":35,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/174","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277972,"name":"Steve Dower","username":"steve.dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","created_at":"2025-11-20T21:08:04.750Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"171\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI realize this coupling is less than ideal, but any nicer HPy-like API would likely need to necessarily build on the existing C APIs, and I would like internal functions to be available to Rust modules just as they are to C modules in the standard library.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eDestabilising the existing C API isn’t an option, and providing a Rust abstraction over the unstable APIs doesn’t make them stable - they’re unstable because we \u003cem\u003ewant\u003c/em\u003e to be able to change them. If we didn’t want that, we’d make them stable or limited APIs.\u003c/p\u003e\n\u003cp\u003eYou can have PyO3 with access to unstable APIs already, presumably (perhaps without them being \u003cem\u003eofficially\u003c/em\u003e part of PyO3, but you aren’t being prevented by CPython from using them). If there are other APIs that are not currently public at any stability level that would be useful, we can discuss making them public.\u003c/p\u003e\n\u003cp\u003eThese problems are not good motivations for bringing Rust into core, since we already have the processes to manage them. They are good motivations for contributing to PyO3, which seems to be doing just fine without the restrictions and limitations that it would “enjoy” if it were part of core, and proposing new public APIs to the C API WG (who definitely enjoy dealing with those limitations).\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eIf a good first step to exposing subinterpreters (an existing core feature) was a module on PyPI, then I don’t see why a drop-in replacement for stdlib modules written in Rust can’t also start on PyPI. That way, distributors can immediately choose to include them instead of the core ones, and it’s much easier for core to later adopt an existing library than to approve what is currently a vague notion of “allowing” it.\u003c/p\u003e","post_number":175,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T21:08:04.750Z","reply_count":2,"reply_to_post_number":171,"quote_count":1,"incoming_link_count":1,"reads":183,"readers_count":182,"score":185.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steve Dower","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":9}],"moderator":false,"admin":false,"staff":false,"user_id":54,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/175","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277975,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-20T21:34:12.705Z","cooked":"\u003cp\u003eRegarding optional extension modules, here’s a rough timeline I could see and why each step is chosen to be so.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eThe goals of this stage are to get the initial build system changes set up, and start getting experience interfacing with the C code from Rust. Extension modules are a limited interface to the interpreter which minimizes the work to do for interoperability. Ideally we would also start warning users that we plan to eventually make Rust a hard requirement, and if this is a hardship for their environment, to please relate that to us. Only optional extension modules are allowed. Even more of a limitation, they should only be introduced where they would replace a C extension module (this could be things like base64 or json). The latter restriction exists to ensure we are not limiting access to new features to those who have Rust available. I picked the base64 module because it was simple but should exercise enough parts of the build system and C interop code, but we could just as well choose the json module.\u003c/li\u003e\n\u003cli\u003eThe goals of this stage are to make progress on improving portability and bootstrapping workflows based on feedback from stage 1. If we don’t gather feedback in stage 1 we could also start doing so here. More modules may be ported here to get even more experience with the C \u0026lt;—\u0026gt; Rust interfacing and overall developer experience.\u003c/li\u003e\n\u003cli\u003eThe goals of this stage are to ensure that we have resolved bootstrapping issues and warn of the impending requirement on Rust. Make Rust an opt-out feature of the interpreter. This is an even stronger warning of the up-coming requirement. At this point the vast majority of users should be able to build CPython with Rust enabled and bootstrapping issues should be resolved to greatest extent possible. I would say at this point new extension modules can be in Rust.\u003c/li\u003e\n\u003cli\u003eThe goal of this stage is to integrate Rust into core parts of CPython. Rust is required to build CPython. Rust can now be used across the CPython code base.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eThis is one \u003cstrong\u003ehypothetical\u003c/strong\u003e scenario. We’re not going to propose this as the specification in the PEP.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"Jelle\" data-post=\"173\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jelle/48/1049_2.png\" class=\"avatar\"\u003e Jelle Zijlstra:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eMy thoughts are that a proposal that allows Rust only for optional extension modules is likely not useful enough to justify the cost of adding a new language. It can be a first step (in fact, it’s a very reasonable first step!), but that means there must be a plan to expand beyond it just being an optional part of building CPython.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThere is simply too much to consider to resolve the bootstrapping and portability problems to have a concrete plan \u003cem\u003enow\u003c/em\u003e. I think like PEP 703 did, we could leave an open question with some version of the above roadmap. But I don’t think we have enough information at the moment. The only way to tell what the impact of introducing Rust to CPython is to introduce Rust to CPython. In the above plan we start very conservatively to ensure we don’t break anyone’s workflows until we’re confident we can introduce Rust to core. I wouldn’t want to set hard timelines to any of this because we don’t know now when we should move to the next step in the process. So I think like free-threading, it would be best to start with step 1, then have a follow-up PEP when we are confident we have the information we need to move to the other steps.\u003c/p\u003e","post_number":176,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T21:34:12.705Z","reply_count":0,"reply_to_post_number":null,"quote_count":1,"incoming_link_count":4,"reads":180,"readers_count":179,"score":115.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/176","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277976,"name":"James Webber","username":"jamestwebber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","created_at":"2025-11-20T21:38:01.881Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"steve.dower\" data-post=\"175\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf a good first step to exposing subinterpreters (an existing core feature) was a module on PyPI, then I don’t see why a drop-in replacement for stdlib modules written in Rust can’t also start on PyPI.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSurely this step was accomplished years ago, with the caveat that the Rust extensions aren’t usually “drop-in” replacements for an existing stdlib module, because that’s rarely what someone wanted to write. I don’t think anyone doubts that such a thing is possible, though?\u003c/p\u003e\n\u003cp\u003eSo what would be the next proposal after that?\u003c/p\u003e","post_number":177,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T21:38:01.881Z","reply_count":2,"reply_to_post_number":175,"quote_count":1,"incoming_link_count":0,"reads":175,"readers_count":174,"score":44.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Webber","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[],"moderator":false,"admin":false,"staff":false,"user_id":12267,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/177","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277977,"name":"Steve Dower","username":"steve.dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","created_at":"2025-11-20T21:45:24.104Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"jamestwebber\" data-post=\"177\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jamestwebber/48/12799_2.png\" class=\"avatar\"\u003e James Webber:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSurely this step was accomplished years ago\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYeah, that’s my point.\u003c/p\u003e\n\u003caside class=\"quote no-group\" data-username=\"jamestwebber\" data-post=\"177\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jamestwebber/48/12799_2.png\" class=\"avatar\"\u003e James Webber:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSo what would be the next proposal after that?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWrite one, prove it’s better, propose stdlib inclusion. It doesn’t even have to be a drop-in replacement, it can be a net-new module (but then the proposal needs to justify adding the module, which might make it too complicated).\u003c/p\u003e\n\u003cp\u003eThis is the standing process for adding something to the stdlib, and all that’s different is it’s the first proposal that would also bring in a new language. But then we are at least debating the merits in the context of something concrete, rather than something that feels very hypothetical.\u003c/p\u003e","post_number":178,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T21:45:24.104Z","reply_count":2,"reply_to_post_number":177,"quote_count":1,"incoming_link_count":0,"reads":174,"readers_count":173,"score":119.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steve Dower","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":5}],"moderator":false,"admin":false,"staff":false,"user_id":54,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/178","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277979,"name":"James Webber","username":"jamestwebber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","created_at":"2025-11-20T21:49:09.190Z","cooked":"\u003cp\u003eI think that this is missing the point of this proposal, though. The point is not “we really need a faster \u003ccode\u003ebase64\u003c/code\u003e, and specifically it should be written in Rust”. It’s “we should think about introducing Rust. The minimally invasive way to do so is to start with an optional extension module\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-277979-1\" id=\"footnote-ref-277979-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e”.\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-277979-1\" class=\"footnote-item\"\u003e\u003cp\u003ethat is, one that accelerates existing functionality \u003ca href=\"#footnote-ref-277979-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":179,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T21:49:09.190Z","reply_count":3,"reply_to_post_number":178,"quote_count":0,"incoming_link_count":0,"reads":170,"readers_count":169,"score":213.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Webber","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":54,"username":"steve.dower","name":"Steve Dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":9}],"moderator":false,"admin":false,"staff":false,"user_id":12267,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/179","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277981,"name":"James Webber","username":"jamestwebber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","created_at":"2025-11-20T21:52:27.814Z","cooked":"\u003cp\u003eThat said–maybe it’s still too early for a PEP, and the real Proof-of-Concept is to set-up a full build? (edit: and \u003ca href=\"https://github.com/emmatyping/cpython/tree/rust-in-cpython\"\u003ethe existing repo\u003c/a\u003e might be insufficient for that purpose if it doesn’t cover enough ground)\u003c/p\u003e","post_number":180,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T21:53:59.858Z","reply_count":0,"reply_to_post_number":179,"quote_count":0,"incoming_link_count":0,"reads":173,"readers_count":172,"score":64.0,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"James Webber","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://github.com/emmatyping/cpython/tree/rust-in-cpython","internal":false,"reflection":false,"title":"GitHub - emmatyping/cpython at rust-in-cpython","clicks":2}],"read":true,"user_title":null,"reply_to_user":{"id":12267,"username":"jamestwebber","name":"James Webber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":12267,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/180","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277982,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-20T21:53:16.786Z","cooked":"\u003caside class=\"quote group-committers quote-modified\" data-username=\"steve.dower\" data-post=\"175\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"171\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI realize this coupling is less than ideal, but any nicer HPy-like API would likely need to necessarily build on the existing C APIs, and I would like internal functions to be available to Rust modules just as they are to C modules in the standard library.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eDestabilising the existing C API isn’t an option, and providing a Rust abstraction over the unstable APIs doesn’t make them stable - they’re unstable because we \u003cem\u003ewant\u003c/em\u003e to be able to change them. If we didn’t want that, we’d make them stable or limited APIs.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI think perhaps I may not have been clear in my earlier message, so apologies if not. I do not intend to destablize the C API, of course that is a non-starter. And I don’t intend to abstract over any unstable APIs either.\u003c/p\u003e\n\u003cp\u003eWhat I imagine is a PyO3-like API abstracting the stable API. Then extension modules in the stdlib can also access the unsafe, unstable C APIs. The Rust FFI bindings will be kept up to date with the unstable C API so there is no issue with adding or removing functions.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"steve.dower\" data-post=\"175\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf a good first step to exposing subinterpreters (an existing core feature) was a module on PyPI, then I don’t see why a drop-in replacement for stdlib modules written in Rust can’t also start on PyPI.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI see two reasons:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eThe main reason subinterpreters started on PyPI, if memory serves, is to figure out the API design. PyO3 already has 8 years of experience for us to \u003cs\u003esteal\u003c/s\u003e re-use refining their APIs. I expect the standard library abstractions over the stable API to be very, very similar to PyO3, except without support for PyPy and perhaps usage of internal APIs.\u003c/li\u003e\n\u003cli\u003eA \u003cstrong\u003ecritical\u003c/strong\u003e part of this proposal is understanding the impact of introducing Rust to CPython. We get no information from existing on PyPI.\u003c/li\u003e\n\u003c/ol\u003e\n\u003caside class=\"quote group-committers quote-modified\" data-username=\"steve.dower\" data-post=\"178\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/steve.dower/48/56_2.png\" class=\"avatar\"\u003e Steve Dower:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003caside class=\"quote no-group\" data-username=\"jamestwebber\" data-post=\"177\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jamestwebber/48/12799_2.png\" class=\"avatar\"\u003e jamestwebber:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSo what would be the next proposal after that?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eWrite one, prove it’s better, propose stdlib inclusion.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eGreat! So then once we have a prototype of the abstraction your concerns will be assuaged?\u003c/p\u003e\n\u003caside class=\"quote no-group quote-modified\" data-username=\"jamestwebber\" data-post=\"179\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jamestwebber/48/12799_2.png\" class=\"avatar\"\u003e James Webber:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe point is not “we really need a faster \u003ccode\u003ebase64\u003c/code\u003e, and specifically it should be written in Rust”. It’s “we should think about introducing Rust. The minimally invasive way to do so is to start with an optional extension module ”.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAbsolutely, thank you for bringing this up. If you read over \u003ca href=\"https://discuss.python.org/t/pre-pep-rust-for-cpython/104906/176\"\u003emy earlier comment\u003c/a\u003e you will see that inclusion of base64 is not even a requirement for the overall goals of the pre-PEP.\u003c/p\u003e","post_number":181,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T21:54:10.978Z","reply_count":2,"reply_to_post_number":175,"quote_count":5,"incoming_link_count":0,"reads":182,"readers_count":181,"score":105.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/181","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277984,"name":"Steve Dower","username":"steve.dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","created_at":"2025-11-20T21:55:32.028Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"jamestwebber\" data-post=\"179\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/jamestwebber/48/12799_2.png\" class=\"avatar\"\u003e James Webber:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThe point is not “we really need a faster \u003ccode\u003ebase64\u003c/code\u003e, and specifically it should be written in Rust”.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eSure, and the fact that we wouldn’t take this proposal seriously should also indicate that the lesser proposal of “we really need … Rust” isn’t going to be any more persuasive.\u003c/p\u003e\n\u003cp\u003eOn the other hand, “our drop-in replacement for \u003ccode\u003ejson\u003c/code\u003e or \u003ccode\u003ere\u003c/code\u003e is 10x faster than the stdlib, can we merge it” is a far more interesting discussion to have.\u003c/p\u003e\n\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"181\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eGreat! So then once we have a prototype of the abstraction your concerns will be assuaged?\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eProbably not \u003cimg src=\"https://emoji.discourse-cdn.com/apple/wink.png?v=15\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e But my interest would be piqued by a production-ready replacement for an existing module, or a new module that we want in the stdlib anyway and the best way to get it is to bring in a Rust implementation.\u003c/p\u003e","post_number":182,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T21:55:32.028Z","reply_count":0,"reply_to_post_number":179,"quote_count":2,"incoming_link_count":0,"reads":178,"readers_count":177,"score":94.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Steve Dower","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":54,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/182","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277986,"name":"Da Woods","username":"da-woods","avatar_template":"/user_avatar/discuss.python.org/da-woods/{size}/7507_2.png","created_at":"2025-11-20T22:05:04.216Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"171\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e emmatyping:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eTo define a module, we need to have some way of defining a PyModuleDef, unless we want to introduce a new module initialization protocol (which is a large proposal in of itself). Therefore we need a pointer to a PyModuleDef, which needs it’s first member to be PyModuleDef_HEAD_INIT which internally expands to a structure with it’s first member being PyObject_HEAD_INIT. So some of this coupling is necessary as part of the module initialization protocol.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI think PEP 793 would disagree with this and probably be simpler from a Rust point of view because it doesn’t involve C macros (although that wasn’t the specific intent of it). (No comment on the larger context of the discussion…. just the specific paragraph)\u003c/p\u003e","post_number":183,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T22:05:04.216Z","reply_count":1,"reply_to_post_number":171,"quote_count":1,"incoming_link_count":2,"reads":175,"readers_count":174,"score":79.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Da Woods","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":7468,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/183","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277987,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-20T22:07:59.858Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"da-woods\" data-post=\"183\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/da-woods/48/7507_2.png\" class=\"avatar\"\u003e Da Woods:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI think PEP 793 would disagree with this and probably be simpler from a Rust point of view because it doesn’t involve C macros\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eFair point, and perhaps we should adopt PEP 793. I hadn’t realized the PEP was accepted, exciting!\u003c/p\u003e","post_number":184,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T22:07:59.858Z","reply_count":0,"reply_to_post_number":183,"quote_count":1,"incoming_link_count":1,"reads":175,"readers_count":174,"score":54.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/184","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277994,"name":"Brénainn Woodsend","username":"bwoodsend","avatar_template":"/user_avatar/discuss.python.org/bwoodsend/{size}/4027_2.png","created_at":"2025-11-20T22:44:42.131Z","cooked":"\u003cp\u003eSlightly tangential but I find optional stdlib components to be a menace and would really like their proliferation to be minimised.\u003c/p\u003e\n\u003cp\u003eFor pre-built Python installations like those on \u003ca href=\"http://python.org\"\u003epython.org\u003c/a\u003e or \u003ccode\u003epython-build-standalone\u003c/code\u003e, there’s nothing optional about them – someone will need them therefore they must be included therefore everyone gets them whether they’re needed or not. For those installing from source, it’s a footgun with remediation steps so platform specific that they can rarely even be written down in any detail. For those building Python for other people, it’s both. For distro-provided Python, it’s a surprise extra system dependency that rarely follows any predictable pattern and doesn’t correlate to anything in a lockfile.\u003c/p\u003e\n\u003cp\u003eI’ve spent way more time debugging tkinter installations than even monster PyPI packages like Qt.\u003c/p\u003e","post_number":185,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T22:44:42.131Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":176,"readers_count":175,"score":134.2,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Brénainn Woodsend","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"http://python.org","internal":false,"reflection":false,"title":"Welcome to Python.org","clicks":0}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":6}],"moderator":false,"admin":false,"staff":false,"user_id":4032,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/185","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277998,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-20T22:55:14.403Z","cooked":"\u003caside class=\"quote no-group\" data-username=\"bwoodsend\" data-post=\"185\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/bwoodsend/48/4027_2.png\" class=\"avatar\"\u003e Brénainn Woodsend:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSlightly tangential but I find optional stdlib components to be a menace and would really like their proliferation to be minimised.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eI have heard from a number of people a similar sentiment. I think therefore it’d be best if a new Rust module was a replacement for an existing C module that could act as a fallback, rather than an entirely new module with no fallback.\u003c/p\u003e","post_number":186,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T22:55:14.403Z","reply_count":1,"reply_to_post_number":185,"quote_count":1,"incoming_link_count":0,"reads":178,"readers_count":177,"score":54.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/186","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":277999,"name":"Brénainn Woodsend","username":"bwoodsend","avatar_template":"/user_avatar/discuss.python.org/bwoodsend/{size}/4027_2.png","created_at":"2025-11-20T23:01:38.607Z","cooked":"\u003cp\u003eIn that case, perhaps Python’s build system would have to be pushy and fail without rust by default unless some \u003ccode\u003e--use-legacy-c-{module}-implementation\u003c/code\u003e flag is given? Otherwise, I suspect that many of the people downstream we want feedback from aren’t going to notice it.\u003c/p\u003e","post_number":187,"post_type":1,"posts_count":192,"updated_at":"2025-11-20T23:01:38.607Z","reply_count":0,"reply_to_post_number":186,"quote_count":0,"incoming_link_count":0,"reads":177,"readers_count":176,"score":64.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Brénainn Woodsend","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"reply_to_user":{"id":136,"username":"emmatyping","name":"Emma Smith","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":2}],"moderator":false,"admin":false,"staff":false,"user_id":4032,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/187","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":278001,"name":"Neil Schemenauer","username":"nas","avatar_template":"/user_avatar/discuss.python.org/nas/{size}/536_2.png","created_at":"2025-11-20T23:37:14.235Z","cooked":"\u003cblockquote\u003e\n\u003cp\u003eI feel the current proposal is so conservative that it doesn’t really get us there.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eI think that’s okay.  This is going to be a many-year, perhaps on the order of decades, project.  The first step is to add Rust as an optional feature of the CPython build.  That will allow us to solve some tricky problems about how we can make Rust and C co-exist.  And, we can find out how many platforms are going to be affected by this (e.g. they can’t get the optional features to build) and fix that for as many platforms as we can.\u003c/p\u003e\n\u003cp\u003eThis initial step doesn’t necessarily help with code safety, API cleanliness, or performance aspects.  I’m sure others will disagree but, to me, the benefits that Rust can bring on those is clearly demonstrated in other projects.  We don’t need to prove those specifically for CPython.\u003c/p\u003e\n\u003cp\u003eEdit: maybe it’s useful to enumerate what I think are the clear benefits that Rust could bring.  I’m not a Rust programmer so knowledgeable people will need to correct me if I’m wrong (as I’m sure they will gleefully do).\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003earray bounds checking: in the year 2025, it’s crazy we are using a programming language that doesn’t do this.  Yes, there can be extra overhead.  No, you are not smart enough to get it correct. \u003cimg src=\"https://emoji.discourse-cdn.com/apple/wink.png?v=15\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/li\u003e\n\u003cli\u003euse-after-free and other memory lifetime bugs.  Rust’s borrow checker avoids most of these at compile time.\u003c/li\u003e\n\u003cli\u003einteger overflow: Rust doesn’t prevent it but at least it defines what happens.  Undefined behavior is bad.\u003c/li\u003e\n\u003cli\u003escope based cleanup: I’ve heard that the C language standard might eventually be getting something like \u003ccode\u003e__attribute__((cleanup(...)))\u003c/code\u003e.  It’s probably going to be decades before CPython could actually rely on C compilers supporting that.  This pattern comes up so often and it’s painful we don’t have a built-in language feature that supports it.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThere are other benefits and conveniences but these are the big ones, IMHO.\u003c/p\u003e","post_number":188,"post_type":1,"posts_count":192,"updated_at":"2025-11-21T00:09:14.365Z","reply_count":2,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":1,"reads":184,"readers_count":183,"score":335.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Neil Schemenauer","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":2,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":18}],"moderator":false,"admin":false,"staff":false,"user_id":63,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/188","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":278011,"name":"Jeong, YunWon","username":"youknowone","avatar_template":"/user_avatar/discuss.python.org/youknowone/{size}/19382_2.png","created_at":"2025-11-21T01:50:22.666Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"nas\" data-post=\"188\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/nas/48/536_2.png\" class=\"avatar\"\u003e nas:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003earray bounds checking: in the year 2025, it’s crazy we are using a programming language that doesn’t do this. Yes, there can be extra overhead. No, you are not smart enough to get it correct. \u003cimg src=\"https://emoji.discourse-cdn.com/apple/wink.png?v=15\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/li\u003e\n\u003cli\u003euse-after-free and other memory lifetime bugs. Rust’s borrow checker avoids most of these at compile time.\u003c/li\u003e\n\u003cli\u003einteger overflow: Rust doesn’t prevent it but at least it defines what happens. Undefined behavior is bad.\u003c/li\u003e\n\u003cli\u003escope based cleanup: I’ve heard that the C language standard might eventually be getting something like \u003ccode\u003e__attribute__((cleanup(...)))\u003c/code\u003e. It’s probably going to be decades before CPython could actually rely on C compilers supporting that. This pattern comes up so often and it’s painful we don’t have a built-in language feature that supports it.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eAdding more details about the points.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003earray bounds checking is on by default, but when the overhead matters, explicitly skipping check is possible for each element access..\u003c/li\u003e\n\u003cli\u003einteger overflow panics on debug build. it has both checked operation and wrapping operation. checked operation is default on debug build. wrapping operation is default on release build. Of course each operation can be explicitly marked as checked if it is useful for runtime. Otherwise explicitly marking as wrapping is also useful when it is intended.\u003c/li\u003e\n\u003c/ul\u003e","post_number":189,"post_type":1,"posts_count":192,"updated_at":"2025-11-21T01:50:22.666Z","reply_count":0,"reply_to_post_number":188,"quote_count":1,"incoming_link_count":3,"reads":182,"readers_count":181,"score":65.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Jeong, YunWon","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":1}],"moderator":false,"admin":false,"staff":false,"user_id":29236,"hidden":false,"trust_level":1,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/189","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":278013,"name":"H. Vetinari","username":"h-vetinari","avatar_template":"/user_avatar/discuss.python.org/h-vetinari/{size}/1220_2.png","created_at":"2025-11-21T03:25:13.839Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"nas\" data-post=\"188\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/nas/48/536_2.png\" class=\"avatar\"\u003e Neil Schemenauer:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003eI’ve heard that the C language standard might eventually be getting something like \u003ccode\u003e__attribute__((cleanup(...)))\u003c/code\u003e. It’s probably going to be decades before CPython could actually rely on C compilers supporting that.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eThis is the \u003ca href=\"https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3733.htm\" rel=\"noopener nofollow ugc\"\u003e\u003ccode\u003edefer\u003c/code\u003e\u003c/a\u003e proposal, which currently exists as a \u003ca href=\"https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3734.pdf\" rel=\"noopener nofollow ugc\"\u003eTS\u003c/a\u003e (like a branch of the C standard). Here’s an overview of the thing (and the procedural reasons for the TS) in \u003ca href=\"https://thephd.dev/c2y-the-defer-technical-specification-its-time-go-go-go\" rel=\"noopener nofollow ugc\"\u003eblog post\u003c/a\u003e format.\u003c/p\u003e\n\u003cp\u003eClang has a mostly ready \u003ca href=\"https://github.com/llvm/llvm-project/pull/162848\" rel=\"noopener nofollow ugc\"\u003ePR\u003c/a\u003e for this\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-278013-1\" id=\"footnote-ref-278013-1\"\u003e[1]\u003c/a\u003e\u003c/sup\u003e. The GCC patch set is at \u003ca href=\"https://gcc.gnu.org/pipermail/gcc-patches/2025-October/698777.html\" rel=\"noopener nofollow ugc\"\u003ev5\u003c/a\u003e AFAICT. Long story short, this should be available in compilers relatively soon\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-278013-2\" id=\"footnote-ref-278013-2\"\u003e[2]\u003c/a\u003e\u003c/sup\u003e and \u003cem\u003emay\u003c/em\u003e make it into C2y if people like the feature and let people on the committee know.\u003c/p\u003e\n\u003cp\u003eHowever you’re likely right about the timelines. Anything before 2040 for broad availability (i.e. \u003ccode\u003edefer\u003c/code\u003e as part of the standard, not a TS, and implemented across all major compilers present on LTS distros) would be wildly optimistic IMO\u003csup class=\"footnote-ref\"\u003e\u003ca href=\"#footnote-278013-3\" id=\"footnote-ref-278013-3\"\u003e[3]\u003c/a\u003e\u003c/sup\u003e. Who knows how the world (and CPython) looks like by then… \u003cimg src=\"https://emoji.discourse-cdn.com/apple/sweat_smile.png?v=15\" title=\":sweat_smile:\" class=\"emoji\" alt=\":sweat_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e\n\u003chr class=\"footnotes-sep\"\u003e\n\n\u003col class=\"footnotes-list\"\u003e\n\u003cli id=\"footnote-278013-1\" class=\"footnote-item\"\u003e\u003cp\u003echeck out the number of reactions as a barometer for people’s interest in this \u003ca href=\"#footnote-ref-278013-1\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"footnote-278013-2\" class=\"footnote-item\"\u003e\u003cp\u003eMSVC’s C standard conformance has been horrible since C99; you’d be better off using clang-cl on windows than wait for MSVC on anything. They still haven’t gotten C99 or C11 finished, and ~zero for C23. \u003ca href=\"#footnote-ref-278013-2\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"footnote-278013-3\" class=\"footnote-item\"\u003e\u003cp\u003eOn the other hand, if people were willing to replace MSVC with \u003ccode\u003eclang-cl\u003c/code\u003e and rely on \u003ccode\u003e-fdefer-ts\u003c/code\u003e, you could probably do it in 5 years, assuming the benefits are so substantial that this would be worth it. \u003ca href=\"#footnote-ref-278013-3\" class=\"footnote-backref\"\u003e↩︎\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","post_number":190,"post_type":1,"posts_count":192,"updated_at":"2025-11-21T03:27:42.849Z","reply_count":0,"reply_to_post_number":188,"quote_count":1,"incoming_link_count":8,"reads":185,"readers_count":184,"score":120.8,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"H. Vetinari","primary_group_name":null,"flair_name":null,"flair_url":null,"flair_bg_color":null,"flair_color":null,"flair_group_id":null,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3733.htm","internal":false,"reflection":false,"title":"N3733: Improved __attribute__((cleanup)) Through defer","clicks":8},{"url":"https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3734.pdf","internal":false,"reflection":false,"clicks":5},{"url":"https://thephd.dev/c2y-the-defer-technical-specification-its-time-go-go-go","internal":false,"reflection":false,"title":"The Defer Technical Specification: It Is Time | The Pasture","clicks":4},{"url":"https://github.com/llvm/llvm-project/pull/162848","internal":false,"reflection":false,"title":"[Clang] Add support for the C `defer` TS by Sirraide · Pull Request #162848 · llvm/llvm-project · GitHub","clicks":3},{"url":"https://gcc.gnu.org/pipermail/gcc-patches/2025-October/698777.html","internal":false,"reflection":false,"title":"[PATCH v5 0/3] implement defer statements as per ts 25755","clicks":1}],"read":true,"user_title":null,"bookmarked":false,"actions_summary":[{"id":2,"count":4}],"moderator":false,"admin":false,"staff":false,"user_id":1017,"hidden":false,"trust_level":2,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/190","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":278044,"name":"Antoine Pitrou","username":"pitrou","avatar_template":"/user_avatar/discuss.python.org/pitrou/{size}/28_2.png","created_at":"2025-11-21T11:59:25.837Z","cooked":"\u003caside class=\"quote group-committers\" data-username=\"emmatyping\" data-post=\"181\" data-topic=\"104906\"\u003e\n\u003cdiv class=\"title\"\u003e\n\u003cdiv class=\"quote-controls\"\u003e\u003c/div\u003e\n\u003cimg alt=\"\" width=\"24\" height=\"24\" src=\"https://sea2.discourse-cdn.com/flex002/user_avatar/discuss.python.org/emmatyping/48/25708_2.png\" class=\"avatar\"\u003e Emma Smith:\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp\u003ePyO3 already has 8 years of experience for us to \u003cs\u003esteal\u003c/s\u003e re-use refining their APIs.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/aside\u003e\n\u003cp\u003eYou probably meant “borrow”. \u003cimg src=\"https://emoji.discourse-cdn.com/apple/wink.png?v=15\" title=\":wink:\" class=\"emoji\" alt=\":wink:\" loading=\"lazy\" width=\"20\" height=\"20\"\u003e\u003c/p\u003e","post_number":191,"post_type":1,"posts_count":192,"updated_at":"2025-11-21T11:59:25.837Z","reply_count":0,"reply_to_post_number":181,"quote_count":1,"incoming_link_count":5,"reads":185,"readers_count":184,"score":285.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Antoine Pitrou","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":16}],"moderator":false,"admin":false,"staff":false,"user_id":23,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/191","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":278071,"name":"Antoine Pitrou","username":"pitrou","avatar_template":"/user_avatar/discuss.python.org/pitrou/{size}/28_2.png","created_at":"2025-11-21T19:51:28.905Z","cooked":"\u003cp\u003eOk, here’s a potential exercise if the optional module story isn’t appealing.\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003ememoryview\u003c/code\u003e object is written in C and the performance of \u003ccode\u003ememoryview.index\u003c/code\u003e is currently horrid due to being written \u003ca href=\"https://discuss.python.org/t/memoryview-index-860x-slower-than-bytes-index/104973/4\"\u003ein a very naive way\u003c/a\u003e. Accelerating it in C involves generic programming in a language that doesn’t provide any decent metaprogramming. But if an alternate implementation of \u003ccode\u003ememoryview\u003c/code\u003e was written in Rust, then perhaps those accelerations would be much easier to implement (of course, you also need to develop some basic infrastructure for that: for example, a facility to dispatch to different generic specializations depending on the \u003ca href=\"https://docs.python.org/3/library/struct.html#format-characters\"\u003ememoryview format\u003c/a\u003e).\u003c/p\u003e\n\u003cp\u003eSo we could have an optional implementation of \u003ccode\u003ememoryview\u003c/code\u003e in Rust, and fallback on the C one on Rust-less platforms.\u003c/p\u003e","post_number":192,"post_type":1,"posts_count":192,"updated_at":"2025-11-21T19:51:28.905Z","reply_count":1,"reply_to_post_number":null,"quote_count":0,"incoming_link_count":10,"reads":187,"readers_count":186,"score":569.4,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Antoine Pitrou","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"link_counts":[{"url":"https://discuss.python.org/t/memoryview-index-860x-slower-than-bytes-index/104973/4","internal":true,"reflection":false,"title":"Memoryview.index() 860x slower than bytes.index()","clicks":24},{"url":"https://docs.python.org/3/library/struct.html#format-characters","internal":false,"reflection":false,"title":"struct — Interpret bytes as packed binary data — Python 3.14.0 documentation","clicks":8}],"read":true,"user_title":"CPython core developer","title_is_group":true,"bookmarked":false,"actions_summary":[{"id":2,"count":32}],"moderator":false,"admin":false,"staff":false,"user_id":23,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/192","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null},{"id":278155,"name":"Emma Smith","username":"emmatyping","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","created_at":"2025-11-22T18:11:23.522Z","cooked":"\u003cp\u003eThank you for bringing this up! I think memoryview could be a very appealing option for demonstrating Rust. Rust’s generics could make index a lot easier to implement as you say.\u003c/p\u003e\n\u003cp\u003eI also think it has made me reconsider where to draw the line of where it is okay to re-write things in Rust. I want to start this by re-iterating that we \u003cstrong\u003edo not\u003c/strong\u003e want to go and just re-implement everything and anything in Rust to start with. At least until we have a lot more experience with Rust in CPython, and given contributors time to learn and try working with Rust, we should select up to a few experimental changes to make, and review our experiences after making those changes. Areas re-written in Rust should have a justification for doing so, like memoryview. We should also consider if the most active contributors to that portion of the codebase are comfortable with Rust being introduced.\u003c/p\u003e\n\u003cp\u003eThat being said I think we could expand where Rust could be implemented to include built-in objects, or really any part of the interpreter, if we also keep a C fallback of the implementation. For memoryview, we could keep the current implementation as a compile-time fallback and introduce a Rust version that takes advantage of it’s meta-programming (if needed) and generics.\u003c/p\u003e\n\u003cp\u003eThis may mean we’d need to maintain two versions of certain parts of the interpreter for a little while, but I think getting more experience across the code base would be worth the extra effort. The maintenance effort of keeping two implementations should be considered  as part of evaluating where to introduce Rust.\u003c/p\u003e\n\u003cp\u003eWith C compile-time fallbacks, there should be no cause for concern on portability or bootstrapping.\u003c/p\u003e\n\u003cp\u003eThis seems like a nice compromise between the very limited “Rust only in extension modules” and “Rust can go anywhere and we need to figure out bootstrapping”. Obviously the trade-off is maintenance burden, but I think if we’re smart about what parts we implement in Rust, we can minimize the effort.\u003c/p\u003e\n\u003cp\u003eCurious what others think!\u003c/p\u003e","post_number":193,"post_type":1,"posts_count":192,"updated_at":"2025-11-22T18:11:23.522Z","reply_count":0,"reply_to_post_number":192,"quote_count":0,"incoming_link_count":9,"reads":176,"readers_count":175,"score":316.6,"yours":false,"topic_id":104906,"topic_slug":"pre-pep-rust-for-cpython","display_username":"Emma Smith","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"badges_granted":[],"version":1,"can_edit":false,"can_delete":false,"can_recover":false,"can_see_hidden_post":false,"can_wiki":false,"read":true,"user_title":"CPython core developer","title_is_group":true,"reply_to_user":{"id":23,"username":"pitrou","name":"Antoine Pitrou","avatar_template":"/user_avatar/discuss.python.org/pitrou/{size}/28_2.png"},"bookmarked":false,"actions_summary":[{"id":2,"count":19}],"moderator":false,"admin":false,"staff":false,"user_id":136,"hidden":false,"trust_level":3,"deleted_at":null,"user_deleted":false,"edit_reason":null,"can_view_edit_history":true,"wiki":false,"post_url":"/t/pre-pep-rust-for-cpython/104906/193","can_accept_answer":false,"can_unaccept_answer":false,"accepted_answer":false,"topic_accepted_answer":null}],"stream":[277474,277475,277478,277480,277482,277483,277485,277487,277489,277490,277491,277493,277494,277495,277496,277497,277499,277500,277502,277503,277504,277505,277506,277507,277508,277509,277512,277513,277516,277517,277519,277520,277525,277527,277528,277531,277532,277534,277536,277537,277538,277539,277540,277546,277553,277554,277557,277558,277559,277560,277561,277562,277563,277565,277566,277567,277571,277572,277579,277580,277581,277583,277590,277593,277594,277596,277597,277598,277601,277602,277603,277604,277605,277606,277609,277610,277613,277614,277616,277617,277620,277621,277622,277623,277625,277628,277633,277635,277637,277638,277643,277644,277645,277648,277654,277656,277660,277661,277663,277666,277669,277671,277672,277673,277674,277675,277677,277678,277679,277682,277683,277684,277685,277686,277687,277688,277689,277691,277692,277694,277695,277696,277697,277698,277713,277714,277721,277722,277725,277731,277732,277734,277740,277741,277742,277746,277749,277752,277758,277762,277764,277785,277790,277807,277808,277812,277835,277845,277847,277849,277874,277875,277888,277894,277898,277904,277922,277923,277924,277926,277927,277929,277930,277931,277935,277939,277955,277960,277965,277966,277967,277968,277970,277972,277975,277976,277977,277979,277981,277982,277984,277986,277987,277994,277998,277999,278001,278011,278013,278044,278071,278155]},"timeline_lookup":[[1,7],[70,6],[133,5],[154,4],[190,3],[192,2]],"suggested_topics":[{"fancy_title":"Place for XML helper functions","id":104265,"title":"Place for XML helper functions","slug":"place-for-xml-helper-functions","posts_count":11,"reply_count":3,"highest_post_number":11,"image_url":null,"created_at":"2025-10-09T09:11:42.067Z","last_posted_at":"2025-10-12T11:28:32.024Z","bumped":true,"bumped_at":"2025-10-12T11:28:32.024Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"tags_descriptions":{},"like_count":15,"views":291,"category_id":23,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":44,"username":"storchaka","name":"Serhiy Storchaka","avatar_template":"/user_avatar/discuss.python.org/storchaka/{size}/217_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}},{"extras":null,"description":"Frequent Poster","user":{"id":69,"username":"doerwalter","name":"Walter Dörwald","avatar_template":"/user_avatar/discuss.python.org/doerwalter/{size}/329_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}},{"extras":null,"description":"Frequent Poster","user":{"id":21724,"username":"Monarch","name":"Monarch","avatar_template":"/user_avatar/discuss.python.org/monarch/{size}/18530_2.png","trust_level":3}},{"extras":null,"description":"Frequent Poster","user":{"id":358,"username":"hugovk","name":"Hugo van Kemenade","avatar_template":"/user_avatar/discuss.python.org/hugovk/{size}/14505_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}},{"extras":"latest","description":"Most Recent Poster","user":{"id":12134,"username":"picnixz","name":"Bénédikt Tran","avatar_template":"/user_avatar/discuss.python.org/picnixz/{size}/12660_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}}]},{"fancy_title":"Python 3.12.12, 3.11.14, 3.10.19 and 3.9.24 are now available!","id":104273,"title":"Python 3.12.12, 3.11.14, 3.10.19 and 3.9.24 are now available!","slug":"python-3-12-12-3-11-14-3-10-19-and-3-9-24-are-now-available","posts_count":6,"reply_count":1,"highest_post_number":6,"image_url":null,"created_at":"2025-10-09T20:46:00.014Z","last_posted_at":"2025-10-15T06:48:29.520Z","bumped":true,"bumped_at":"2025-10-15T06:48:29.520Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":["release"],"tags_descriptions":{},"like_count":19,"views":434,"category_id":23,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":73,"username":"thomas","name":"Thomas Wouters","avatar_template":"/user_avatar/discuss.python.org/thomas/{size}/5492_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}},{"extras":null,"description":"Frequent Poster","user":{"id":17,"username":"barry","name":"Barry Warsaw","avatar_template":"/user_avatar/discuss.python.org/barry/{size}/42_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}},{"extras":null,"description":"Frequent Poster","user":{"id":36,"username":"brettcannon","name":"Brett Cannon","avatar_template":"/user_avatar/discuss.python.org/brettcannon/{size}/21723_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"admin":true,"moderator":true,"trust_level":4}},{"extras":null,"description":"Frequent Poster","user":{"id":77482,"username":"Twice","name":"Twice","avatar_template":"/user_avatar/discuss.python.org/twice/{size}/31791_2.png","trust_level":0}},{"extras":"latest","description":"Most Recent Poster","user":{"id":358,"username":"hugovk","name":"Hugo van Kemenade","avatar_template":"/user_avatar/discuss.python.org/hugovk/{size}/14505_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}}]},{"fancy_title":"Should we keep now _pydecimal.py?","id":101829,"title":"Should we keep now _pydecimal.py?","slug":"should-we-keep-now-pydecimal-py","posts_count":15,"reply_count":9,"highest_post_number":15,"image_url":null,"created_at":"2025-08-10T05:13:01.523Z","last_posted_at":"2025-10-13T05:28:33.665Z","bumped":true,"bumped_at":"2025-10-13T05:28:33.665Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"tags_descriptions":{},"like_count":35,"views":757,"category_id":23,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":10574,"username":"skirpichev","name":"Sergey B Kirpichev","avatar_template":"/user_avatar/discuss.python.org/skirpichev/{size}/10996_2.png","trust_level":2}},{"extras":null,"description":"Frequent Poster","user":{"id":98,"username":"ncoghlan","name":"Alyssa Coghlan","avatar_template":"/user_avatar/discuss.python.org/ncoghlan/{size}/14266_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}},{"extras":null,"description":"Frequent Poster","user":{"id":54,"username":"steve.dower","name":"Steve Dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}},{"extras":null,"description":"Frequent Poster","user":{"id":51,"username":"gpshead","name":"Gregory P. Smith","avatar_template":"/user_avatar/discuss.python.org/gpshead/{size}/54_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}},{"extras":"latest","description":"Most Recent Poster","user":{"id":77,"username":"tim.one","name":"Tim Peters","avatar_template":"/user_avatar/discuss.python.org/tim.one/{size}/282_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}}]},{"fancy_title":"Heads-up: .pyc magic number change in 3.14.0rc2","id":102095,"title":"Heads-up: .pyc magic number change in 3.14.0rc2","slug":"heads-up-pyc-magic-number-change-in-3-14-0rc2","posts_count":4,"reply_count":0,"highest_post_number":4,"image_url":null,"created_at":"2025-08-12T09:36:59.945Z","last_posted_at":"2025-08-14T20:03:48.646Z","bumped":true,"bumped_at":"2025-08-14T20:03:48.646Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"tags_descriptions":{},"like_count":12,"views":990,"category_id":23,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":26,"username":"encukou","name":"Petr Viktorin","avatar_template":"/user_avatar/discuss.python.org/encukou/{size}/2461_2.png","primary_group_name":"committers","trust_level":3}},{"extras":null,"description":"Frequent Poster","user":{"id":17,"username":"barry","name":"Barry Warsaw","avatar_template":"/user_avatar/discuss.python.org/barry/{size}/42_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}},{"extras":"latest","description":"Most Recent Poster","user":{"id":358,"username":"hugovk","name":"Hugo van Kemenade","avatar_template":"/user_avatar/discuss.python.org/hugovk/{size}/14505_2.png","primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_bg_color":"006b94","flair_color":"fac731","flair_group_id":41,"trust_level":3}}]},{"fancy_title":"DeprecationWarning: \u0026lsquo;cgi\u0026rsquo; is deprecated and slated for removal in Python 3.13","id":85186,"title":"DeprecationWarning: 'cgi' is deprecated and slated for removal in Python 3.13","slug":"deprecationwarning-cgi-is-deprecated-and-slated-for-removal-in-python-3-13","posts_count":10,"reply_count":7,"highest_post_number":10,"image_url":null,"created_at":"2025-03-19T18:05:09.680Z","last_posted_at":"2025-10-02T20:34:15.902Z","bumped":true,"bumped_at":"2025-10-02T20:34:15.902Z","archetype":"regular","unseen":false,"pinned":false,"unpinned":null,"visible":true,"closed":false,"archived":false,"bookmarked":null,"liked":null,"tags":[],"tags_descriptions":{},"like_count":4,"views":1508,"category_id":7,"featured_link":null,"has_accepted_answer":false,"posters":[{"extras":null,"description":"Original Poster","user":{"id":43936,"username":"jicman","name":"jic","avatar_template":"/user_avatar/discuss.python.org/jicman/{size}/23923_2.png","trust_level":1}},{"extras":null,"description":"Frequent Poster","user":{"id":22305,"username":"Stefan2","name":"Stefan Pochmann","avatar_template":"/user_avatar/discuss.python.org/stefan2/{size}/18492_2.png","trust_level":3}},{"extras":null,"description":"Frequent Poster","user":{"id":401,"username":"davidism","name":"David Lord","avatar_template":"/user_avatar/discuss.python.org/davidism/{size}/3295_2.png","admin":true,"moderator":true,"trust_level":4}},{"extras":null,"description":"Frequent Poster","user":{"id":4128,"username":"fungi","name":"fungi","avatar_template":"/user_avatar/discuss.python.org/fungi/{size}/5963_2.png","trust_level":2}},{"extras":"latest","description":"Most Recent Poster","user":{"id":76171,"username":"nsmcan","name":"Sergey Nudnov","avatar_template":"/user_avatar/discuss.python.org/nsmcan/{size}/31394_2.png","trust_level":0}}]}],"tags":[],"tags_descriptions":{},"fancy_title":"Pre-PEP: Rust for CPython","id":104906,"title":"Pre-PEP: Rust for CPython","posts_count":192,"created_at":"2025-11-17T16:14:10.011Z","views":20490,"reply_count":130,"like_count":1531,"last_posted_at":"2025-11-22T18:11:23.522Z","visible":true,"closed":false,"archived":false,"has_summary":true,"archetype":"regular","slug":"pre-pep-rust-for-cpython","category_id":23,"word_count":41382,"deleted_at":null,"user_id":136,"featured_link":null,"pinned_globally":false,"pinned_at":null,"pinned_until":null,"image_url":null,"slow_mode_seconds":0,"draft":null,"draft_key":"topic_104906","draft_sequence":null,"unpinned":null,"pinned":false,"current_post_number":1,"highest_post_number":193,"deleted_by":null,"actions_summary":[{"id":4,"count":0,"hidden":false,"can_act":false},{"id":8,"count":0,"hidden":false,"can_act":false},{"id":10,"count":0,"hidden":false,"can_act":false},{"id":7,"count":0,"hidden":false,"can_act":false}],"chunk_size":1000,"bookmarked":false,"topic_timer":null,"message_bus_last_id":4202,"participant_count":63,"show_read_indicator":false,"thumbnails":null,"slow_mode_enabled_until":null,"summarizable":true,"can_vote":false,"vote_count":0,"user_voted":false,"discourse_zendesk_plugin_zendesk_id":null,"discourse_zendesk_plugin_zendesk_url":"https://your-url.zendesk.com/agent/tickets/","details":{"can_edit":false,"notification_level":1,"participants":[{"id":136,"username":"emmatyping","name":"Emma Smith","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png","post_count":26,"primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_color":"fac731","flair_bg_color":"006b94","flair_group_id":41,"trust_level":3},{"id":80027,"username":"ssokolow","name":"Stephan Sokolow","avatar_template":"/user_avatar/discuss.python.org/ssokolow/{size}/32572_2.png","post_count":18,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":1},{"id":12267,"username":"jamestwebber","name":"James Webber","avatar_template":"/user_avatar/discuss.python.org/jamestwebber/{size}/12799_2.png","post_count":11,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":3},{"id":54,"username":"steve.dower","name":"Steve Dower","avatar_template":"/user_avatar/discuss.python.org/steve.dower/{size}/56_2.png","post_count":10,"primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_color":"fac731","flair_bg_color":"006b94","flair_group_id":41,"trust_level":3},{"id":23,"username":"pitrou","name":"Antoine Pitrou","avatar_template":"/user_avatar/discuss.python.org/pitrou/{size}/28_2.png","post_count":7,"primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_color":"fac731","flair_bg_color":"006b94","flair_group_id":41,"trust_level":3},{"id":29236,"username":"youknowone","name":"Jeong, YunWon","avatar_template":"/user_avatar/discuss.python.org/youknowone/{size}/19382_2.png","post_count":6,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":1},{"id":8236,"username":"Eclips4","name":"Kirill Podoprigora","avatar_template":"/user_avatar/discuss.python.org/eclips4/{size}/32292_2.png","post_count":6,"primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_color":"fac731","flair_bg_color":"006b94","flair_group_id":41,"trust_level":3},{"id":3448,"username":"davidhewitt","name":"David Hewitt","avatar_template":"/user_avatar/discuss.python.org/davidhewitt/{size}/3502_2.png","post_count":6,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":2},{"id":3377,"username":"Rosuav","name":"Chris Angelico","avatar_template":"/user_avatar/discuss.python.org/rosuav/{size}/3429_2.png","post_count":5,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":3},{"id":12,"username":"alex_Gaynor","name":"Alex Gaynor","avatar_template":"/user_avatar/discuss.python.org/alex_gaynor/{size}/17_2.png","post_count":5,"primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_color":"fac731","flair_bg_color":"006b94","flair_group_id":41,"trust_level":3},{"id":20079,"username":"normanlorrain","name":"Norman Lorrain","avatar_template":"/user_avatar/discuss.python.org/normanlorrain/{size}/15821_2.png","post_count":5,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":1},{"id":994,"username":"woodruffw","name":"William Woodruff","avatar_template":"/user_avatar/discuss.python.org/woodruffw/{size}/7614_2.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":2},{"id":10221,"username":"thesamesam","name":"Sam James","avatar_template":"/user_avatar/discuss.python.org/thesamesam/{size}/10616_2.png","post_count":4,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":2},{"id":35,"username":"pf_moore","name":"Paul Moore","avatar_template":"/user_avatar/discuss.python.org/pf_moore/{size}/35_2.png","post_count":3,"primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_color":"fac731","flair_bg_color":"006b94","flair_group_id":41,"trust_level":3},{"id":11429,"username":"sunmy2019","name":"Steven Sun","avatar_template":"/user_avatar/discuss.python.org/sunmy2019/{size}/11935_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":2},{"id":4032,"username":"bwoodsend","name":"Brénainn Woodsend","avatar_template":"/user_avatar/discuss.python.org/bwoodsend/{size}/4027_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":3},{"id":15730,"username":"mikeshardmind","name":"Michael H","avatar_template":"/user_avatar/discuss.python.org/mikeshardmind/{size}/14381_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":3},{"id":9,"username":"Jelle","name":"Jelle Zijlstra","avatar_template":"/user_avatar/discuss.python.org/jelle/{size}/1049_2.png","post_count":3,"primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_color":"fac731","flair_bg_color":"006b94","flair_group_id":41,"trust_level":3},{"id":43595,"username":"jacopoabramo","name":"Jacopo Abramo","avatar_template":"/user_avatar/discuss.python.org/jacopoabramo/{size}/23840_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":1},{"id":7468,"username":"da-woods","name":"Da Woods","avatar_template":"/user_avatar/discuss.python.org/da-woods/{size}/7507_2.png","post_count":3,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":2},{"id":63,"username":"nas","name":"Neil Schemenauer","avatar_template":"/user_avatar/discuss.python.org/nas/{size}/536_2.png","post_count":2,"primary_group_name":"committers","flair_name":"committers","flair_url":"https://us1.discourse-cdn.com/flex002/uploads/python1/original/1X/ca0883b21b8210c5a62c9ac02353de5f24a4d6fc.png","flair_color":"fac731","flair_bg_color":"006b94","flair_group_id":41,"trust_level":3},{"id":10,"username":"guido","name":"Guido van Rossum","avatar_template":"/user_avatar/discuss.python.org/guido/{size}/21_2.png","post_count":2,"primary_group_name":"committers","flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":3},{"id":6712,"username":"mgorny","name":"Michał Górny","avatar_template":"/user_avatar/discuss.python.org/mgorny/{size}/6517_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":2},{"id":5874,"username":"GalaxySnail","name":"GalaxySnail","avatar_template":"/user_avatar/discuss.python.org/galaxysnail/{size}/5655_2.png","post_count":2,"primary_group_name":null,"flair_name":null,"flair_url":null,"flair_color":null,"flair_bg_color":null,"flair_group_id":null,"trust_level":2}],"created_by":{"id":136,"username":"emmatyping","name":"Emma Smith","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png"},"last_poster":{"id":136,"username":"emmatyping","name":"Emma Smith","avatar_template":"/user_avatar/discuss.python.org/emmatyping/{size}/25708_2.png"},"links":[{"url":"https://plv.mpi-sws.org/rustbelt/","title":"RustBelt","internal":false,"attachment":false,"reflection":false,"clicks":216,"user_id":136,"domain":"plv.mpi-sws.org","root_domain":"mpi-sws.org"},{"url":"https://aeb.win.tue.nl/linux/hh/thompson/trust.html","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":197,"user_id":3377,"domain":"aeb.win.tue.nl","root_domain":"tue.nl"},{"url":"https://github.com/emmatyping/cpython/tree/rust-in-cpython","title":"GitHub - emmatyping/cpython at rust-in-cpython","internal":false,"attachment":false,"reflection":false,"clicks":166,"user_id":136,"domain":"github.com","root_domain":"github.com"},{"url":"http://security.googleblog.com/2025/11/rust-in-android-move-fast-fix-things.html","title":"Google Online Security Blog: Rust in Android: move fast and fix things","internal":false,"attachment":false,"reflection":false,"clicks":137,"user_id":136,"domain":"security.googleblog.com","root_domain":"googleblog.com"},{"url":"https://en.wikipedia.org/wiki/Argument_from_authority?utm_source=chatgpt.com","title":"Argument from authority - Wikipedia","internal":false,"attachment":false,"reflection":false,"clicks":116,"user_id":10,"domain":"en.wikipedia.org","root_domain":"wikipedia.org"},{"url":"https://peps.python.org/pep-0436/","title":"PEP 436 – The Argument Clinic DSL | peps.python.org","internal":false,"attachment":false,"reflection":false,"clicks":114,"user_id":136,"domain":"peps.python.org","root_domain":"python.org"},{"url":"https://github.com/RustPython/RustPython","title":"GitHub - RustPython/RustPython: A Python Interpreter written in Rust","internal":false,"attachment":false,"reflection":false,"clicks":105,"user_id":47,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/rust-lang/rust/blob/main/src/bootstrap/bootstrap.py","title":"rust/src/bootstrap/bootstrap.py at main · rust-lang/rust · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":100,"user_id":136,"domain":"github.com","root_domain":"github.com"},{"url":"https://pyo3.rs/","title":"Introduction - PyO3 user guide","internal":false,"attachment":false,"reflection":false,"clicks":87,"user_id":136,"domain":"pyo3.rs","root_domain":"pyo3.rs"},{"url":"https://github.com/Speykious/cve-rs","title":"GitHub - Speykious/cve-rs: Blazingly 🔥 fast 🚀 memory vulnerabilities, written in 100% safe Rust. 🦀","internal":false,"attachment":false,"reflection":false,"clicks":67,"user_id":80068,"domain":"github.com","root_domain":"github.com"},{"url":"https://pyfound.blogspot.com/2025/06/python-language-summit-2025-what-do-core-developers-want-from-rust.html","title":"Python Software Foundation News: The Python Language Summit 2025: What do core developers want from Rust?","internal":false,"attachment":false,"reflection":false,"clicks":65,"user_id":136,"domain":"pyfound.blogspot.com","root_domain":"pyfound.blogspot.com"},{"url":"https://github.com/py-ni","title":"py-ni · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":44,"user_id":65,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/rust-lang/rust-bindgen","title":"GitHub - rust-lang/rust-bindgen: Automatically generates Rust FFI bindings to C (and some C++) libraries.","internal":false,"attachment":false,"reflection":false,"clicks":43,"user_id":136,"domain":"github.com","root_domain":"github.com"},{"url":"https://rust-lang.org/governance/teams/infra/#team-bootstrap","title":"Infrastructure team - Rust Programming Language","internal":false,"attachment":false,"reflection":false,"clicks":39,"user_id":14473,"domain":"rust-lang.org","root_domain":"rust-lang.org"},{"url":"https://www.theregister.com/2025/11/03/debian_apt_to_require_rust/","title":"Debian demands Rust or rust in peace for legacy ports • The Register","internal":false,"attachment":false,"reflection":false,"clicks":38,"user_id":136,"domain":"www.theregister.com","root_domain":"theregister.com"},{"url":"https://blog.cloudflare.com/18-november-2025-outage/","title":"Cloudflare outage on November 18, 2025","internal":false,"attachment":false,"reflection":false,"clicks":29,"user_id":43595,"domain":"blog.cloudflare.com","root_domain":"cloudflare.com"},{"url":"https://github.com/youknowone/RustPython/pull/6/files#diff-f01108c5f9f79199422d30e5556df9d4234c442464b791d0d515158ba787074bR61-R85","title":"_base64 by youknowone · Pull Request #6 · youknowone/RustPython · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":27,"user_id":29236,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/serde-rs/serde/issues/2538","title":"using serde_derive without precompiled binary · Issue #2538 · serde-rs/serde · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":26,"user_id":11429,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/python/cpython/pull/129648","title":"gh-133767: Fix use-after-free in the unicode-escape decoder with an error handler by serhiy-storchaka · Pull Request #129648 · python/cpython · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":26,"user_id":8236,"domain":"github.com","root_domain":"github.com"},{"url":"https://doc.rust-lang.org/std/","title":"std - Rust","internal":false,"attachment":false,"reflection":false,"clicks":25,"user_id":136,"domain":"doc.rust-lang.org","root_domain":"rust-lang.org"},{"url":"https://discuss.python.org/t/memoryview-index-860x-slower-than-bytes-index/104973/4","title":"Memoryview.index() 860x slower than bytes.index()","internal":true,"attachment":false,"reflection":false,"clicks":24,"user_id":23,"domain":"discuss.python.org","root_domain":"python.org"},{"url":"https://peps.python.org/pep-0011/","title":"PEP 11 – CPython platform support | peps.python.org","internal":false,"attachment":false,"reflection":false,"clicks":22,"user_id":136,"domain":"peps.python.org","root_domain":"python.org"},{"url":"https://stackoverflow.com/questions/60686516/why-cant-i-communicate-with-a-forked-child-process-using-tokio-unixstream","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":21,"user_id":11429,"domain":"stackoverflow.com","root_domain":"stackoverflow.com"},{"url":"https://github.com/python/cpython/issues/141212","title":"GitHub · Where software is built","internal":false,"attachment":false,"reflection":false,"clicks":21,"user_id":63,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/rust-lang/rust/issues/127343","title":"regression: type annotations needed for Box\u003c_\u003e · Issue #127343 · rust-lang/rust · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":20,"user_id":5874,"domain":"github.com","root_domain":"github.com"},{"url":"https://rust-lang.github.io/rust-project-goals/2025h2/relink-dont-rebuild.html#summary","title":"Relink don't Rebuild - Rust Project Goals","internal":false,"attachment":false,"reflection":false,"clicks":19,"user_id":79987,"domain":"rust-lang.github.io","root_domain":"rust-lang.github.io"},{"url":"https://github.blog/open-source/git/highlights-from-git-2-52/#:~:text=Rust%20support%20is%20not%20yet%20mandatory%2C%20so%20Git%202.52%20will%20continue%20to%20run%20just%20fine%20on%20platforms%20that%20don%E2%80%99t%20have%20a%20Rust%20compiler.%20However%2C%20Rust%20support%20will%20be%20required%20for%20Git%203.0%2C%20at%20which%20point%20many%20more%20components%20of%20Git%20will%20likely%20depend%20on%20Rust%20code","title":"Highlights from Git 2.52 - The GitHub Blog","internal":false,"attachment":false,"reflection":false,"clicks":19,"user_id":36,"domain":"github.blog","root_domain":"github.blog"},{"url":"https://github.com/brettcannon/python-launcher","title":"GitHub - brettcannon/python-launcher: Python launcher for Unix","internal":false,"attachment":false,"reflection":false,"clicks":19,"user_id":36,"domain":"github.com","root_domain":"github.com"},{"url":"https://lore.kernel.org/lkml/202210010816.1317F2C@keescook/","title":"Making sure you're not a bot!","internal":false,"attachment":false,"reflection":false,"clicks":19,"user_id":136,"domain":"lore.kernel.org","root_domain":"kernel.org"},{"url":"https://github.com/nrc/r4cppp","title":"GitHub - nrc/r4cppp: Rust for C++ programmers","internal":false,"attachment":false,"reflection":false,"clicks":19,"user_id":136,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/Rust-GCC/gccrs","title":"GitHub - Rust-GCC/gccrs: GCC Front-End for Rust","internal":false,"attachment":false,"reflection":false,"clicks":18,"user_id":344,"domain":"github.com","root_domain":"github.com"},{"url":"https://github.com/emmatyping/cpython/blob/c9deee600d60509c5da6ef538a9b530f7ba12e05/Modules/_base64/src/lib.rs#L114-L181","title":"cpython/Modules/_base64/src/lib.rs at c9deee600d60509c5da6ef538a9b530f7ba12e05 · emmatyping/cpython · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":18,"user_id":344,"domain":"github.com","root_domain":"github.com"},{"url":"https://rust-lang.org/learn/","title":"Learn Rust - Rust Programming Language","internal":false,"attachment":false,"reflection":false,"clicks":18,"user_id":136,"domain":"rust-lang.org","root_domain":"rust-lang.org"},{"url":"https://doc.rust-lang.org/stable/book/","title":"The Rust Programming Language - The Rust Programming Language","internal":false,"attachment":false,"reflection":false,"clicks":18,"user_id":136,"domain":"doc.rust-lang.org","root_domain":"rust-lang.org"},{"url":"https://rust-lang.zulipchat.com/#narrow/channel/326414-t-infra.2Fbootstrap","title":"Public view of rust-lang | Zulip team chat","internal":false,"attachment":false,"reflection":false,"clicks":17,"user_id":14473,"domain":"rust-lang.zulipchat.com","root_domain":"zulipchat.com"},{"url":"https://github.blog/open-source/git/highlights-from-git-2-52/#:~:text=Git%2C%20this%20release%20is%20the%20first%20to%20(optionally)%20use%20Rust%20code%20for%20some%20internal%20functionality%20within%20Git","title":"Highlights from Git 2.52 - The GitHub Blog","internal":false,"attachment":false,"reflection":false,"clicks":16,"user_id":36,"domain":"github.blog","root_domain":"github.blog"},{"url":"https://github.com/emmatyping/cpython/blob/c9deee600d60509c5da6ef538a9b530f7ba12e05/Modules/_base64/src/lib.rs#L81-L111","title":"cpython/Modules/_base64/src/lib.rs at c9deee600d60509c5da6ef538a9b530f7ba12e05 · emmatyping/cpython · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":15,"user_id":136,"domain":"github.com","root_domain":"github.com"},{"url":"https://blog.rust-lang.org/2025/11/18/gsoc-2025-results/#prototype-cargo-plumbing-commands","title":"Google Summer of Code 2025 results | Rust Blog","internal":false,"attachment":false,"reflection":false,"clicks":15,"user_id":80027,"domain":"blog.rust-lang.org","root_domain":"rust-lang.org"},{"url":"https://github.com/ruby/ruby/tree/master/zjit","title":"ruby/zjit at master · ruby/ruby · GitHub","internal":false,"attachment":false,"reflection":false,"clicks":15,"user_id":344,"domain":"github.com","root_domain":"github.com"},{"url":"https://hpyproject.org/","title":"HPy - A better C API for Python | HPy","internal":false,"attachment":false,"reflection":false,"clicks":15,"user_id":65,"domain":"hpyproject.org","root_domain":"hpyproject.org"},{"url":"https://blog.m-ou.se/rust-standard/","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":14,"user_id":8236,"domain":"blog.m-ou.se","root_domain":"m-ou.se"},{"url":"https://doc.rust-lang.org/nightly/rustc/platform-support.html","title":"Platform Support - The rustc book","internal":false,"attachment":false,"reflection":false,"clicks":14,"user_id":136,"domain":"doc.rust-lang.org","root_domain":"rust-lang.org"},{"url":"https://security.googleblog.com/2021/04/rust-in-android-platform.html","title":"Google Online Security Blog: Rust in the Android platform","internal":false,"attachment":false,"reflection":false,"clicks":14,"user_id":136,"domain":"security.googleblog.com","root_domain":"googleblog.com"},{"url":"https://en.wikipedia.org/wiki/Ship_of_Theseus","title":"Ship of Theseus - Wikipedia","internal":false,"attachment":false,"reflection":false,"clicks":13,"user_id":17,"domain":"en.wikipedia.org","root_domain":"wikipedia.org"},{"url":"https://www.youtube.com/watch?v=tWx769t1JKg\u0026t=355s","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":12,"user_id":29236,"domain":"www.youtube.com","root_domain":"youtube.com"},{"url":"https://wiki.mozilla.org/Oxidation","title":"Oxidation - MozillaWiki","internal":false,"attachment":false,"reflection":false,"clicks":12,"user_id":136,"domain":"wiki.mozilla.org","root_domain":"mozilla.org"},{"url":"https://github.com/rust-lang/rfcs/pull/3720","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":11,"user_id":136,"domain":"github.com","root_domain":"github.com"},{"url":"https://www.youtube.com/watch?v=HX0GH-YJbGw\u0026t=760s","title":null,"internal":false,"attachment":false,"reflection":false,"clicks":11,"user_id":1017,"domain":"www.youtube.com","root_domain":"youtube.com"},{"url":"https://lobste.rs/s/xj4ncv/hard_rust_requirements_from_may_onward#c_fwf8lw","title":"Hard Rust requirements from May onward | Lobsters","internal":false,"attachment":false,"reflection":false,"clicks":11,"user_id":10221,"domain":"lobste.rs","root_domain":"lobste.rs"},{"url":"https://www.pantsbuild.org/stable/docs/writing-plugins/the-rules-api/concepts","title":"Concepts | Pantsbuild","internal":false,"attachment":false,"reflection":false,"clicks":10,"user_id":6039,"domain":"www.pantsbuild.org","root_domain":"pantsbuild.org"},{"url":"https://github.com/RustPython/pymath","title":"GitHub - RustPython/pymath","internal":false,"attachment":false,"reflection":false,"clicks":9,"user_id":29236,"domain":"github.com","root_domain":"github.com"}]},"bookmarks":[]}